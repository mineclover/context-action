# Context-Action Framework - Complete Documentation

Generated: 2025-08-14
Type: Origin (Full Documents)
Language: KO

This document contains the complete original content of all Context-Action framework documentation files, organized by priority.

---


# Guide Concepts

**Source**: `guide/concepts.md`  
**Priority**: 100 (critical)  

# í•µì‹¬ ê°œë…

Context-Action í”„ë ˆì„ì›Œí¬ì˜ ê¸°ë³¸ ê°œë…ì„ ì´í•´í•˜ëŠ” ê²ƒì€ íš¨ê³¼ì ì¸ êµ¬í˜„ì„ ìœ„í•´ í•„ìˆ˜ì ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” í•µì‹¬ êµ¬ì„± ìš”ì†Œì™€ ê·¸ë“¤ì˜ ê´€ê³„ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.

## ì•„í‚¤í…ì²˜ ê°œìš”

Context-Action í”„ë ˆì„ì›Œí¬ëŠ” ì„¸ ê°€ì§€ ì£¼ìš” ê³„ì¸µì„ í†µí•´ ê¹”ë”í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤:

```mermaid
graph TB
    subgraph "VIEW LAYER"
        A[React ì»´í¬ë„ŒíŠ¸<br/>UI í”„ë ˆì  í…Œì´ì…˜]
    end
    
    subgraph "VIEWMODEL LAYER"  
        B[ì•¡ì…˜ í•¸ë“¤ëŸ¬<br/>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§]
    end
    
    subgraph "MODEL LAYER"
        C[ìŠ¤í† ì–´ ì‹œìŠ¤í…œ<br/>ìƒíƒœ ê´€ë¦¬]
    end
    
    A -->|ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜| B
    B -->|ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸| C
    C -->|êµ¬ë…/ë¦¬ë Œë”| A
    
    style A fill:#e3f2fd
    style B fill:#fff8e1
    style C fill:#e8f5e8
```

## í•µì‹¬ êµ¬ì„± ìš”ì†Œ

### 1. ë„ë©”ì¸ë³„ í›… íŒ¨í„´

í”„ë ˆì„ì›Œí¬ì˜ ê¸°ì´ˆëŠ” êµ¬ì¡° ë¶„í•´ í• ë‹¹ì„ í†µí•´ ë„ë©”ì¸ë³„ í›…ì„ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:

```typescript
// ë„ë©”ì¸ ë°ì´í„° êµ¬ì¡° ì •ì˜
interface UserData {
  profile: { id: string; name: string; email: string };
  preferences: { theme: 'light' | 'dark'; language: string };
}

// ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ í›… ìƒì„±
export const {
  Provider: UserProvider,
  useStore: useUserStore,        // ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ ì ‘ê·¼
  useStores: useUserStores,      // ìŠ¤í† ì–´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì ‘ê·¼
} = createDeclarativeStores<UserData>('User', {
  profile: { initialValue: { id: '', name: '', email: '' } },
  preferences: { initialValue: { theme: 'light', language: 'en' } }
});

// ë„ë©”ì¸ë³„ ì•¡ì…˜ í›… ìƒì„±
export const {
  Provider: UserActionProvider,
  useAction: useUserAction,      // ë„ë©”ì¸ë³„ ì•¡ì…˜ ë””ìŠ¤íŒ¨ì²˜
  useActionRegister: useUserActionRegister
} = createActionContext<UserActions>({ name: 'UserAction' });
```

**ì¥ì :**
- ì™„ì „í•œ TypeScript ì¶”ë¡ 
- ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„
- ì§ê´€ì ì´ê³  ìë™ì™„ì„± ì¹œí™”ì ì¸ API
- ë¦¬íŒ©í† ë§ ì•ˆì „ì„±

### 2. ìŠ¤í† ì–´ ì‹œìŠ¤í…œ

ìŠ¤í† ì–´ëŠ” í”„ë¡œë°”ì´ë” ê²½ê³„ ë‚´ì—ì„œ ì‹±ê¸€í†¤ ë™ì‘ìœ¼ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤:

```typescript
function UserProfile() {
  // ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ ê°€ì ¸ì˜¤ê¸°
  const profileStore = useUserStore('profile');
  
  // ë³€ê²½ ì‚¬í•­ êµ¬ë… (ë°˜ì‘í˜•)
  const profile = useStoreValue(profileStore);
  
  // ì§ì ‘ ìŠ¤í† ì–´ ì¡°ì‘ (í•„ìš”ì‹œ)
  const updateName = (name: string) => {
    profileStore.setValue({ ...profile, name });
  };
  
  return <div>ì•ˆë…•í•˜ì„¸ìš”, {profile.name}ë‹˜!</div>;
}
```

**ìŠ¤í† ì–´ íŒ¨í„´:**

1. **ì‹±ê¸€í†¤ ë™ì‘:** í”„ë¡œë°”ì´ë” ë²”ìœ„ ë‚´ì—ì„œ ë™ì¼í•œ ìŠ¤í† ì–´ ì´ë¦„ì´ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
2. **ë°˜ì‘í˜• êµ¬ë…:** ì»´í¬ë„ŒíŠ¸ê°€ ë³€ê²½ ì‚¬í•­ì— ìë™ìœ¼ë¡œ ë¦¬ë Œë”ë§
3. **íƒ€ì… ì•ˆì „ì„±:** ë„ë©”ì¸ë³„ íƒ€ì…ê³¼ ì™„ì „í•œ TypeScript ì§€ì›

### 3. ì•¡ì…˜ íŒŒì´í”„ë¼ì¸ ì‹œìŠ¤í…œ

ì•¡ì…˜ì€ ìš°ì„ ìˆœìœ„ ê¸°ë°˜ í•¸ë“¤ëŸ¬ ì‹œìŠ¤í…œì„ í†µí•´ íë¦…ë‹ˆë‹¤:

```typescript
// ì•¡ì…˜ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface UserActions {
  updateProfile: { data: Partial<UserData['profile']> };
  deleteUser: { userId: string };
  resetUser: void;
}

// í•¸ë“¤ëŸ¬ ë“±ë¡
function useUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserRegistry();
  
  const updateProfileHandler = useCallback(async (payload, controller) => {
    // í˜„ì¬ ìƒíƒœ ê°€ì ¸ì˜¤ê¸° (ì§€ì—° í‰ê°€)
    const profileStore = registry.getStore('profile');
    const currentProfile = profileStore.getValue();
    
    // ê²€ì¦
    if (!payload.data.email?.includes('@')) {
      controller.abort('ì˜ëª»ëœ ì´ë©”ì¼ í˜•ì‹');
      return;
    }
    
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    const updatedProfile = { ...currentProfile, ...payload.data };
    profileStore.setValue(updatedProfile);
    
    // ê²°ê³¼ ë°˜í™˜
    return { success: true, profile: updatedProfile };
  }, [registry]);
  
  // ì •ë¦¬ì™€ í•¨ê»˜ ë“±ë¡
  useEffect(() => {
    if (!register) return;
    const unregister = register('updateProfile', updateProfileHandler, {
      priority: 100,
      blocking: true,
      id: 'profile-updater'
    });
    return unregister; // ì¤‘ìš”: ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
  }, [register, updateProfileHandler]);
}
```

**í•¸ë“¤ëŸ¬ ê¸°ëŠ¥:**

- **ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì‹¤í–‰:** ë†’ì€ ìš°ì„ ìˆœìœ„ í•¸ë“¤ëŸ¬ê°€ ë¨¼ì € ì‹¤í–‰
- **ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹:** ë¹„ë™ê¸° ì‹¤í–‰ íë¦„ ì œì–´
- **ê²°ê³¼ ìˆ˜ì§‘:** ì—¬ëŸ¬ í•¸ë“¤ëŸ¬ë¡œë¶€í„° ê²°ê³¼ ìˆ˜ì§‘
- **ì˜¤ë¥˜ ì²˜ë¦¬:** ë‚´ì¥ëœ ì˜¤ë¥˜ ê´€ë¦¬ ë° ì¤‘ë‹¨ ë©”ì»¤ë‹ˆì¦˜

### 4. í”„ë¡œë°”ì´ë” êµ¬ì„±

ì¤‘ì²©ëœ í”„ë¡œë°”ì´ë”ë¡œ ë„ë©”ì¸ êµ¬ì„±:

```typescript
// ë„ë©”ì¸ë³„ í”„ë¡œë°”ì´ë” êµ¬ì„±
function UserProvider({ children }: { children: React.ReactNode }) {
  return (
    <UserStoreProvider>
      <UserActionProvider>
        <UserHandlersSetup />
        {children}
      </UserActionProvider>
    </UserStoreProvider>
  );
}

// í•¸ë“¤ëŸ¬ ì„¤ì • ì»´í¬ë„ŒíŠ¸
function UserHandlersSetup() {
  useUserHandlers(); // ëª¨ë“  ë„ë©”ì¸ í•¸ë“¤ëŸ¬ ë“±ë¡
  return null;
}

// ì‚¬ìš©ë²•
function App() {
  return (
    <UserProvider>
      <UserProfile />
    </UserProvider>
  );
}
```

## ë°ì´í„° íë¦„ íŒ¨í„´

### 1. ì»´í¬ë„ŒíŠ¸ â†’ ì•¡ì…˜ â†’ ìŠ¤í† ì–´ â†’ ì»´í¬ë„ŒíŠ¸

í‘œì¤€ ë°˜ì‘í˜• íë¦„:

```typescript
function UserEditor() {
  // ìŠ¤í† ì–´ êµ¬ë…
  const profile = useStoreValue(useUserStore('profile'));
  const dispatch = useUserAction();
  
  // ì•¡ì…˜ íŠ¸ë¦¬ê±°
  const handleSave = () => {
    dispatch('updateProfile', { 
      data: { name: 'ì—…ë°ì´íŠ¸ëœ ì´ë¦„' } 
    });
  };
  
  // í”„ë¡œí•„ì´ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
  return (
    <form onSubmit={handleSave}>
      <input defaultValue={profile.name} />
      <button type="submit">ì €ì¥</button>
    </form>
  );
}
```

### 2. í•¸ë“¤ëŸ¬ ì ‘ê·¼ íŒ¨í„´

ìŠ¤í† ì–´ ì ‘ê·¼ì„ ìœ„í•œ ì„¸ ê°€ì§€ ìœ íš¨í•œ íŒ¨í„´:

```typescript
// íŒ¨í„´ 1: ì»´í¬ë„ŒíŠ¸ ì ‘ê·¼ (ë°˜ì‘í˜•)
const store = useUserStore('profile');
const profile = useStoreValue(store);

// íŒ¨í„´ 2: í•¸ë“¤ëŸ¬ ì ‘ê·¼ (ì§€ì—° í‰ê°€)
const handler = async (payload, controller) => {
  const profileStore = registry.getStore('profile');
  const currentProfile = profileStore.getValue(); // ìµœì‹  ê°’
};

// íŒ¨í„´ 3: ì»¨í…ìŠ¤íŠ¸ ìŠ¤í† ì–´ íŒ¨í„´ (ê²©ë¦¬ë¨)
const store = UserStores.useStore('profile', initialValue);
```

### 3. í¬ë¡œìŠ¤ ë„ë©”ì¸ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜

ë„ë©”ì¸ ê°„ ìƒí˜¸ì‘ìš©ì´ í•„ìš”í•œ ê²½ìš°:

```typescript
function useUserCartIntegration() {
  // ì—¬ëŸ¬ ë„ë©”ì¸ ì ‘ê·¼
  const userProfile = useUserStore('profile');
  const cartItems = useCartStore('items');
  const userAction = useUserAction();
  const cartAction = useCartAction();
  
  const profile = useStoreValue(userProfile);
  const items = useStoreValue(cartItems);
  
  const processCheckout = useCallback(async () => {
    // í¬ë¡œìŠ¤ ë„ë©”ì¸ ê²€ì¦
    if (!profile.id) {
      await userAction('requireLogin', {});
      return;
    }
    
    // í¬ë¡œìŠ¤ ë„ë©”ì¸ ì•¡ì…˜
    await cartAction('processCheckout', {
      userId: profile.id,
      items: items
    });
  }, [profile.id, items, userAction, cartAction]);
  
  return { processCheckout };
}
```

## í•¸ë“¤ëŸ¬ ë“±ë¡ íŒ¨í„´

### ìµœì„ ì˜ íŒ¨í„´

í•­ìƒ `useActionRegister` + `useEffect`ë¥¼ ì •ë¦¬ì™€ í•¨ê»˜ ì‚¬ìš©:

```typescript
function useUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserRegistry();
  
  // useCallbackìœ¼ë¡œ í•¸ë“¤ëŸ¬ ë˜í•‘
  const handler = useCallback(async (payload, controller) => {
    // ì—¬ê¸°ì— í•¸ë“¤ëŸ¬ ë¡œì§
  }, [registry]);
  
  // ì •ë¦¬ì™€ í•¨ê»˜ ë“±ë¡
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('actionName', handler, {
      priority: 100,
      blocking: true,
      id: 'unique-handler-id'
    });
    
    return unregister; // ì¤‘ìš”: ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
  }, [register, handler]);
}
```

### í•¸ë“¤ëŸ¬ êµ¬ì„± ì˜µì…˜

```typescript
interface HandlerConfig {
  priority?: number;        // ì‹¤í–‰ ìˆœì„œ (ë†’ì„ìˆ˜ë¡ ë¨¼ì €)
  blocking?: boolean;       // ë¹„ë™ê¸° ì™„ë£Œ ëŒ€ê¸°
  tags?: string[];         // í•„í„°ë§ìš©
  id?: string;            // ëª…ì‹œì  í•¸ë“¤ëŸ¬ ID
  category?: string;      // í•¸ë“¤ëŸ¬ ì¹´í…Œê³ ë¦¬
  returnType?: 'value';   // ë°˜í™˜ê°’ ìˆ˜ì§‘ í™œì„±í™”
}
```

## ì»¨í…ìŠ¤íŠ¸ ê²½ê³„ & ë„ë©”ì¸ ê²©ë¦¬

### ë‹¨ì¼ ë„ë©”ì¸ ì•„í‚¤í…ì²˜

```typescript
// ë„ë©”ì¸ë³„ ìŠ¤í† ì–´
const UserStores = createContextStorePattern('User');

// ê²©ë¦¬ëœ í”„ë¡œë°”ì´ë” ê²½ê³„
<UserStores.Provider registryId="user-domain">
  <UserComponents />
</UserStores.Provider>

// ë„ë©”ì¸ë³„ ì‚¬ìš©ë²•
const userStore = UserStores.useStore('profile', initialData);
```

### ë‹¤ì¤‘ ë„ë©”ì¸ ì•„í‚¤í…ì²˜

```typescript
function App() {
  return (
    <UserProvider>        {/* ì‚¬ìš©ì ë„ë©”ì¸ ê²½ê³„ */}
      <CartProvider>      {/* ì¥ë°”êµ¬ë‹ˆ ë„ë©”ì¸ ê²½ê³„ */}
        <OrderProvider>   {/* ì£¼ë¬¸ ë„ë©”ì¸ ê²½ê³„ */}
          <ApplicationComponents />
        </OrderProvider>
      </CartProvider>
    </UserProvider>
  );
}
```

## ë©”ëª¨ë¦¬ ê´€ë¦¬

### ìŠ¤í† ì–´ ìƒëª…ì£¼ê¸°

- **ìƒì„±:** í”„ë¡œë°”ì´ë” ë‚´ì—ì„œ ì²˜ìŒ ì ‘ê·¼ë  ë•Œ ìŠ¤í† ì–´ê°€ ìƒì„±ë¨
- **ì§€ì†ì„±:** í”„ë¡œë°”ì´ë”ì˜ ìƒëª…ì£¼ê¸° ë™ì•ˆ ìŠ¤í† ì–´ê°€ ì§€ì†ë¨
- **ì •ë¦¬:** í”„ë¡œë°”ì´ë”ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ë©´ ìŠ¤í† ì–´ê°€ ì •ë¦¬ë¨

### í•¸ë“¤ëŸ¬ ì •ë¦¬

```typescript
// âŒ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ - ì •ë¦¬ ì—†ìŒ
useEffect(() => {
  register('action', handler);
}, []);

// âœ… ì ì ˆí•œ ì •ë¦¬
useEffect(() => {
  if (!register) return;
  const unregister = register('action', handler);
  return unregister; // ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
}, [register, handler]);
```

## íƒ€ì… ì•ˆì „ì„± ê¸°ëŠ¥

### ìë™ íƒ€ì… ì¶”ë¡ 

```typescript
// íƒ€ì…ì´ ìë™ìœ¼ë¡œ ì¶”ë¡ ë¨
const store = useUserStore('profile'); // Store<UserProfile>
const profile = useStoreValue(store);  // UserProfile
const dispatch = useUserAction();      // Dispatch<UserActions>
```

### ì»´íŒŒì¼ ì‹œ ì•ˆì „ì„±

```typescript
// ì˜ëª»ëœ ì•¡ì…˜ ì´ë¦„ - ì»´íŒŒì¼ ì—ëŸ¬
dispatch('invalidAction', {}); 
// TS ì—ëŸ¬: '"invalidAction"' í˜•ì‹ì˜ ì¸ìˆ˜ë¥¼ í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

// ì˜ëª»ëœ í˜ì´ë¡œë“œ - ì»´íŒŒì¼ ì—ëŸ¬  
dispatch('updateProfile', { invalid: 'data' });
// TS ì—ëŸ¬: ê°ì²´ ë¦¬í„°ëŸ´ì€ ì•Œë ¤ì§„ ì†ì„±ë§Œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
```

---

## ìš”ì•½

Context-Action í”„ë ˆì„ì›Œí¬ì˜ í•µì‹¬ ê°œë…ë“¤ì´ í•¨ê»˜ ì‘ë™í•˜ì—¬ ë‹¤ìŒì„ ì œê³µí•©ë‹ˆë‹¤:

- ì»¨í…ìŠ¤íŠ¸ ê²½ê³„ë¥¼ í†µí•œ **ë„ë©”ì¸ ê²©ë¦¬**
- ìë™ ì¶”ë¡ ì„ í†µí•œ **íƒ€ì… ì•ˆì „ì„±**
- ìµœì†Œí•œì˜ ë¦¬ë Œë”ë§ì„ í†µí•œ **ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬**
- ì¤‘ì•™í™”ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í†µí•œ **ì„ ì–¸ì  ì•¡ì…˜**
- ì ì ˆí•œ ì •ë¦¬ íŒ¨í„´ì„ í†µí•œ **ë©”ëª¨ë¦¬ ì•ˆì „ì„±**

ì´ëŸ¬í•œ ê°œë…ì„ ì´í•´í•˜ë©´ ëª…í™•í•œ ì•„í‚¤í…ì²˜ ê²½ê³„ë¥¼ ê°€ì§„ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
êµ¬í˜„í•  ì¤€ë¹„ê°€ ë˜ì…¨ë‚˜ìš”? ì™„ì „í•œ íŒ¨í„´ê³¼ ì˜ˆì œë¥¼ ìœ„í•´ [ì „ì²´ êµ¬í˜„ ê°€ì´ë“œ](./full)ë¥¼ í™•ì¸í•˜ê±°ë‚˜, ì‹¤ìŠµ ì½”ë”©ì„ ìœ„í•´ [ë¹ ë¥¸ ì‹œì‘](./quick-start)ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.
:::

---


# Guide Overview

**Source**: `guide/overview.md`  
**Priority**: 100 (critical)  

# Context Action í”„ë ˆì„ì›Œí¬ ê°œìš”

Context-Action í”„ë ˆì„ì›Œí¬ëŠ” ì™„ì „í•œ ë„ë©”ì¸ ê²©ë¦¬ë¥¼ ìœ„í•œ **ì»¨í…ìŠ¤íŠ¸ ìŠ¤í† ì–´ íŒ¨í„´**ê³¼ ê²°í•©ëœ MVVMì—ì„œ ì˜ê°ì„ ë°›ì€ íŒ¨í„´ì„ í†µí•´ ê¹”ë”í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

## ì•„í‚¤í…ì²˜ ê°œìš”

```mermaid
graph LR
    A[ì»´í¬ë„ŒíŠ¸] -->|ë””ìŠ¤íŒ¨ì¹˜| B[ì•¡ì…˜ íŒŒì´í”„ë¼ì¸]
    B -->|í•¸ë“¤ëŸ¬| C[ìŠ¤í† ì–´]
    C -->|êµ¬ë…| A
    
    style A fill:#e3f2fd
    style B fill:#fff8e1
    style C fill:#e8f5e8
```

## ì£¼ìš” ì¥ì 

1. **ë„ë©”ì¸ ê²©ë¦¬** - ê° ì»¨í…ìŠ¤íŠ¸ê°€ ì™„ì „í•œ ë…ë¦½ì„±ì„ ìœ ì§€
2. **íƒ€ì… ì•ˆì „ì„±** - ë„ë©”ì¸ë³„ í›…ê³¼ í•¨ê»˜ ì™„ì „í•œ TypeScript ì§€ì›
3. **ì„±ëŠ¥** - ì˜í–¥ì„ ë°›ëŠ” ì»´í¬ë„ŒíŠ¸ë§Œ ë¦¬ë Œë”ë§
4. **í™•ì¥ì„±** - ê¸°ì¡´ ë„ë©”ì¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ìƒˆ ë„ë©”ì¸ ì¶”ê°€ ìš©ì´
5. **íŒ€ í˜‘ì—…** - ë‹¤ë¥¸ íŒ€ì´ ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ì‘ì—… ê°€ëŠ¥

## ë¹ ë¥¸ íƒìƒ‰

- [ì™„ì „í•œ êµ¬í˜„ ê°€ì´ë“œ](./full) - ëª¨ë“  íŒ¨í„´ì´ í¬í•¨ëœ ì™„ì „í•œ êµ¬í˜„ ê°€ì´ë“œ
- [ë¹ ë¥¸ ì‹œì‘](./quick-start) - ë¹ ë¥´ê²Œ ì‹œì‘í•˜ê¸°
- [í•µì‹¬ ê°œë…](./concepts) - ê¸°ë³¸ ê°œë… ì´í•´í•˜ê¸°
- [ì„¤ì • & ì‚¬ìš©ë²•](./setup-usage) - ìƒì„¸í•œ ì„¤ì • ë°©ë²•

## í”„ë ˆì„ì›Œí¬ ì² í•™

Context-Action í”„ë ˆì„ì›Œí¬ëŠ” ë‹¤ìŒ í•µì‹¬ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

- **ì•¡ì…˜**ì´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬ (ViewModel ê³„ì¸µ)
- **ì»¨í…ìŠ¤íŠ¸ ìŠ¤í† ì–´ íŒ¨í„´**ì´ ë„ë©”ì¸ ê²©ë¦¬ì™€ í•¨ê»˜ ìƒíƒœë¥¼ ê´€ë¦¬ (Model ê³„ì¸µ)
- **ì»´í¬ë„ŒíŠ¸**ê°€ UIë¥¼ ë Œë”ë§ (View ê³„ì¸µ)
- **ì»¨í…ìŠ¤íŠ¸ ê²½ê³„**ê°€ ê¸°ëŠ¥ ë„ë©”ì¸ì„ ê²©ë¦¬
- ë„ë©”ì¸ë³„ í›…ì„ í†µí•œ **íƒ€ì… ì•ˆì „ í†µí•©**

---

::: tip ë‹¤ìŒ ë‹¨ê³„
í¬ê´„ì ì¸ ì´í•´ë¥¼ ìœ„í•´ [ì™„ì „í•œ êµ¬í˜„ ê°€ì´ë“œ](./full)ë¶€í„° ì‹œì‘í•˜ê±°ë‚˜, ë°”ë¡œ ì½”ë”©ì„ ì‹œì‘í•˜ê³  ì‹¶ë‹¤ë©´ [ë¹ ë¥¸ ì‹œì‘](./quick-start)ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.
:::

---


# Guide Quick Start

**Source**: `guide/quick-start.md`  
**Priority**: 95 (critical)  

# ë¹ ë¥¸ ì‹œì‘

Context-Action í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥´ê²Œ ì‹œì‘í•´ë³´ì„¸ìš”. ì´ ê°€ì´ë“œëŠ” 5ë¶„ ì•ˆì— ì²« ë²ˆì§¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

## ì„¤ì¹˜

```bash
npm install @context-action/core @context-action/react
# ë˜ëŠ”
yarn add @context-action/core @context-action/react
```

## 1ë‹¨ê³„: ë„ë©”ì¸ ì •ì˜

ë¨¼ì € ì• í”Œë¦¬ì¼€ì´ì…˜ ë„ë©”ì¸ì„ ì •ì˜í•©ë‹ˆë‹¤:

```typescript
// stores/user.store.ts
import { createDeclarativeStores, createActionContext } from '@context-action/react';

// ë°ì´í„° êµ¬ì¡° ì •ì˜
export interface UserData {
  profile: {
    id: string;
    name: string;
    email: string;
  };
  preferences: {
    theme: 'light' | 'dark';
    language: string;
  };
}

// ì•¡ì…˜ ì •ì˜
export interface UserActions {
  login: { email: string; password: string };
  updateProfile: { data: Partial<UserData['profile']> };
  logout: void;
}

// ìŠ¤í† ì–´ í›… ìƒì„±
export const {
  Provider: UserStoreProvider,
  useStore: useUserStore,
  useStores: useUserStores
} = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: { id: '', name: '', email: '' }
  },
  preferences: {
    initialValue: { theme: 'light', language: 'ko' }
  }
});

// ì•¡ì…˜ í›… ìƒì„±
export const {
  Provider: UserActionProvider,
  useAction: useUserAction,
  useActionHandler: useUserActionHandler
} = createActionContext<UserActions>({ name: 'UserAction' });
```

## 2ë‹¨ê³„: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (í•¸ë“¤ëŸ¬)

```typescript
// hooks/useUserHandlers.ts
import { useCallback, useEffect } from 'react';
import { useUserActionHandler, useUserStores } from '../stores/user.store';

export function useUserHandlers() {
  const addHandler = useUserActionHandler();
  const stores = useUserStores();
  
  // ë¡œê·¸ì¸ í•¸ë“¤ëŸ¬
  const loginHandler = useCallback(async (payload, controller) => {
    const profileStore = stores.getStore('profile');
    
    try {
      // ê°„ë‹¨í•œ ë¡œê·¸ì¸ ë¡œì§ (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” API í˜¸ì¶œ)
      if (payload.email === 'test@example.com' && payload.password === 'password') {
        profileStore.setValue({
          id: '1',
          name: 'í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì',
          email: payload.email
        });
        return { success: true };
      } else {
        controller.abort('ì˜ëª»ëœ ìê²©ì¦ëª…');
        return { success: false };
      }
    } catch (error) {
      controller.abort('ë¡œê·¸ì¸ ì‹¤íŒ¨', error);
      return { success: false };
    }
  }, [stores]);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬
  const updateProfileHandler = useCallback(async (payload, controller) => {
    const profileStore = stores.getStore('profile');
    const currentProfile = profileStore.getValue();
    
    // ì—…ë°ì´íŠ¸
    const updatedProfile = { ...currentProfile, ...payload.data };
    profileStore.setValue(updatedProfile);
    
    return { success: true, profile: updatedProfile };
  }, [stores]);
  
  // ë¡œê·¸ì•„ì›ƒ í•¸ë“¤ëŸ¬
  const logoutHandler = useCallback(async (payload, controller) => {
    const profileStore = stores.getStore('profile');
    profileStore.setValue({ id: '', name: '', email: '' });
    return { success: true };
  }, [stores]);
  
  // í•¸ë“¤ëŸ¬ ë“±ë¡
  useEffect(() => {
    if (!addHandler) return;
    
    const unregisterLogin = addHandler('login', loginHandler, {
      priority: 100,
      blocking: true,
      id: 'user-login'
    });
    
    const unregisterUpdate = addHandler('updateProfile', updateProfileHandler, {
      priority: 100,
      blocking: true,
      id: 'profile-update'
    });
    
    const unregisterLogout = addHandler('logout', logoutHandler, {
      priority: 100,
      blocking: true,
      id: 'user-logout'
    });
    
    return () => {
      unregisterLogin();
      unregisterUpdate();
      unregisterLogout();
    };
  }, [addHandler, loginHandler, updateProfileHandler, logoutHandler]);
}
```

## 3ë‹¨ê³„: UI ì»´í¬ë„ŒíŠ¸

```typescript
// components/UserProfile.tsx
import { useState, useCallback } from 'react';
import { useStoreValue } from '@context-action/react';
import { useUserStore, useUserAction } from '../stores/user.store';

export function UserProfile() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore);
  const dispatch = useUserAction();
  
  const [loginForm, setLoginForm] = useState({ email: '', password: '' });
  const [isEditing, setIsEditing] = useState(false);
  const [editForm, setEditForm] = useState({ name: profile.name });
  
  // ë¡œê·¸ì¸ ì²˜ë¦¬
  const handleLogin = useCallback(async () => {
    await dispatch('login', loginForm);
  }, [dispatch, loginForm]);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì²˜ë¦¬
  const handleUpdateProfile = useCallback(async () => {
    await dispatch('updateProfile', { data: { name: editForm.name } });
    setIsEditing(false);
  }, [dispatch, editForm.name]);
  
  // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  const handleLogout = useCallback(() => {
    dispatch('logout');
  }, [dispatch]);
  
  // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš°
  if (!profile.id) {
    return (
      <div>
        <h2>ë¡œê·¸ì¸</h2>
        <div>
          <input
            type="email"
            placeholder="ì´ë©”ì¼"
            value={loginForm.email}
            onChange={(e) => setLoginForm(prev => ({ ...prev, email: e.target.value }))}
          />
        </div>
        <div>
          <input
            type="password"
            placeholder="ë¹„ë°€ë²ˆí˜¸"
            value={loginForm.password}
            onChange={(e) => setLoginForm(prev => ({ ...prev, password: e.target.value }))}
          />
        </div>
        <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
        <p><small>í…ŒìŠ¤íŠ¸: test@example.com / password</small></p>
      </div>
    );
  }
  
  // ë¡œê·¸ì¸ëœ ê²½ìš°
  return (
    <div>
      <h2>ì‚¬ìš©ì í”„ë¡œí•„</h2>
      <div>
        <p><strong>ì´ë©”ì¼:</strong> {profile.email}</p>
        <div>
          <strong>ì´ë¦„:</strong>
          {isEditing ? (
            <span>
              <input
                value={editForm.name}
                onChange={(e) => setEditForm({ name: e.target.value })}
              />
              <button onClick={handleUpdateProfile}>ì €ì¥</button>
              <button onClick={() => setIsEditing(false)}>ì·¨ì†Œ</button>
            </span>
          ) : (
            <span>
              {profile.name || 'ì´ë¦„ ì—†ìŒ'}
              <button onClick={() => {
                setEditForm({ name: profile.name });
                setIsEditing(true);
              }}>
                í¸ì§‘
              </button>
            </span>
          )}
        </div>
        <button onClick={handleLogout}>ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>
  );
}
```

## 4ë‹¨ê³„: í”„ë¡œë°”ì´ë” ì„¤ì •

```typescript
// providers/UserProvider.tsx
import React from 'react';
import { UserStoreProvider, UserActionProvider } from '../stores/user.store';
import { useUserHandlers } from '../hooks/useUserHandlers';

// í•¸ë“¤ëŸ¬ ì„¤ì • ì»´í¬ë„ŒíŠ¸
function UserHandlersSetup() {
  useUserHandlers();
  return null;
}

// í†µí•© ì‚¬ìš©ì í”„ë¡œë°”ì´ë”
export function UserProvider({ children }: { children: React.ReactNode }) {
  return (
    <UserStoreProvider>
      <UserActionProvider>
        <UserHandlersSetup />
        {children}
      </UserActionProvider>
    </UserStoreProvider>
  );
}
```

## 5ë‹¨ê³„: ì•± ì„¤ì •

```typescript
// App.tsx
import React from 'react';
import { UserProvider } from './providers/UserProvider';
import { UserProfile } from './components/UserProfile';

function App() {
  return (
    <UserProvider>
      <div style={{ padding: '20px' }}>
        <h1>Context-Action ë¹ ë¥¸ ì‹œì‘</h1>
        <UserProfile />
      </div>
    </UserProvider>
  );
}

export default App;
```

## ê²°ê³¼

ì´ì œ ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°€ì§„ ì™„ì „í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆìŠµë‹ˆë‹¤:

- âœ… **íƒ€ì… ì•ˆì „í•œ** ìƒíƒœ ê´€ë¦¬
- âœ… **ë°˜ì‘í˜•** UI ì—…ë°ì´íŠ¸
- âœ… **ì¤‘ì•™í™”ëœ** ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- âœ… **ë„ë©”ì¸ ê²©ë¦¬**
- âœ… **ìë™ ì •ë¦¬** (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ)

## ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
npm run dev
# ë˜ëŠ”
yarn dev
```

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
1. ë¡œê·¸ì¸ í¼
2. `test@example.com` / `password`ë¡œ ë¡œê·¸ì¸
3. í”„ë¡œí•„ í¸ì§‘ ê¸°ëŠ¥
4. ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥

## ì£¼ìš” ê°œë… ìš”ì•½

### 1. ë„ë©”ì¸ë³„ í›…
```typescript
const store = useUserStore('profile');  // íƒ€ì… ì•ˆì „í•œ ìŠ¤í† ì–´ ì ‘ê·¼
const dispatch = useUserAction();       // íƒ€ì… ì•ˆì „í•œ ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
```

### 2. ë°˜ì‘í˜• êµ¬ë…
```typescript
const profile = useStoreValue(profileStore);  // ìë™ ë¦¬ë Œë”ë§
```

### 3. ì¤‘ì•™í™”ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
```typescript
// ì»´í¬ë„ŒíŠ¸ì—ì„œ
dispatch('login', { email, password });

// í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬ë¨
const loginHandler = async (payload, controller) => { /* ë¡œì§ */ };
```

### 4. ìë™ ì •ë¦¬
```typescript
useEffect(() => {
  const unregister = addHandler('action', handler);
  return unregister;  // ìë™ ì •ë¦¬
}, []);
```

---

## ë‹¤ìŒ ë‹¨ê³„

ì¶•í•˜í•©ë‹ˆë‹¤! ì²« ë²ˆì§¸ Context-Action ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

### ë” í•™ìŠµí•˜ê¸°

- [í•µì‹¬ ê°œë…](./concepts) - ê¹Šì´ ìˆëŠ” ì´í•´
- [ì„¤ì • & ì‚¬ìš©ë²•](./setup-usage) - ê³ ê¸‰ ì„¤ì • ì˜µì…˜
- [ìµœì„ ì˜ ì‹¤ìŠµ](./best-practices) - í”„ë¡œë•ì…˜ í™˜ê²½ íŒ
- [ì„±ëŠ¥ ìµœì í™”](./performance) - ì„±ëŠ¥ í–¥ìƒ ê¸°ë²•

### í™•ì¥í•˜ê¸°

ì´ì œ ë‹¤ìŒì„ ì¶”ê°€í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- ìƒˆë¡œìš´ ë„ë©”ì¸ (Cart, Order ë“±)
- ë” ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- API í†µí•©
- í…ŒìŠ¤íŠ¸ ì‘ì„±
- ì˜¤ë¥˜ ì²˜ë¦¬ ê°œì„ 

Happy coding! ğŸš€

---


# ì•¡ì…˜ í•¸ë“¤ëŸ¬

**Source**: `guide/action-handlers.md`  
**Priority**: 80 (essential)  

# ì•¡ì…˜ í•¸ë“¤ëŸ¬

ì•¡ì…˜ í•¸ë“¤ëŸ¬ëŠ” Context-Action í”„ë ˆì„ì›Œí¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µìœ¼ë¡œ, ì„ ì–¸ì  ì•¡ì…˜ì„ ì‹¤ì œ ìƒíƒœ ë³€ê²½ê³¼ ë¶€ìˆ˜ íš¨ê³¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” íš¨ê³¼ì ì¸ í•¸ë“¤ëŸ¬ ì‘ì„±ê³¼ ê´€ë¦¬ íŒ¨í„´ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## í•¸ë“¤ëŸ¬ ê¸°ë³¸ êµ¬ì¡°

### í•¸ë“¤ëŸ¬ ì‹œê·¸ë‹ˆì²˜

ëª¨ë“  ì•¡ì…˜ í•¸ë“¤ëŸ¬ëŠ” í‘œì¤€í™”ëœ ì‹œê·¸ë‹ˆì²˜ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

```typescript
type ActionHandler<TPayload> = (
  payload: TPayload,
  controller: ActionController
) => Promise<any> | any;
```

### ê¸°ë³¸ í•¸ë“¤ëŸ¬ íŒ¨í„´

```typescript
function useUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  // í•¸ë“¤ëŸ¬ êµ¬í˜„
  const updateProfileHandler = useCallback(async (
    payload: UserActions['updateProfile'],
    controller: ActionController
  ) => {
    // 1. í˜„ì¬ ìƒíƒœ íšë“ (ì§€ì—° í‰ê°€)
    const profileStore = registry.getStore('profile');
    const currentProfile = profileStore.getValue();
    
    // 2. ì…ë ¥ ê²€ì¦
    if (!payload.data.email?.includes('@')) {
      controller.abort('ì˜ëª»ëœ ì´ë©”ì¼ í˜•ì‹');
      return { success: false, error: 'INVALID_EMAIL' };
    }
    
    // 3. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰
    try {
      const updatedProfile = {
        ...currentProfile,
        ...payload.data,
        lastModified: Date.now()
      };
      
      // 4. ìƒíƒœ ì—…ë°ì´íŠ¸
      profileStore.setValue(updatedProfile);
      
      // 5. ê²°ê³¼ ë°˜í™˜
      return { 
        success: true, 
        profile: updatedProfile,
        timestamp: Date.now()
      };
      
    } catch (error) {
      // 6. ì˜¤ë¥˜ ì²˜ë¦¬
      controller.abort('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', error);
      return { success: false, error: 'UPDATE_FAILED' };
    }
  }, [registry]);
  
  // 7. í•¸ë“¤ëŸ¬ ë“±ë¡
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('updateProfile', updateProfileHandler, {
      priority: 100,
      blocking: true,
      id: 'profile-updater'
    });
    
    return unregister; // ì •ë¦¬
  }, [register, updateProfileHandler]);
}
```

## í•¸ë“¤ëŸ¬ êµ¬ì„± ì˜µì…˜

### ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ

í•¸ë“¤ëŸ¬ëŠ” ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì‹¤í–‰ë©ë‹ˆë‹¤ (ë†’ì€ ìˆ«ìê°€ ë¨¼ì €):

```typescript
// ê²€ì¦ í•¸ë“¤ëŸ¬ (ê°€ì¥ ë¨¼ì € ì‹¤í–‰)
register('updateProfile', validationHandler, {
  priority: 200,
  blocking: true,
  id: 'profile-validator'
});

// ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ë‘ ë²ˆì§¸)
register('updateProfile', updateHandler, {
  priority: 100,
  blocking: true,
  id: 'profile-updater'
});

// ë¡œê¹…/ê°ì‚¬ (ë§ˆì§€ë§‰)
register('updateProfile', loggingHandler, {
  priority: 50,
  blocking: false,
  id: 'profile-logger'
});
```

### ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹

```typescript
// ë¸”ë¡œí‚¹: í•¸ë“¤ëŸ¬ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¼
register('criticalAction', criticalHandler, {
  priority: 100,
  blocking: true  // ë‹¤ìŒ í•¸ë“¤ëŸ¬ ì‹¤í–‰ ì „ ëŒ€ê¸°
});

// ë…¼ë¸”ë¡œí‚¹: ì¦‰ì‹œ ë‹¤ìŒ í•¸ë“¤ëŸ¬ ì‹¤í–‰
register('logAction', loggingHandler, {
  priority: 50,
  blocking: false  // ë³‘ë ¬ ì‹¤í–‰
});
```

### í•¸ë“¤ëŸ¬ ë©”íƒ€ë°ì´í„°

```typescript
register('updateProfile', handler, {
  priority: 100,
  blocking: true,
  id: 'profile-updater',           // ê³ ìœ  ì‹ë³„ì
  tags: ['profile', 'user', 'api'], // ë¶„ë¥˜ íƒœê·¸
  category: 'business-logic',       // ì¹´í…Œê³ ë¦¬
  description: 'ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸', // ì„¤ëª…
  version: '1.0.0'                 // ë²„ì „
});
```

## ê³ ê¸‰ í•¸ë“¤ëŸ¬ íŒ¨í„´

### 1. ì¡°ê±´ë¶€ ì‹¤í–‰ í•¸ë“¤ëŸ¬

```typescript
const conditionalHandler = useCallback(async (payload, controller) => {
  const sessionStore = registry.getStore('session');
  const session = sessionStore.getValue();
  
  // ì¡°ê±´ ì²´í¬
  if (!session.isLoggedIn) {
    controller.abort('ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤');
    return { success: false, error: 'AUTHENTICATION_REQUIRED' };
  }
  
  if (session.role !== 'admin' && payload.adminAction) {
    controller.abort('ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');
    return { success: false, error: 'INSUFFICIENT_PERMISSIONS' };
  }
  
  // ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰
  return await executeBusinessLogic(payload);
}, [registry]);
```

### 2. ë‚™ê´€ì  ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬

```typescript
const optimisticUpdateHandler = useCallback(async (payload, controller) => {
  const profileStore = registry.getStore('profile');
  const currentProfile = profileStore.getValue();
  
  // 1. ì¦‰ì‹œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸
  const optimisticProfile = { ...currentProfile, ...payload.data };
  profileStore.setValue(optimisticProfile);
  
  try {
    // 2. ì„œë²„ API í˜¸ì¶œ
    const response = await updateProfileOnServer(payload.data);
    
    // 3. ì„œë²„ ì‘ë‹µìœ¼ë¡œ ìµœì¢… ì—…ë°ì´íŠ¸
    profileStore.setValue(response.profile);
    
    return { success: true, profile: response.profile };
    
  } catch (error) {
    // 4. ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
    profileStore.setValue(currentProfile);
    controller.abort('ì„œë²„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', error);
    return { success: false, error: 'SERVER_ERROR' };
  }
}, [registry]);
```

### 3. ë°°ì¹˜ ì²˜ë¦¬ í•¸ë“¤ëŸ¬

```typescript
const batchUpdateHandler = useCallback(async (payload, controller) => {
  const { updates } = payload;
  const results = [];
  const errors = [];
  
  // ë°°ì¹˜ ì²˜ë¦¬
  for (const update of updates) {
    try {
      const result = await processSingleUpdate(update);
      results.push(result);
    } catch (error) {
      errors.push({ update, error });
    }
  }
  
  // ë¶€ë¶„ ì„±ê³µ ì²˜ë¦¬
  if (errors.length > 0) {
    controller.abort('ì¼ë¶€ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', { errors });
    return { 
      success: false, 
      results, 
      errors,
      partialSuccess: results.length > 0
    };
  }
  
  return { success: true, results, processed: updates.length };
}, []);
```

### 4. ë””ë°”ìš´ìŠ¤ í•¸ë“¤ëŸ¬

```typescript
function useDebouncedHandler(delay: number = 500) {
  const timeoutRef = useRef<NodeJS.Timeout | null>(null);
  const registry = useUserStores();
  
  const debouncedHandler = useCallback(async (payload, controller) => {
    // ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œ
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    
    return new Promise((resolve) => {
      timeoutRef.current = setTimeout(async () => {
        try {
          const result = await performUpdate(payload);
          resolve({ success: true, result });
        } catch (error) {
          controller.abort('ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', error);
          resolve({ success: false, error });
        }
      }, delay);
    });
  }, [delay]);
  
  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì •ë¦¬
  useEffect(() => {
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);
  
  return debouncedHandler;
}
```

### 5. ë¦¬íŠ¸ë¼ì´ ë©”ì»¤ë‹ˆì¦˜

```typescript
const retryHandler = useCallback(async (payload, controller) => {
  const maxRetries = 3;
  let attempt = 0;
  
  while (attempt < maxRetries) {
    try {
      const result = await unstableOperation(payload);
      return { success: true, result, attempts: attempt + 1 };
      
    } catch (error) {
      attempt++;
      
      if (attempt >= maxRetries) {
        controller.abort('ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ ì´ˆê³¼', { 
          error, 
          attempts: attempt 
        });
        return { success: false, error: 'MAX_RETRIES_EXCEEDED' };
      }
      
      // ì§€ìˆ˜ ë°±ì˜¤í”„
      const delay = Math.pow(2, attempt) * 1000;
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}, []);
```

## ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´

### 1. ê³„ì¸µì  ì˜¤ë¥˜ ì²˜ë¦¬

```typescript
const robustHandler = useCallback(async (payload, controller) => {
  try {
    // Level 1: ì…ë ¥ ê²€ì¦
    validatePayload(payload);
    
    // Level 2: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
    await validateBusinessRules(payload);
    
    // Level 3: ì™¸ë¶€ ì˜ì¡´ì„±
    const externalData = await fetchExternalData();
    
    // Level 4: ìƒíƒœ ì—…ë°ì´íŠ¸
    updateStores(payload, externalData);
    
    return { success: true };
    
  } catch (error) {
    // ì˜¤ë¥˜ íƒ€ì…ë³„ ì²˜ë¦¬
    if (error instanceof ValidationError) {
      controller.abort('ê²€ì¦ ì‹¤íŒ¨', { 
        type: 'VALIDATION_ERROR',
        details: error.details 
      });
      return { success: false, error: 'VALIDATION_FAILED' };
    }
    
    if (error instanceof NetworkError) {
      controller.abort('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜', { 
        type: 'NETWORK_ERROR',
        retryable: true 
      });
      return { success: false, error: 'NETWORK_FAILED', retryable: true };
    }
    
    // ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜
    controller.abort('ì˜ˆê¸°ì¹˜ ì•Šì€ ì˜¤ë¥˜', { 
      type: 'UNKNOWN_ERROR',
      originalError: error.message 
    });
    return { success: false, error: 'UNKNOWN_ERROR' };
  }
}, []);
```

### 2. ë³µêµ¬ ê°€ëŠ¥í•œ ì˜¤ë¥˜ ì²˜ë¦¬

```typescript
const recoverableHandler = useCallback(async (payload, controller) => {
  const profileStore = registry.getStore('profile');
  const backup = profileStore.getValue();
  
  try {
    // ìœ„í—˜í•œ ì‘ì—… ìˆ˜í–‰
    const result = await riskyOperation(payload);
    profileStore.setValue(result.profile);
    
    return { success: true, result };
    
  } catch (error) {
    // ìë™ ë³µêµ¬ ì‹œë„
    try {
      await automaticRecovery(backup);
      controller.abort('ìë™ ë³µêµ¬ë¨', { recovered: true });
      return { success: false, recovered: true };
      
    } catch (recoveryError) {
      // ë³µêµ¬ ì‹¤íŒ¨ - ì›ë³¸ ìƒíƒœë¡œ ë¡¤ë°±
      profileStore.setValue(backup);
      controller.abort('ë³µêµ¬ ì‹¤íŒ¨', { 
        originalError: error,
        recoveryError 
      });
      return { success: false, rollback: true };
    }
  }
}, [registry]);
```

## ê²°ê³¼ ìˆ˜ì§‘ íŒ¨í„´

### 1. ë‹¨ì¼ ê²°ê³¼ ìˆ˜ì§‘

```typescript
function UserComponent() {
  const dispatchWithResult = useUserActionWithResult();
  
  const handleUpdate = useCallback(async () => {
    const result = await dispatchWithResult('updateProfile', 
      { data: { name: 'ìƒˆ ì´ë¦„' } },
      { result: { collect: true, strategy: 'first' } }
    );
    
    if (result.success) {
      console.log('ì²« ë²ˆì§¸ í•¸ë“¤ëŸ¬ ê²°ê³¼:', result.results[0]);
    } else {
      console.error('ì˜¤ë¥˜:', result.errors);
    }
  }, [dispatchWithResult]);
}
```

### 2. ëª¨ë“  ê²°ê³¼ ìˆ˜ì§‘

```typescript
const handleComplexAction = useCallback(async () => {
  const result = await dispatchWithResult('complexAction', payload, {
    result: { collect: true, strategy: 'all' }
  });
  
  if (result.success) {
    // ëª¨ë“  í•¸ë“¤ëŸ¬ ê²°ê³¼ ì²˜ë¦¬
    result.results.forEach((handlerResult, index) => {
      console.log(`í•¸ë“¤ëŸ¬ ${index + 1} ê²°ê³¼:`, handlerResult);
    });
  }
}, [dispatchWithResult]);
```

### 3. ì¡°ê±´ë¶€ ê²°ê³¼ ìˆ˜ì§‘

```typescript
const handleConditionalResult = useCallback(async () => {
  const result = await dispatchWithResult('action', payload, {
    result: { 
      collect: true, 
      strategy: 'all',
      filter: (result) => result && result.important === true
    }
  });
  
  // ì¤‘ìš”í•œ ê²°ê³¼ë§Œ ìˆ˜ì§‘ë¨
  console.log('ì¤‘ìš”í•œ ê²°ê³¼ë“¤:', result.results);
}, [dispatchWithResult]);
```

## í•¸ë“¤ëŸ¬ ì¡°í•© íŒ¨í„´

### 1. íŒŒì´í”„ë¼ì¸ íŒ¨í„´

```typescript
// ë‹¨ê³„ë³„ ì²˜ë¦¬ í•¸ë“¤ëŸ¬
const validationHandler = useCallback(async (payload, controller) => {
  // ê²€ì¦ë§Œ ìˆ˜í–‰
  const errors = validatePayload(payload);
  if (errors.length > 0) {
    controller.abort('ê²€ì¦ ì‹¤íŒ¨', { errors });
    return { valid: false, errors };
  }
  return { valid: true };
}, []);

const transformHandler = useCallback(async (payload, controller) => {
  // ë°ì´í„° ë³€í™˜
  const transformed = transformData(payload);
  return { transformed };
}, []);

const persistHandler = useCallback(async (payload, controller) => {
  // ì˜ì†ì„± ì²˜ë¦¬
  await saveToStorage(payload);
  return { saved: true };
}, []);

// ë“±ë¡ ì‹œ ìš°ì„ ìˆœìœ„ë¡œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±
useEffect(() => {
  if (!register) return;
  
  const unregisterValidation = register('processData', validationHandler, {
    priority: 300, // ì²« ë²ˆì§¸
    blocking: true
  });
  
  const unregisterTransform = register('processData', transformHandler, {
    priority: 200, // ë‘ ë²ˆì§¸
    blocking: true
  });
  
  const unregisterPersist = register('processData', persistHandler, {
    priority: 100, // ì„¸ ë²ˆì§¸
    blocking: true
  });
  
  return () => {
    unregisterValidation();
    unregisterTransform();
    unregisterPersist();
  };
}, [register, validationHandler, transformHandler, persistHandler]);
```

### 2. í”ŒëŸ¬ê·¸ì¸ íŒ¨í„´

```typescript
// í”ŒëŸ¬ê·¸ì¸ ê¸°ë°˜ í•¸ë“¤ëŸ¬ ì‹œìŠ¤í…œ
function usePluginSystem() {
  const register = useUserActionRegister();
  
  const coreHandler = useCallback(async (payload, controller) => {
    // í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    const coreResult = await processCoreLogic(payload);
    return { ...coreResult, source: 'core' };
  }, []);
  
  const auditPlugin = useCallback(async (payload, controller) => {
    // ê°ì‚¬ ë¡œê·¸
    await logAction('userAction', payload);
    return { audited: true, source: 'audit' };
  }, []);
  
  const metricsPlugin = useCallback(async (payload, controller) => {
    // ë©”íŠ¸ë¦­ ìˆ˜ì§‘
    metrics.increment('user.actions.count');
    return { metricsRecorded: true, source: 'metrics' };
  }, []);
  
  useEffect(() => {
    if (!register) return;
    
    const unregisterCore = register('userAction', coreHandler, {
      priority: 100,
      blocking: true,
      id: 'core-handler'
    });
    
    const unregisterAudit = register('userAction', auditPlugin, {
      priority: 50,
      blocking: false,
      id: 'audit-plugin'
    });
    
    const unregisterMetrics = register('userAction', metricsPlugin, {
      priority: 50,
      blocking: false,
      id: 'metrics-plugin'
    });
    
    return () => {
      unregisterCore();
      unregisterAudit();
      unregisterMetrics();
    };
  }, [register, coreHandler, auditPlugin, metricsPlugin]);
}
```

## í…ŒìŠ¤íŒ… íŒ¨í„´

### 1. í•¸ë“¤ëŸ¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```typescript
// __tests__/handlers/userHandlers.test.ts
import { renderHook } from '@testing-library/react-hooks';
import { createMockController, createMockRegistry } from '@/test-utils';

describe('User Handlers', () => {
  let mockRegistry;
  let mockController;
  
  beforeEach(() => {
    mockRegistry = createMockRegistry();
    mockController = createMockController();
  });
  
  it('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì„±ê³µ', async () => {
    // Arrange
    const initialProfile = { id: '1', name: 'Old Name', email: 'old@example.com' };
    mockRegistry.getStore('profile').getValue.mockReturnValue(initialProfile);
    
    // Act
    const result = await updateProfileHandler(
      { data: { name: 'New Name' } },
      mockController
    );
    
    // Assert
    expect(result.success).toBe(true);
    expect(result.profile.name).toBe('New Name');
    expect(mockRegistry.getStore('profile').setValue).toHaveBeenCalledWith({
      ...initialProfile,
      name: 'New Name',
      lastModified: expect.any(Number)
    });
  });
  
  it('ì˜ëª»ëœ ì´ë©”ì¼ë¡œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', async () => {
    // Arrange
    const invalidPayload = { data: { email: 'invalid-email' } };
    
    // Act
    const result = await updateProfileHandler(invalidPayload, mockController);
    
    // Assert
    expect(result.success).toBe(false);
    expect(result.error).toBe('INVALID_EMAIL');
    expect(mockController.abort).toHaveBeenCalledWith('ì˜ëª»ëœ ì´ë©”ì¼ í˜•ì‹');
  });
});
```

### 2. í†µí•© í…ŒìŠ¤íŠ¸

```typescript
// __tests__/integration/userFlow.test.tsx
import { render, fireEvent, waitFor } from '@testing-library/react';
import { UserProvider } from '@/providers/UserProvider';
import { UserProfile } from '@/components/UserProfile';

describe('User Flow Integration', () => {
  it('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì „ì²´ íë¦„', async () => {
    // Arrange
    const { getByTestId } = render(
      <UserProvider>
        <UserProfile />
      </UserProvider>
    );
    
    // Act
    fireEvent.change(getByTestId('name-input'), {
      target: { value: 'ìƒˆ ì´ë¦„' }
    });
    fireEvent.click(getByTestId('save-button'));
    
    // Assert
    await waitFor(() => {
      expect(getByTestId('name-display')).toHaveTextContent('ìƒˆ ì´ë¦„');
    });
  });
});
```

## ëª¨ë²” ì‚¬ë¡€

### 1. í•¸ë“¤ëŸ¬ ì„¤ê³„ ì›ì¹™

```typescript
// âœ… ì¢‹ìŒ: ë‹¨ì¼ ì±…ì„ ì›ì¹™
const updateProfileHandler = useCallback(async (payload, controller) => {
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ë§Œ ë‹´ë‹¹
  const profileStore = registry.getStore('profile');
  // ...
}, [registry]);

const notifyUsersHandler = useCallback(async (payload, controller) => {
  // ì•Œë¦¼ ì „ì†¡ë§Œ ë‹´ë‹¹
  await sendNotification(payload.userId, 'profile-updated');
}, []);

// âŒ í”¼í•˜ê¸°: ì—¬ëŸ¬ ì±…ì„
const monolithicHandler = useCallback(async (payload, controller) => {
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ + ì•Œë¦¼ + ë¡œê¹… + ë©”íŠ¸ë¦­ ë“±ë“±...
  // í•˜ë‚˜ì˜ í•¸ë“¤ëŸ¬ì— ë„ˆë¬´ ë§ì€ ì±…ì„
}, []);
```

### 2. ì˜¤ë¥˜ ì²˜ë¦¬ ì¼ê´€ì„±

```typescript
// í‘œì¤€ ì˜¤ë¥˜ ì‘ë‹µ í˜•ì‹ ì •ì˜
interface StandardError {
  success: false;
  error: string;
  code?: string;
  details?: any;
  retryable?: boolean;
}

interface StandardSuccess<T = any> {
  success: true;
  data?: T;
  timestamp?: number;
}

type HandlerResult<T = any> = StandardSuccess<T> | StandardError;
```

### 3. í•¸ë“¤ëŸ¬ ë¬¸ì„œí™”

```typescript
/**
 * ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬
 * 
 * @description ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ë¥¼ ê²€ì¦í•˜ê³  ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
 * @priority 100 (ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
 * @blocking true (ì™„ë£Œ í›„ ë‹¤ìŒ í•¸ë“¤ëŸ¬ ì‹¤í–‰)
 * 
 * @param payload.data - ì—…ë°ì´íŠ¸í•  í”„ë¡œí•„ í•„ë“œë“¤
 * @returns {HandlerResult} ì„±ê³µ ì‹œ ì—…ë°ì´íŠ¸ëœ í”„ë¡œí•„, ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ì •ë³´
 * 
 * @throws 'INVALID_EMAIL' - ì´ë©”ì¼ í˜•ì‹ì´ ì˜ëª»ëœ ê²½ìš°
 * @throws 'UPDATE_FAILED' - ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹¤íŒ¨
 * 
 * @example
 * ```typescript
 * dispatch('updateProfile', { data: { name: 'ìƒˆ ì´ë¦„' } });
 * ```
 */
const updateProfileHandler = useCallback(async (payload, controller) => {
  // êµ¬í˜„...
}, [registry]);
```

---

## ìš”ì•½

ì•¡ì…˜ í•¸ë“¤ëŸ¬ëŠ” Context-Action í”„ë ˆì„ì›Œí¬ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µì…ë‹ˆë‹¤:

- **í‘œì¤€í™”ëœ ì‹œê·¸ë‹ˆì²˜**ë¡œ ì¼ê´€ëœ íŒ¨í„´ êµ¬í˜„
- **ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì‹¤í–‰**ìœ¼ë¡œ ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° ì§€ì›
- **ê°•ë ¥í•œ ì˜¤ë¥˜ ì²˜ë¦¬**ë¡œ ì•ˆì •ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•
- **ê²°ê³¼ ìˆ˜ì§‘**ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ê°„ í†µì‹  ì§€ì›
- **í…ŒìŠ¤íŠ¸ ì¹œí™”ì **ìœ¼ë¡œ í’ˆì§ˆ ë³´ì¥

ì˜¬ë°”ë¥¸ í•¸ë“¤ëŸ¬ íŒ¨í„´ì„ ë”°ë¥´ë©´ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [React í†µí•©](./react-integration) - React ì»´í¬ë„ŒíŠ¸ì™€ì˜ í†µí•© íŒ¨í„´
- [í”„ë¡œë°”ì´ë” êµ¬ì„±](./provider-composition) - í•¸ë“¤ëŸ¬ ì„¤ì •ê³¼ ë„ë©”ì¸ ê²½ê³„
- [ì„±ëŠ¥ ìµœì í™”](./performance) - í•¸ë“¤ëŸ¬ ì„±ëŠ¥ ìµœì í™” ê¸°ë²•
:::

---


# Guide Best Practices

**Source**: `guide/best-practices.md`  
**Priority**: 80 (essential)  

# ê°œë°œ ëª¨ë²” ì‚¬ë¡€

Context-Action í”„ë ˆì„ì›Œí¬ë¡œ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í•„ìˆ˜ ëª¨ë²” ì‚¬ë¡€ì…ë‹ˆë‹¤. ì½”ë“œ í’ˆì§ˆ, ì„±ëŠ¥, íŒ€ ìƒì‚°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì´ëŸ¬í•œ ê°€ì´ë“œë¼ì¸ì„ ë”°ë¥´ì„¸ìš”.

## í•¸ë“¤ëŸ¬ ë“±ë¡ ëª¨ë²” ì‚¬ë¡€

### 1. í•­ìƒ `useActionRegister` + `useEffect` íŒ¨í„´ ì‚¬ìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ì •ë¦¬ì™€ í•¨ê»˜ ì ì ˆí•œ ë“±ë¡
function useUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserRegistry();
  
  const handler = useCallback(async (payload, controller) => {
    // í•¸ë“¤ëŸ¬ ë¡œì§
  }, [registry]);
  
  useEffect(() => {
    if (!register) return;
    const unregister = register('action', handler, {
      priority: 100,
      blocking: true
    });
    return unregister; // ì¤‘ìš”: ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
  }, [register, handler]);
}

// âŒ ì˜ëª»ë¨: ì •ë¦¬ ì—†ìŒ
function useUserHandlers() {
  const register = useUserActionRegister();
  
  useEffect(() => {
    register('action', handler); // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!
  }, []);
}
```

### 2. ìˆœì°¨ ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ì—ëŠ” `blocking: true` ì‚¬ìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ìˆœì°¨ ì‹¤í–‰
register('asyncAction', asyncHandler, { 
  priority: 100, 
  blocking: true // ì™„ë£Œ ëŒ€ê¸°
});

// âŒ ì˜ëª»ë¨: í•¸ë“¤ëŸ¬ë“¤ì´ ë™ì‹œì— ì‹¤í–‰ë¨
register('asyncAction', asyncHandler, { 
  priority: 100 
  // blocking: true ëˆ„ë½
});
```

### 3. ë””ë²„ê¹…ê³¼ ì¤‘ìš” í•¸ë“¤ëŸ¬ì— ëª…ì‹œì  ID ê³ ë ¤

```typescript
// âœ… ì¢‹ìŒ: ë””ë²„ê¹…ì„ ìœ„í•œ ëª…ì‹œì  ID
register('updateProfile', handler, {
  priority: 100,
  blocking: true,
  id: 'profile-updater-main' // ë””ë²„ê¹…ì— ë„ì›€
});

// âœ… ì—­ì‹œ ì¢‹ìŒ: ê°„ë‹¨í•œ ê²½ìš° ìë™ ìƒì„± ID
register('updateProfile', handler, {
  priority: 100,
  blocking: true
  // í”„ë ˆì„ì›Œí¬ê°€ ìë™ìœ¼ë¡œ ID ìƒì„±
});
```

### 4. ì¬ë“±ë¡ ë°©ì§€ë¥¼ ìœ„í•´ `useCallback`ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ë˜í•‘

```typescript
// âœ… ì˜¬ë°”ë¦„: ì•ˆì •ëœ í•¸ë“¤ëŸ¬ ì°¸ì¡°
const handler = useCallback(async (payload, controller) => {
  // í•¸ë“¤ëŸ¬ ë¡œì§
}, [registry]); // ì•ˆì •ëœ ì˜ì¡´ì„±ë§Œ

// âŒ ì˜ëª»ë¨: ë§¤ ë Œë”ë§ë§ˆë‹¤ í•¸ë“¤ëŸ¬ ì¬ìƒì„±
const handler = async (payload, controller) => {
  // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ í•¨ìˆ˜ ìƒì„±
};
```

## ìŠ¤í† ì–´ ì ‘ê·¼ ëª¨ë²” ì‚¬ë¡€

### 5. ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë„ë©”ì¸ë³„ í›… ì‚¬ìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ë„ë©”ì¸ë³„ í›…
function UserProfile() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore);
  const dispatch = useUserAction();
  
  return <div>{profile.name}</div>;
}

// âŒ ì˜ëª»ë¨: ì œë„¤ë¦­ í›… (íƒ€ì… ì•ˆì „ì„± ì—†ìŒ)
function UserProfile() {
  const store = useStore('user-profile'); // íƒ€ì… ì •ë³´ ì—†ìŒ
  const dispatch = useDispatch(); // ì•¡ì…˜ ì•ˆì „ì„± ì—†ìŒ
}
```

### 6. í•¸ë“¤ëŸ¬ì—ì„œëŠ” ì§€ì—° í‰ê°€ë¥¼ ìœ„í•´ `registry.getStore()` ì‚¬ìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ì§€ì—° í‰ê°€ (ìµœì‹  ê°’)
const handler = useCallback(async (payload, controller) => {
  const profileStore = registry.getStore('profile');
  const currentProfile = profileStore.getValue(); // í˜„ì¬ ê°’
  
  // ìµœì‹  ë°ì´í„°ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
}, [registry]);

// âŒ ì˜ëª»ë¨: ì˜¤ë˜ëœ í´ë¡œì €
const profile = profileStore.getValue();
const handler = useCallback(async (payload, controller) => {
  console.log(profile); // ë“±ë¡ ì‹œì ì˜ ì˜¤ë˜ëœ ê°’
}, [profile]);
```

### 7. nullì´ ì•„ë‹Œ ì ì ˆí•œ ì´ˆê¸°ê°’ ì œê³µ

```typescript
// âœ… ì˜¬ë°”ë¦„: ì ì ˆí•œ ì´ˆê¸°ê°’
export const userStores = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: ''
    }
  }
});

// âŒ ì˜ëª»ë¨: null ê°’ì€ íƒ€ì… ë¬¸ì œ ì•¼ê¸°
export const userStores = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: null // TypeScript ì˜¤ë¥˜, ëŸ°íƒ€ì„ ë¬¸ì œ
  }
});
```

### 8. ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸ë¥¼ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì¶”ì  ê°€ëŠ¥í•˜ê²Œ ìœ ì§€

```typescript
// âœ… ì˜¬ë°”ë¦„: ëª…í™•í•˜ê³  ì¶”ì  ê°€ëŠ¥í•œ ì—…ë°ì´íŠ¸
const updateProfile = useCallback(async (updates: Partial<UserProfile>) => {
  const profileStore = registry.getStore('profile');
  const currentProfile = profileStore.getValue();
  
  const newProfile = {
    ...currentProfile,
    ...updates,
    updatedAt: Date.now() // ë©”íƒ€ë°ì´í„° ì¶”ê°€
  };
  
  profileStore.setValue(newProfile);
  
  // ë””ë²„ê¹…ìš© ë¡œê·¸
  console.log('í”„ë¡œí•„ ì—…ë°ì´íŠ¸:', { from: currentProfile, to: newProfile });
}, [registry]);

// âŒ ì˜ëª»ë¨: ë¶ˆëª…í™•í•œ ë³€ê²½
const updateProfile = useCallback((updates) => {
  // ì§ì ‘ ë³€ê²½ (ë””ë²„ê¹… ì–´ë ¤ì›€)
  Object.assign(currentProfile, updates);
}, []);
```

## íƒ€ì… ì•ˆì „ì„± (ê¶Œì¥)

### 9. ë” ë‚˜ì€ íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì •ì˜

```typescript
// âœ… ì¢‹ìŒ: ëª…í™•í•œ ì¸í„°í˜ì´ìŠ¤
export interface UserData {
  profile: {
    id: string;
    name: string;
    email: string;
    role: 'admin' | 'user' | 'guest';
  };
  preferences: {
    theme: 'light' | 'dark';
    language: string;
  };
}

export interface UserActions {
  updateProfile: { data: Partial<UserData['profile']> };
  deleteUser: { userId: string };
  resetUser: void; // í˜ì´ë¡œë“œ ì—†ëŠ” ì•¡ì…˜ì— ëª…ì‹œì  void
}

// âŒ í”¼í•˜ê¸°: any íƒ€ì… (ì•ˆì „ì„± ìƒì‹¤)
export interface UserActions {
  updateProfile: any;
  deleteUser: any;
}
```

### 10. íƒ€ì… ì¶”ë¡ ì„ ìœ„í•´ ë„ë©”ì¸ë³„ í›… ì‚¬ìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ìë™ íƒ€ì… ì¶”ë¡ 
function UserComponent() {
  const profileStore = useUserStore('profile'); // Store<UserProfile>
  const profile = useStoreValue(profileStore);  // UserProfile
  const dispatch = useUserAction();             // íƒ€ì…ëœ ë””ìŠ¤íŒ¨ì²˜
  
  dispatch('updateProfile', { 
    data: { name: 'ìƒˆ ì´ë¦„' } // âœ“ íƒ€ì… ì²´í¬ë¨
  });
}
```

### 11. `any` íƒ€ì… í”¼í•˜ê¸° - TypeScript í™œìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ì ì ˆí•œ íƒ€ì´í•‘
const handler = useCallback(async (
  payload: UserActions['updateProfile'],
  controller: ActionController
) => {
  // ì™„ì „íˆ íƒ€ì…ëœ í•¸ë“¤ëŸ¬
}, []);

// âŒ ì˜ëª»ë¨: any íƒ€ì…ì´ ëª©ì ì„ ë¬´ì‚°
const handler = useCallback(async (payload: any, controller: any) => {
  // ëª¨ë“  íƒ€ì… ì•ˆì „ì„± ìƒì‹¤
}, []);
```

## ì„±ëŠ¥ ëª¨ë²” ì‚¬ë¡€

### 12. í•„ìš”í•œ ìŠ¤í† ì–´ë§Œ êµ¬ë…

```typescript
// âœ… ì˜¬ë°”ë¦„: ìµœì†Œí•œì˜ êµ¬ë…
function UserName() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore);
  
  // í”„ë¡œí•„ ë³€ê²½ì‹œë§Œ ë¦¬ë Œë”ë§
  return <span>{profile.name}</span>;
}

// âŒ ì˜ëª»ë¨: ê³¼ë„í•œ êµ¬ë…
function UserName() {
  const profileStore = useUserStore('profile');
  const preferencesStore = useUserStore('preferences'); // ë¶ˆí•„ìš”
  const sessionStore = useUserStore('session'); // ë¶ˆí•„ìš”
  
  const profile = useStoreValue(profileStore);
  const preferences = useStoreValue(preferencesStore); // ì¶”ê°€ ë¦¬ë Œë”ë§ ìœ ë°œ
  const session = useStoreValue(sessionStore); // ì¶”ê°€ ë¦¬ë Œë”ë§ ìœ ë°œ
  
  return <span>{profile.name}</span>; // í”„ë¡œí•„ë§Œ í•„ìš”
}
```

### 13. ì ì ˆí•œ í•¸ë“¤ëŸ¬ ìš°ì„ ìˆœìœ„ ì‚¬ìš©

```typescript
// âœ… ì˜¬ë°”ë¦„: ë…¼ë¦¬ì  ìš°ì„ ìˆœìœ„ ìˆœì„œ
register('updateProfile', validationHandler, { 
  priority: 200, // ê²€ì¦ ë¨¼ì €
  blocking: true 
});

register('updateProfile', updateHandler, { 
  priority: 100, // ë©”ì¸ ë¡œì§ ë‹¤ìŒ
  blocking: true 
});

register('updateProfile', loggingHandler, { 
  priority: 50,  // ë¡œê¹… ë§ˆì§€ë§‰
  blocking: true 
});
```

### 14. ì–¸ë§ˆìš´íŠ¸ ì‹œ í•¸ë“¤ëŸ¬ ì •ë¦¬

```typescript
// âœ… ì˜¬ë°”ë¦„: ëª¨ë“  í•¸ë“¤ëŸ¬ ì •ë¦¬ë¨
useEffect(() => {
  if (!register) return;
  
  const unregisterA = register('actionA', handlerA);
  const unregisterB = register('actionB', handlerB);
  const unregisterC = register('actionC', handlerC);
  
  return () => {
    unregisterA();
    unregisterB();
    unregisterC();
  };
}, [register, handlerA, handlerB, handlerC]);
```

### 15. ê²°ê³¼ ìˆ˜ì§‘ì„ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©

```typescript
// âœ… ì¢‹ìŒ: ê²°ê³¼ê°€ í•„ìš”í•  ë•Œë§Œ
const dispatchWithResult = useUserActionWithResult();

const criticalAction = async () => {
  const result = await dispatchWithResult('importantAction', payload, {
    result: { collect: true, strategy: 'all' }
  });
  
  // ê²°ê³¼ ì²˜ë¦¬
  return result.results;
};

// âœ… ì—­ì‹œ ì¢‹ìŒ: ê²°ê³¼ê°€ ë¶ˆí•„ìš”í•  ë•ŒëŠ” ì¼ë°˜ ë””ìŠ¤íŒ¨ì¹˜
const dispatch = useUserAction();

const simpleAction = () => {
  dispatch('simpleAction', payload); // ê²°ê³¼ ìˆ˜ì§‘ ì˜¤ë²„í—¤ë“œ ì—†ìŒ
};
```

## ì•„í‚¤í…ì²˜ ëª¨ë²” ì‚¬ë¡€

### 16. í•˜ë‚˜ì˜ ë„ë©”ì¸ = í•˜ë‚˜ì˜ ì»¨í…ìŠ¤íŠ¸ ê²½ê³„

```typescript
// âœ… ì˜¬ë°”ë¦„: ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„
function App() {
  return (
    <UserProvider>        {/* ì‚¬ìš©ì ë„ë©”ì¸ */}
      <CartProvider>      {/* ì¥ë°”êµ¬ë‹ˆ ë„ë©”ì¸ */}
        <OrderProvider>   {/* ì£¼ë¬¸ ë„ë©”ì¸ */}
          <AppContent />
        </OrderProvider>
      </CartProvider>
    </UserProvider>
  );
}
```

### 17. ë¹„ì¦ˆë‹ˆìŠ¤ì™€ UI ê´€ì‹¬ì‚¬ ë¶„ë¦¬

```typescript
// âœ… ì˜¬ë°”ë¦„: ê´€ì‹¬ì‚¬ ë¶„ë¦¬
// ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°
interface UserBusinessData {
  profile: UserProfile;
  session: UserSession;
}

// UI ìƒíƒœ  
interface UserUIState {
  isEditing: boolean;
  selectedTab: string;
  loadingState: LoadingState;
}

// ë¶„ë¦¬ëœ í”„ë¡œë°”ì´ë”
<UserBusinessProvider>
  <UserUIProvider>
    <UserComponents />
  </UserUIProvider>
</UserBusinessProvider>
```

### 18. ë„ë©”ì¸ ê²©ë¦¬ ì„ í˜¸ - í•„ìš”ì‹œì—ë§Œ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì‚¬ìš©

```typescript
// âœ… ì¢‹ìŒ: ë„ë©”ì¸ ê²©ë¦¬ (ì„ í˜¸)
function UserProfile() {
  const profileStore = useUserStore('profile');
  const userAction = useUserAction();
  // ìì²´ í¬í•¨ëœ ì‚¬ìš©ì ë¡œì§
}

// âœ… ì—­ì‹œ ì¢‹ìŒ: ì§„ì§œ í•„ìš”í•  ë•Œë§Œ í¬ë¡œìŠ¤ ë„ë©”ì¸
function useCheckoutProcess() {
  const userProfile = useUserStore('profile');
  const cartItems = useCartStore('items');
  const userAction = useUserAction();
  const cartAction = useCartAction();
  
  // ì§„ì§œë¡œ ë„ë©”ì¸ì„ íš¡ë‹¨í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
}

// âŒ í”¼í•˜ê¸°: ë¶ˆí•„ìš”í•œ ê²°í•©
function UserProfile() {
  const cartItems = useCartStore('items'); // ì™œ ì‚¬ìš©ì í”„ë¡œí•„ì´ ì¥ë°”êµ¬ë‹ˆê°€ í•„ìš”í•œê°€?
}
```

### 19. ë„ë©”ì¸ ê²½ê³„ë¥¼ ëª…í™•í•˜ê²Œ ë¬¸ì„œí™”

```typescript
// âœ… ì¢‹ìŒ: ëª…í™•í•œ ë¬¸ì„œí™”
/**
 * ì‚¬ìš©ì ë„ë©”ì¸
 * 
 * ì±…ì„ì‚¬í•­:
 * - ì‚¬ìš©ì ì¸ì¦ ë° í”„ë¡œí•„ ê´€ë¦¬
 * - ì‚¬ìš©ì í™˜ê²½ì„¤ì • ë° ì„¤ì •
 * - ì‚¬ìš©ì ì„¸ì…˜ ê´€ë¦¬
 * 
 * ì˜ì¡´ì„±:
 * - ì—†ìŒ (ìì²´ í¬í•¨)
 * 
 * ë‹¤ë¥¸ ë„ë©”ì¸ì— ì œê³µ:
 * - ë°ì´í„° ì—°ê²°ì„ ìœ„í•œ ì‚¬ìš©ì ID
 * - ì¸ì¦ ìƒíƒœ
 */
export interface UserData {
  // ë„ë©”ì¸ ë°ì´í„° ì •ì˜
}
```

## ì½”ë“œ êµ¬ì„± ëª¨ë²” ì‚¬ë¡€

### 23. ì¼ê´€ëœ íŒŒì¼ êµ¬ì¡°

```mermaid
graph TD
    A[src/] --> B[stores/]
    A --> C[hooks/]
    A --> D[components/]
    A --> E[providers/]
    
    B --> B1[user/]
    B --> B2[cart/]
    B --> B3[index.ts]
    
    B1 --> B1a[userBusiness.store.ts]
    B1 --> B1b[userUI.store.ts]
    B1 --> B1c[index.ts]
    
    B2 --> B2a[cart.store.ts]
    B2 --> B2b[index.ts]
    
    C --> C1[handlers/]
    C --> C2[logic/]
    C --> C3[integration/]
    
    C1 --> C1a[useUserHandlers.ts]
    C1 --> C1b[useCartHandlers.ts]
    C1 --> C1c[index.ts]
    
    C2 --> C2a[useUserLogic.ts]
    C2 --> C2b[useCartLogic.ts]
    C2 --> C2c[index.ts]
    
    C3 --> C3a[useUserCartIntegration.ts]
    C3 --> C3b[index.ts]
    
    D --> D1[user/]
    D --> D2[cart/]
    D --> D3[shared/]
    
    E --> E1[UserProvider.tsx]
    E --> E2[CartProvider.tsx]
    E --> E3[AppProvider.tsx]
    
    style A fill:#e3f2fd
    style B fill:#fff8e1
    style C fill:#e8f5e8
    style D fill:#fce4ec
    style E fill:#f3e5f5
```

### 24. ë°°ëŸ´ ë‚´ë³´ë‚´ê¸° ì‚¬ìš©

```typescript
// stores/user/index.ts
export * from './userBusiness.store';
export * from './userUI.store';

// stores/index.ts  
export * from './user';
export * from './cart';
export * from './order';

// ì‚¬ìš©ë²•
import { useUserStore, useCartStore } from '@/stores';
```

### 25. ì¼ê´€ëœ ëª…ëª… ê·œì¹™ êµ¬í˜„

```typescript
// âœ… ì¼ê´€ëœ ëª…ëª…
// ìŠ¤í† ì–´
export const useUserBusinessStore = ...;
export const useUserUIStore = ...;

// ì•¡ì…˜
export const useUserBusinessAction = ...;
export const useUserUIAction = ...;

// í•¸ë“¤ëŸ¬
export const useUserBusinessHandlers = ...;
export const useUserUIHandlers = ...;

// ë¡œì§ í›…
export const useUserProfile = ...;
export const useUserSettings = ...;
```

---

## ìš”ì•½ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•¸ë“¤ëŸ¬ ë“±ë¡ âœ“
- [ ] í•­ìƒ `useActionRegister` + `useEffect` íŒ¨í„´ ì‚¬ìš©
- [ ] ì •ë¦¬ë¥¼ ìœ„í•´ unregister í•¨ìˆ˜ ë°˜í™˜
- [ ] ìˆœì°¨ ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ì— `blocking: true` ì‚¬ìš©
- [ ] ë””ë²„ê¹…ê³¼ ì¤‘ìš” í•¸ë“¤ëŸ¬ì— ëª…ì‹œì  ID ê³ ë ¤
- [ ] ì¬ë“±ë¡ ë°©ì§€ë¥¼ ìœ„í•´ `useCallback`ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ë˜í•‘

### ìŠ¤í† ì–´ ì ‘ê·¼ âœ“
- [ ] ì»´í¬ë„ŒíŠ¸ì—ì„œ ë„ë©”ì¸ë³„ í›… ì‚¬ìš©
- [ ] í•¸ë“¤ëŸ¬ì—ì„œ ì§€ì—° í‰ê°€ë¥¼ ìœ„í•´ `registry.getStore()` ì‚¬ìš©
- [ ] nullì´ ì•„ë‹Œ ì ì ˆí•œ ì´ˆê¸°ê°’ ì œê³µ
- [ ] ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸ë¥¼ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì¶”ì  ê°€ëŠ¥í•˜ê²Œ ìœ ì§€

### íƒ€ì… ì•ˆì „ì„± âœ“
- [ ] ë” ë‚˜ì€ íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [ ] íƒ€ì… ì¶”ë¡ ì„ ìœ„í•´ ë„ë©”ì¸ë³„ í›… ì‚¬ìš©
- [ ] `any` íƒ€ì… í”¼í•˜ê¸° - TypeScript í™œìš©

### ì„±ëŠ¥ âœ“
- [ ] í•„ìš”í•œ ìŠ¤í† ì–´ë§Œ êµ¬ë…
- [ ] ì ì ˆí•œ í•¸ë“¤ëŸ¬ ìš°ì„ ìˆœìœ„ ì‚¬ìš©
- [ ] ì–¸ë§ˆìš´íŠ¸ ì‹œ í•¸ë“¤ëŸ¬ ì •ë¦¬
- [ ] ê²°ê³¼ ìˆ˜ì§‘ì„ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©

### ì•„í‚¤í…ì²˜ âœ“
- [ ] í•˜ë‚˜ì˜ ë„ë©”ì¸ = í•˜ë‚˜ì˜ ì»¨í…ìŠ¤íŠ¸ ê²½ê³„
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ì™€ UI ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- [ ] ë„ë©”ì¸ ê²©ë¦¬ ì„ í˜¸ - í•„ìš”ì‹œì—ë§Œ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì‚¬ìš©
- [ ] ë„ë©”ì¸ ê²½ê³„ë¥¼ ëª…í™•í•˜ê²Œ ë¬¸ì„œí™”

ì´ëŸ¬í•œ ëª¨ë²” ì‚¬ë¡€ë¥¼ ë”°ë¥´ë©´ Context-Action í”„ë ˆì„ì›Œí¬ë¡œ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•˜ë©° ì„±ëŠ¥ì´ ë›°ì–´ë‚œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ì§€ì†ì ì¸ ê°œì„ 
ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ì— ëŒ€í•´ ì •ê¸°ì ìœ¼ë¡œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê²€í† í•˜ì„¸ìš”. ê°œë°œ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì´ëŸ¬í•œ íŒ¨í„´ì„ ê°•ì œí•˜ê¸° ìœ„í•´ ESLint ê·œì¹™ê³¼ ìë™í™”ëœ ê²€ì‚¬ ì„¤ì •ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.
:::

---


# Guide Common Pitfalls

**Source**: `guide/common-pitfalls.md`  
**Priority**: 80 (essential)  

# ê³µí†µ í•¨ì •

Context-Action êµ¬í˜„ì—ì„œ ìì£¼ ë°œìƒí•˜ëŠ” ì‹¤ìˆ˜ë“¤ì„ í•™ìŠµí•˜ê³  ì´ë¥¼ í”¼í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì„¸ìš”. ì´ ê°€ì´ë“œëŠ” ê°œë°œìë“¤ì´ ê°€ì¥ ìì£¼ ê²ªëŠ” ë¬¸ì œë“¤ê³¼ í•´ê²° ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## í•¸ë“¤ëŸ¬ ë“±ë¡ ë¬¸ì œ

### âŒ ì •ë¦¬ ëˆ„ë½

**ë¬¸ì œ:** ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ í•¸ë“¤ëŸ¬ê°€ ì •ë¦¬ë˜ì§€ ì•Šì•„ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ.

```typescript
// âŒ ì˜ëª»ë¨ - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜
function useUserHandlers() {
  const register = useUserActionRegister();
  
  useEffect(() => {
    register('updateProfile', handler);
  }, []); // ì •ë¦¬ ì—†ìŒ - í•¸ë“¤ëŸ¬ê°€ ë©”ëª¨ë¦¬ì— ëˆ„ì ë¨
}
```

**í•´ê²°ì±…:** í•­ìƒ unregister í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ì ì ˆí•œ ì •ë¦¬
function useUserHandlers() {
  const register = useUserActionRegister();
  
  const handler = useCallback(async (payload, controller) => {
    // í•¸ë“¤ëŸ¬ ë¡œì§
  }, []);
  
  useEffect(() => {
    if (!register) return;
    const unregister = register('updateProfile', handler);
    return unregister; // ì¤‘ìš”: ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬
  }, [register, handler]);
}
```

**ì¦ìƒ:**
- ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€
- í•¸ë“¤ëŸ¬ê°€ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰ë¨
- ìŠ¤í…Œì¼ í´ë¡œì € ì˜¤ë¥˜

### âŒ ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ì—ì„œ `blocking` ëˆ„ë½

**ë¬¸ì œ:** ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ë“¤ì´ ìˆœì°¨ê°€ ì•„ë‹Œ ë™ì‹œì— ì‹¤í–‰ë¨.

```typescript
// âŒ ì˜ëª»ë¨ - í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë¨
register('processOrder', asyncHandler1, { priority: 100 });
register('processOrder', asyncHandler2, { priority: 90 });
register('processOrder', asyncHandler3, { priority: 80 });
// ëª¨ë‘ ë™ì‹œì— ì‹¤í–‰ë¨!
```

**í•´ê²°ì±…:** ìˆœì°¨ ì‹¤í–‰ì´ í•„ìš”í•œ ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ì—ëŠ” `blocking: true`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ìˆœì°¨ ì‹¤í–‰
register('processOrder', asyncHandler1, { 
  priority: 100, 
  blocking: true // ì™„ë£Œê¹Œì§€ ëŒ€ê¸°
});
register('processOrder', asyncHandler2, { 
  priority: 90, 
  blocking: true // handler1 ì™„ë£Œ í›„ ì‹¤í–‰
});
```

**ì¦ìƒ:**
- í•¸ë“¤ëŸ¬ ê°„ ê²½í•© ì¡°ê±´
- ì¼ê´€ì„± ì—†ëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸
- í•¸ë“¤ëŸ¬ê°€ ì„œë¡œì˜ ë³€ê²½ì‚¬í•­ì„ ë®ì–´ì”€

### âŒ ìŠ¤í…Œì¼ í´ë¡œì € ì‚¬ìš©

**ë¬¸ì œ:** í•¸ë“¤ëŸ¬ê°€ ë“±ë¡ ì‹œì ì˜ ì˜¤ë˜ëœ ê°’ì„ ìº¡ì²˜í•¨.

```typescript
// âŒ ì˜ëª»ë¨ - ìŠ¤í…Œì¼ í´ë¡œì €
function useUserHandlers() {
  const profileStore = useUserStore('profile');
  const profile = profileStore.getValue(); // ë“±ë¡ ì‹œì ì— ìº¡ì²˜ë¨
  
  const handler = useCallback(async (payload, controller) => {
    console.log(profile); // ì´ê±´ ìŠ¤í…Œì¼ ë°ì´í„°!
    // í•¸ë“¤ëŸ¬ê°€ ë“±ë¡ëœ ì‹œì ì˜ í”„ë¡œí•„ë§Œ ë³´ì—¬ì¤Œ
  }, [profile]); // ì˜ì¡´ì„±ì— ìŠ¤í…Œì¼ ê°’ í¬í•¨
}
```

**í•´ê²°ì±…:** registry.getStore()ë¥¼ ì‚¬ìš©í•œ ì§€ì—° í‰ê°€ ì‚¬ìš©.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ì§€ì—° í‰ê°€
function useUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserRegistry();
  
  const handler = useCallback(async (payload, controller) => {
    const profileStore = registry.getStore('profile');
    const profile = profileStore.getValue(); // ì‹¤í–‰ ì‹œì ì˜ ìµœì‹  ê°’
    console.log(profile); // í•­ìƒ í˜„ì¬ ë°ì´í„°
  }, [registry]); // ì˜ì¡´ì„±ì—ëŠ” registryë§Œ
}
```

**ì¦ìƒ:**
- í•¸ë“¤ëŸ¬ê°€ ì˜¤ë˜ëœ ë°ì´í„°ë¡œ ì‘ì—…
- ìŠ¤í…Œì¼ ê°’ì— ê¸°ë°˜í•œ ìƒíƒœ ì—…ë°ì´íŠ¸
- í˜„ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ë°˜ì˜í•˜ì§€ ì•ŠëŠ” ë¡œì§

## ìŠ¤í† ì–´ ì ‘ê·¼ ë¬¸ì œ

### âŒ ë°˜ì‘í˜• êµ¬ë… ë¯¸ì‚¬ìš©

**ë¬¸ì œ:** ìŠ¤í† ì–´ ë°ì´í„°ê°€ ë³€ê²½ë˜ì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ.

```typescript
// âŒ ì˜ëª»ë¨ - ë°˜ì‘í˜•ì´ ì•„ë‹˜
function UserProfile() {
  const profileStore = useUserStore('profile');
  const profile = profileStore.getValue(); // ì¼íšŒì„± ì ‘ê·¼, ë°˜ì‘í˜• ì•„ë‹˜
  
  // í”„ë¡œí•„ì´ ë³€ê²½ë˜ì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ
  return <div>{profile.name}</div>;
}
```

**í•´ê²°ì±…:** ë°˜ì‘í˜• êµ¬ë…ì„ ìœ„í•´ `useStoreValue()`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ë°˜ì‘í˜• êµ¬ë…
function UserProfile() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore); // ë°˜ì‘í˜• êµ¬ë…
  
  // í”„ë¡œí•„ì´ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ë¨
  return <div>{profile.name}</div>;
}
```

**ì¦ìƒ:**
- ìƒíƒœê°€ ë³€ê²½ë˜ì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ
- í˜„ì¬ ë°ì´í„°ë¥¼ ë°˜ì˜í•˜ì§€ ì•ŠëŠ” ìŠ¤í…Œì¼ UI
- ë³€ê²½ì‚¬í•­ì„ ë³´ê¸° ìœ„í•´ ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ í•„ìš”

### âŒ ì§ì ‘ ìŠ¤í† ì–´ ë³€ê²½

**ë¬¸ì œ:** setValue ëŒ€ì‹  ìŠ¤í† ì–´ ê°ì²´ë¥¼ ì§ì ‘ ë³€ê²½í•¨.

```typescript
// âŒ ì˜ëª»ë¨ - ì§ì ‘ ë³€ê²½
function updateUserName(newName: string) {
  const profileStore = useUserStore('profile');
  const profile = profileStore.getValue();
  
  profile.name = newName; // ì§ì ‘ ë³€ê²½ - êµ¬ë…ìë“¤ì—ê²Œ ì•Œë¦¼ ì•ˆë¨
  // ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ!
}
```

**í•´ê²°ì±…:** ì—…ë°ì´íŠ¸ì— í•­ìƒ setValueë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ë¶ˆë³€ ì—…ë°ì´íŠ¸
function updateUserName(newName: string) {
  const profileStore = useUserStore('profile');
  const profile = profileStore.getValue();
  
  profileStore.setValue({
    ...profile,
    name: newName // ìƒˆ ê°ì²´ - êµ¬ë…ìë“¤ì—ê²Œ ì•Œë¦¼ë¨
  });
}
```

**ì¦ìƒ:**
- UIì— ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ
- ì»´í¬ë„ŒíŠ¸ ê°„ ì¼ê´€ì„± ì—†ëŠ” ìƒíƒœ
- ìƒíƒœ ë³€ê²½ ì‹œì ì— ëŒ€í•œ ë””ë²„ê¹… í˜¼ë€

### âŒ Null/Undefined ì´ˆê¸°ê°’

**ë¬¸ì œ:** ì´ˆê¸°ê°’ìœ¼ë¡œ nullì´ë‚˜ undefined ì‚¬ìš© ì‹œ TypeScriptì™€ ëŸ°íƒ€ì„ ë¬¸ì œ ë°œìƒ.

```typescript
// âŒ ì˜ëª»ë¨ - Null ì´ˆê¸°ê°’
const userStores = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: null // TypeScript ì˜¤ë¥˜, ëŸ°íƒ€ì„ ë¬¸ì œ
  }
});

function UserProfile() {
  const profile = useStoreValue(useUserStore('profile'));
  return <div>{profile.name}</div>; // profileì´ nullì´ë©´ ëŸ°íƒ€ì„ ì˜¤ë¥˜
}
```

**í•´ê²°ì±…:** ì ì ˆí•œ ê¸°ë³¸ê°’ì„ ì œê³µí•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ì ì ˆí•œ ì´ˆê¸°ê°’
const userStores = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: ''
    }
  }
});

function UserProfile() {
  const profile = useStoreValue(useUserStore('profile'));
  return <div>{profile.name || 'ì´ë¦„ ì—†ìŒ'}</div>; // ì•ˆì „í•œ ì ‘ê·¼
}
```

**ì¦ìƒ:**
- TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜
- ëŸ°íƒ€ì„ null/undefined ì˜¤ë¥˜
- ëª¨ë“  ê³³ì—ì„œ ë°©ì–´ì  ì½”ë”© í•„ìš”

## íƒ€ì… ì•ˆì „ì„± ë¬¸ì œ

### âŒ ì œë„¤ë¦­ í›… ì‚¬ìš©

**ë¬¸ì œ:** ë„ë©”ì¸ë³„ í›… ëŒ€ì‹  ì œë„¤ë¦­ í›… ì‚¬ìš©ìœ¼ë¡œ íƒ€ì… ì•ˆì „ì„± ìƒì‹¤.

```typescript
// âŒ ì˜ëª»ë¨ - íƒ€ì… ì•ˆì „ì„± ì—†ìŒ
function UserProfile() {
  const store = useStore('user-profile'); // any íƒ€ì…
  const dispatch = useDispatch(); // any ì•¡ì…˜ íƒ€ì…
  
  dispatch('updateUser', { anyData: 'here' }); // ì»´íŒŒì¼ íƒ€ì„ ì²´í¬ ì—†ìŒ
}
```

**í•´ê²°ì±…:** ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•´ ë„ë©”ì¸ë³„ í›…ì„ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„±
function UserProfile() {
  const profileStore = useUserStore('profile'); // Store<UserProfile>
  const dispatch = useUserAction(); // íƒ€ì…ëœ ë””ìŠ¤íŒ¨ì²˜
  
  dispatch('updateProfile', { 
    data: { name: 'John' } // ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ì²´í¬
  });
}
```

### âŒ ì¸í„°í˜ì´ìŠ¤ì—ì„œ Any íƒ€ì…

**ë¬¸ì œ:** `any` íƒ€ì… ì‚¬ìš©ìœ¼ë¡œ TypeScriptì˜ ëª©ì  ë¬´ë ¥í™”.

```typescript
// âŒ ì˜ëª»ë¨ - íƒ€ì… ì•ˆì „ì„± ìƒì‹¤
interface UserActions {
  updateProfile: any;
  deleteUser: any;
}
```

**í•´ê²°ì±…:** ì ì ˆí•˜ê³  êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì •ì˜í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - êµ¬ì²´ì ì¸ íƒ€ì…
interface UserActions {
  updateProfile: { data: Partial<UserProfile> };
  deleteUser: { userId: string };
  resetProfile: void; // í˜ì´ë¡œë“œ ì—†ìŒì„ ëª…ì‹œì ìœ¼ë¡œ void
}
```

## Provider ì„¤ì • ë¬¸ì œ

### âŒ ì˜ëª»ëœ Provider ìˆœì„œ

**ë¬¸ì œ:** ì˜ëª»ëœ provider ì¤‘ì²©ìœ¼ë¡œ ì»¨í…ìŠ¤íŠ¸ ì˜¤ë¥˜ ë°œìƒ.

```typescript
// âŒ ì˜ëª»ë¨ - ì•¡ì…˜ providerê°€ ìŠ¤í† ì–´ provider ë°–ì— ìˆìŒ
function App() {
  return (
    <UserActionProvider>  {/* ì•¡ì…˜ì´ ìŠ¤í† ì–´ì˜ ì¡´ì¬ë¥¼ í•„ìš”ë¡œ í•¨ */}
      <UserProvider>      {/* ìŠ¤í† ì–´ê°€ ì—¬ê¸°ì„œ ìƒì„±ë¨ */}
        <UserProfile />
      </UserProvider>
    </UserActionProvider>
  );
}
// ì˜¤ë¥˜: ì•¡ì…˜ì´ ìŠ¤í† ì–´ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ
```

**í•´ê²°ì±…:** ìŠ¤í† ì–´ providerê°€ ì•¡ì…˜ providerë¥¼ ê°ì‹¸ì•¼ í•©ë‹ˆë‹¤.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ìŠ¤í† ì–´ providerê°€ ì•¡ì…˜ providerë¥¼ ê°ìŒˆ
function App() {
  return (
    <UserProvider>         {/* ìŠ¤í† ì–´ê°€ ë¨¼ì € ìƒì„±ë¨ */}
      <UserActionProvider> {/* ì•¡ì…˜ì´ ìŠ¤í† ì–´ì— ì ‘ê·¼ ê°€ëŠ¥ */}
        <UserProfile />
      </UserActionProvider>
    </UserProvider>
  );
}
```

### âŒ í•¸ë“¤ëŸ¬ ì„¤ì • ëˆ„ë½

**ë¬¸ì œ:** Provider íŠ¸ë¦¬ì—ì„œ í•¸ë“¤ëŸ¬ ì„¤ì •ì„ ê¹œë¹¡í•¨.

```typescript
// âŒ ì˜ëª»ë¨ - í•¸ë“¤ëŸ¬ê°€ ë“±ë¡ë˜ì§€ ì•ŠìŒ
function App() {
  return (
    <UserProvider>
      <UserActionProvider>
        <UserProfile /> {/* ì•¡ì…˜ì€ ë””ìŠ¤íŒ¨ì¹˜ë˜ì§€ë§Œ ì‘ë‹µí•˜ëŠ” í•¸ë“¤ëŸ¬ê°€ ì—†ìŒ */}
      </UserActionProvider>
    </UserProvider>
  );
}
```

**í•´ê²°ì±…:** í•¸ë“¤ëŸ¬ ì„¤ì • ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - í•¸ë“¤ëŸ¬ê°€ ì ì ˆíˆ ì„¤ì •ë¨
function HandlerSetup() {
  useUserHandlers(); // ëª¨ë“  í•¸ë“¤ëŸ¬ ë“±ë¡
  return null;
}

function App() {
  return (
    <UserProvider>
      <UserActionProvider>
        <HandlerSetup />    {/* í•¸ë“¤ëŸ¬ê°€ ë“±ë¡ë¨ */}
        <UserProfile />
      </UserActionProvider>
    </UserProvider>
  );
}
```

## ì„±ëŠ¥ ë¬¸ì œ

### âŒ ê³¼ë„í•œ êµ¬ë…

**ë¬¸ì œ:** í•„ìš” ì´ìƒìœ¼ë¡œ ë§ì€ ìŠ¤í† ì–´ë¥¼ êµ¬ë…í•˜ëŠ” ì»´í¬ë„ŒíŠ¸.

```typescript
// âŒ ì˜ëª»ë¨ - ë¶ˆí•„ìš”í•œ êµ¬ë…
function UserName() {
  const profile = useStoreValue(useUserStore('profile'));
  const preferences = useStoreValue(useUserStore('preferences')); // í•„ìš” ì—†ìŒ
  const session = useStoreValue(useUserStore('session')); // í•„ìš” ì—†ìŒ
  const history = useStoreValue(useUserStore('history')); // í•„ìš” ì—†ìŒ
  
  // ì´ ì¤‘ ì•„ë¬´ê±°ë‚˜ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ë¨
  return <span>{profile.name}</span>; // profileë§Œ í•„ìš”í•¨
}
```

**í•´ê²°ì±…:** ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ìŠ¤í† ì–´ë§Œ êµ¬ë…í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ìµœì†Œ êµ¬ë…
function UserName() {
  const profile = useStoreValue(useUserStore('profile'));
  
  // profileì´ ë³€ê²½ë  ë•Œë§Œ ì¬ë Œë”ë§ë¨
  return <span>{profile.name}</span>;
}
```

### âŒ í•¸ë“¤ëŸ¬ ì¬ìƒì„±

**ë¬¸ì œ:** ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ìƒì„±.

```typescript
// âŒ ì˜ëª»ë¨ - ë Œë”ë§ë§ˆë‹¤ í•¸ë“¤ëŸ¬ ì¬ìƒì„±
function useUserHandlers() {
  const register = useUserActionRegister();
  
  // ë Œë”ë§ë§ˆë‹¤ ìƒˆ í•¨ìˆ˜ ìƒì„±
  const handler = async (payload, controller) => {
    // í•¸ë“¤ëŸ¬ ë¡œì§
  };
  
  useEffect(() => {
    const unregister = register('action', handler);
    return unregister;
  }, [register, handler]); // handlerê°€ ë Œë”ë§ë§ˆë‹¤ ë°”ë€œ!
}
```

**í•´ê²°ì±…:** í•¸ë“¤ëŸ¬ ì°¸ì¡°ë¥¼ ì•ˆì •í™”í•˜ê¸° ìœ„í•´ `useCallback`ì„ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ì•ˆì •í•œ í•¸ë“¤ëŸ¬ ì°¸ì¡°
function useUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserRegistry();
  
  // ì•ˆì •í•œ í•¨ìˆ˜ ì°¸ì¡°
  const handler = useCallback(async (payload, controller) => {
    // í•¸ë“¤ëŸ¬ ë¡œì§
  }, [registry]); // registryê°€ ë³€ê²½ë  ë•Œë§Œ ë³€í•¨
  
  useEffect(() => {
    const unregister = register('action', handler);
    return unregister;
  }, [register, handler]); // í•„ìš”í•  ë•Œë§Œ effect ì‹¤í–‰
}
```

## í¬ë¡œìŠ¤ ë„ë©”ì¸ ë¬¸ì œ

### âŒ ë„ë©”ì¸ ê°„ ê°•í•œ ê²°í•©

**ë¬¸ì œ:** ë„ë©”ì¸ì´ ì„œë¡œì˜ ë‚´ë¶€ë¥¼ ì§ì ‘ ì ‘ê·¼í•¨.

```typescript
// âŒ ì˜ëª»ë¨ - ì§ì ‘ ë„ë©”ì¸ ê²°í•©
function useUserHandlers() {
  const cartStore = useCartStore('items'); // User ë„ë©”ì¸ì´ Cart ë‚´ë¶€ ì ‘ê·¼
  
  const loginHandler = useCallback(async (payload, controller) => {
    // ë¡œê·¸ì¸ ë¡œì§
    
    // ë‹¤ë¥¸ ë„ë©”ì¸ ì§ì ‘ ì¡°ì‘
    cartStore.setValue([]); // ê°•í•œ ê²°í•©!
  }, [cartStore]);
}
```

**í•´ê²°ì±…:** í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µì‹ ì—ëŠ” í†µí•© í›…ì´ë‚˜ ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - í†µí•©ì„ í†µí•œ ëŠìŠ¨í•œ ê²°í•©
function useUserCartIntegration() {
  const userAction = useUserAction();
  const cartAction = useCartAction();
  
  const loginWithCartReset = useCallback(async (loginData) => {
    await userAction('login', loginData);
    await cartAction('clearCart'); // ì ì ˆí•œ ë„ë©”ì¸ ê²½ê³„
  }, [userAction, cartAction]);
  
  return { loginWithCartReset };
}
```

### âŒ ìˆœí™˜ ì˜ì¡´ì„±

**ë¬¸ì œ:** ì„œë¡œë¥¼ ì˜ì¡´í•˜ëŠ” ë„ë©”ì¸ìœ¼ë¡œ ìˆœí™˜ import ë°œìƒ.

```typescript
// âŒ ì˜ëª»ë¨ - ìˆœí™˜ ì˜ì¡´ì„±
// user.store.ts
import { useCartAction } from './cart.store'; // Userê°€ Cart import

// cart.store.ts  
import { useUserAction } from './user.store'; // Cartê°€ User import
// ìˆœí™˜ ì˜ì¡´ì„±!
```

**í•´ê²°ì±…:** ë³„ë„ì˜ í†µí•© ëª¨ë“ˆì„ ìƒì„±í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - í†µí•© ëª¨ë“ˆ
// integration/userCartIntegration.ts
import { useUserAction } from '../stores/user.store';
import { useCartAction } from '../stores/cart.store';

export function useUserCartIntegration() {
  const userAction = useUserAction();
  const cartAction = useCartAction();
  
  // í†µí•© ë¡œì§
  return { /* í†µí•© ë©”ì†Œë“œ */ };
}
```

## ë””ë²„ê¹… ë¬¸ì œ

### âŒ ë¶ˆë¶„ëª…í•œ ì—ëŸ¬ ë©”ì‹œì§€

**ë¬¸ì œ:** í•¸ë“¤ëŸ¬ê°€ ì¡°ìš©íˆ ì‹¤íŒ¨í•˜ê±°ë‚˜ ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ ë°œìƒ.

```typescript
// âŒ ì˜ëª»ë¨ - ë¶ˆë¶„ëª…í•œ ì˜¤ë¥˜ ì²˜ë¦¬
const handler = useCallback(async (payload, controller) => {
  try {
    await riskyOperation();
  } catch (error) {
    controller.abort(); // ë¬´ì—‡ì´ ì‹¤íŒ¨í–ˆëŠ”ì§€ ì»¨í…ìŠ¤íŠ¸ ì—†ìŒ
  }
}, []);
```

**í•´ê²°ì±…:** ìƒì„¸í•œ ì˜¤ë¥˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ìƒì„¸í•œ ì˜¤ë¥˜ ì²˜ë¦¬
const handler = useCallback(async (payload, controller) => {
  try {
    await riskyOperation();
  } catch (error) {
    controller.abort(`í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`, {
      operation: 'updateProfile',
      payload,
      timestamp: Date.now(),
      error: error.stack
    });
  }
}, []);
```

### âŒ í•¸ë“¤ëŸ¬ ID ì—†ìŒ

**ë¬¸ì œ:** ì–´ë–¤ í•¸ë“¤ëŸ¬ê°€ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ëŠ”ì§€ ë””ë²„ê¹…í•˜ê¸° ì–´ë ¤ì›€.

```typescript
// âŒ ì˜ëª»ë¨ - í•¸ë“¤ëŸ¬ ì‹ë³„ ì—†ìŒ
register('updateProfile', handler, {
  priority: 100,
  blocking: true
  // ID ì—†ìŒ - ë””ë²„ê¹… ì–´ë ¤ì›€
});
```

**í•´ê²°ì±…:** ë””ë²„ê¹…ì„ ìœ„í•´ ì„¤ëª…ì ì¸ IDë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

```typescript
// âœ… ì˜¬ë°”ë¦„ - ëª…í™•í•œ í•¸ë“¤ëŸ¬ ì‹ë³„
register('updateProfile', handler, {
  priority: 100,
  blocking: true,
  id: 'profile-validation-handler' // ëª…í™•í•œ ì‹ë³„
});
```

---

## ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸

ë­”ê°€ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ, ë‹¤ìŒ ì¼ë°˜ì ì¸ ë¬¸ì œë“¤ì„ í™•ì¸í•˜ì„¸ìš”:

### í•¸ë“¤ëŸ¬ ë¬¸ì œ âœ“
- [ ] í•¸ë“¤ëŸ¬ê°€ unregister í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê³  ìˆë‚˜ìš”?
- [ ] ë¹„ë™ê¸° í•¸ë“¤ëŸ¬ê°€ `blocking: true`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
- [ ] í•¸ë“¤ëŸ¬ê°€ ì§€ì—° í‰ê°€(`registry.getStore()`)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
- [ ] í•¸ë“¤ëŸ¬ê°€ `useCallback`ìœ¼ë¡œ ë˜í•‘ë˜ì–´ ìˆë‚˜ìš”?

### ìŠ¤í† ì–´ ë¬¸ì œ âœ“
- [ ] ì»´í¬ë„ŒíŠ¸ê°€ ë°˜ì‘ì„±ì„ ìœ„í•´ `useStoreValue()`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
- [ ] ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸ê°€ ì§ì ‘ ë³€ê²½ ëŒ€ì‹  `setValue()`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
- [ ] ì´ˆê¸°ê°’ì´ ì ì ˆíˆ ì •ì˜ë˜ì–´ ìˆë‚˜ìš”(nullì´ ì•„ë‹˜)?

### Provider ë¬¸ì œ âœ“
- [ ] ìŠ¤í† ì–´ providerê°€ ì•¡ì…˜ providerë¥¼ ê°ì‹¸ê³  ìˆë‚˜ìš”?
- [ ] í•¸ë“¤ëŸ¬ ì„¤ì • ì»´í¬ë„ŒíŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆë‚˜ìš”?
- [ ] Providerê°€ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë˜ì–´ ìˆë‚˜ìš”?

### íƒ€ì… ë¬¸ì œ âœ“
- [ ] ë„ë©”ì¸ë³„ í›…ì„ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
- [ ] ì¸í„°í˜ì´ìŠ¤ê°€ `any` íƒ€ì… ì—†ì´ ì ì ˆíˆ ì •ì˜ë˜ì–´ ìˆë‚˜ìš”?
- [ ] ì•¡ì…˜ í˜ì´ë¡œë“œê°€ ì¸í„°í˜ì´ìŠ¤ ì •ì˜ì™€ ì¼ì¹˜í•˜ë‚˜ìš”?

### ì„±ëŠ¥ ë¬¸ì œ âœ“
- [ ] ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ìŠ¤í† ì–´ë§Œ êµ¬ë…í•˜ê³  ìˆë‚˜ìš”?
- [ ] í•¸ë“¤ëŸ¬ê°€ `useCallback`ìœ¼ë¡œ ì•ˆì •í™”ë˜ì–´ ìˆë‚˜ìš”?
- [ ] ë¶ˆí•„ìš”í•œ ì¬ë Œë”ë§ì„ í”¼í•˜ê³  ìˆë‚˜ìš”?

---

## ìš”ì•½

Context-Action ë¬¸ì œì˜ ëŒ€ë¶€ë¶„ì€ ë‹¤ìŒì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤:

1. **ë©”ëª¨ë¦¬ ê´€ë¦¬**: í•¸ë“¤ëŸ¬ ì •ë¦¬í•˜ì§€ ì•Šê¸°
2. **ë¹„ë™ê¸° ì¡°ìœ¨**: `blocking: true` ëˆ„ë½  
3. **ë°˜ì‘ì„±**: ë°˜ì‘í˜• êµ¬ë… ì‚¬ìš©í•˜ì§€ ì•Šê¸°
4. **íƒ€ì… ì•ˆì „ì„±**: ë„ë©”ì¸ë³„ ëŒ€ì‹  ì œë„¤ë¦­ í›… ì‚¬ìš©
5. **Provider ì„¤ì •**: ì˜ëª»ëœ provider ìˆœì„œë‚˜ í•¸ë“¤ëŸ¬ ëˆ„ë½

ì´ ê°€ì´ë“œì˜ íŒ¨í„´ì„ ë”°ë¥´ë©´ ì´ëŸ¬í•œ ì¼ë°˜ì ì¸ í•¨ì •ì„ í”¼í•˜ê³  ë” ê²¬ê³ í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ì˜ˆë°©
ì´ëŸ¬í•œ ë¬¸ì œë“¤ì„ ì¡°ê¸°ì— ë°œê²¬í•˜ê¸° ìœ„í•´ ESLint ê·œì¹™ê³¼ ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì„¤ì •í•˜ì„¸ìš”. íŒ€ì˜ ì½”ë“œë² ì´ìŠ¤ì—ì„œ ì˜¬ë°”ë¥¸ íŒ¨í„´ì„ ê°•ì œí•˜ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“œëŠ” ê²ƒë„ ê³ ë ¤í•´ë³´ì„¸ìš”.
:::

---


# Guide Cross Domain Integration

**Source**: `guide/cross-domain-integration.md`  
**Priority**: 80 (essential)  

# í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©

í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©ì€ Context-Action í”„ë ˆì„ì›Œí¬ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ ë„ë©”ì¸ ê°„ì˜ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ì¸ ìƒí˜¸ì‘ìš©ì„ êµ¬í˜„í•˜ëŠ” ê³ ê¸‰ íŒ¨í„´ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ë„ë©”ì¸ ê²½ê³„ë¥¼ ë„˜ë‚˜ë“œëŠ” ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## í¬ë¡œìŠ¤ ë„ë©”ì¸ ê¸°ë³¸ ê°œë…

### ë„ë©”ì¸ ê²½ê³„ì™€ í†µí•© í•„ìš”ì„±

```typescript
// ë…ë¦½ì ì¸ ë„ë©”ì¸ë“¤
interface UserDomain {
  profile: UserProfile;
  session: UserSession;
  preferences: UserPreferences;
}

interface CartDomain {
  items: CartItem[];
  totals: CartTotals;
  discounts: CartDiscount[];
}

interface OrderDomain {
  orders: Order[];
  history: OrderHistory[];
  tracking: OrderTracking;
}

// í¬ë¡œìŠ¤ ë„ë©”ì¸ì´ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤
// 1. ê²°ì œ í”„ë¡œì„¸ìŠ¤: User + Cart + Order
// 2. ì‚¬ìš©ì ì¶”ì²œ: User + Product + Cart
// 3. ì•Œë¦¼ ì‹œìŠ¤í…œ: ëª¨ë“  ë„ë©”ì¸ì˜ ì´ë²¤íŠ¸
```

### í†µí•© ì ‘ê·¼ ë°©ì‹

Context-Actionì—ì„œëŠ” ì„¸ ê°€ì§€ ì£¼ìš” í¬ë¡œìŠ¤ ë„ë©”ì¸ íŒ¨í„´ì„ ì œê³µí•©ë‹ˆë‹¤:

1. **ì§ì ‘ ì ‘ê·¼**: ì—¬ëŸ¬ ë„ë©”ì¸ì˜ í›…ì„ ì§ì ‘ ì‚¬ìš©
2. **í†µí•© í›…**: í¬ë¡œìŠ¤ ë„ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìº¡ìŠí™”
3. **ì´ë²¤íŠ¸ ê¸°ë°˜**: ë„ë©”ì¸ ê°„ ì´ë²¤íŠ¸ ë°œí–‰/êµ¬ë…

## ì§ì ‘ ì ‘ê·¼ íŒ¨í„´

### ê¸°ë³¸ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì ‘ê·¼

```typescript
function CheckoutComponent() {
  // ì—¬ëŸ¬ ë„ë©”ì¸ì˜ ìƒíƒœ êµ¬ë…
  const profile = useStoreValue(useUserStore('profile'));
  const cartItems = useStoreValue(useCartStore('items'));
  const cartTotals = useStoreValue(useCartStore('totals'));
  
  // ì—¬ëŸ¬ ë„ë©”ì¸ì˜ ì•¡ì…˜ ì ‘ê·¼
  const userAction = useUserAction();
  const cartAction = useCartAction();
  const orderAction = useOrderAction();
  
  const handleCheckout = useCallback(async () => {
    // í¬ë¡œìŠ¤ ë„ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    try {
      // 1. ì‚¬ìš©ì ì¸ì¦ í™•ì¸
      if (!profile.id) {
        await userAction('requireLogin', {});
        return;
      }
      
      // 2. ì¥ë°”êµ¬ë‹ˆ ê²€ì¦
      if (cartItems.length === 0) {
        throw new Error('ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤');
      }
      
      // 3. ì£¼ë¬¸ ìƒì„±
      const order = await orderAction('createOrder', {
        userId: profile.id,
        items: cartItems,
        totals: cartTotals
      });
      
      // 4. ê²°ì œ ì²˜ë¦¬
      const payment = await orderAction('processPayment', {
        orderId: order.id,
        amount: cartTotals.finalAmount,
        userId: profile.id
      });
      
      // 5. ì¥ë°”êµ¬ë‹ˆ ì •ë¦¬
      if (payment.success) {
        await cartAction('clearCart', {});
      }
      
    } catch (error) {
      console.error('ê²°ì œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);
    }
  }, [profile, cartItems, cartTotals, userAction, cartAction, orderAction]);
  
  return (
    <button onClick={handleCheckout} disabled={!profile.id || cartItems.length === 0}>
      ê²°ì œí•˜ê¸°
    </button>
  );
}
```

### ì œí•œì  í¬ë¡œìŠ¤ ë„ë©”ì¸ ì ‘ê·¼

```typescript
// í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì œí•œì ìœ¼ë¡œ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì ‘ê·¼
function UserCartSummary() {
  const profile = useStoreValue(useUserStore('profile'));
  
  // ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ ì¥ë°”êµ¬ë‹ˆ ì •ë³´ ì ‘ê·¼
  const cartItems = useStoreValue(
    useCartStore('items'),
    profile.id ? undefined : () => [] // ë¹„ë¡œê·¸ì¸ì‹œ ë¹ˆ ë°°ì—´
  );
  
  if (!profile.id) {
    return <div>ë¡œê·¸ì¸ í›„ ì¥ë°”êµ¬ë‹ˆë¥¼ í™•ì¸í•˜ì„¸ìš”</div>;
  }
  
  return (
    <div>
      <h3>{profile.name}ë‹˜ì˜ ì¥ë°”êµ¬ë‹ˆ</h3>
      <p>ìƒí’ˆ {cartItems.length}ê°œ</p>
    </div>
  );
}
```

## í†µí•© í›… íŒ¨í„´

### 1. ë³µí•© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í›…

```typescript
// ê²°ì œ í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•œ í†µí•© í›…
export function useCheckoutProcess() {
  // ë‹¤ì¤‘ ë„ë©”ì¸ ì ‘ê·¼
  const profile = useStoreValue(useUserStore('profile'));
  const session = useStoreValue(useUserStore('session'));
  const cartItems = useStoreValue(useCartStore('items'));
  const cartTotals = useStoreValue(useCartStore('totals'));
  
  const userAction = useUserAction();
  const cartAction = useCartAction();
  const orderAction = useOrderAction();
  
  const [isProcessing, setIsProcessing] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  // ê²°ì œ ê°€ëŠ¥ ì—¬ë¶€ ê³„ì‚°
  const canCheckout = useMemo(() => {
    return (
      session.isLoggedIn &&
      profile.id &&
      cartItems.length > 0 &&
      cartTotals.finalAmount > 0
    );
  }, [session.isLoggedIn, profile.id, cartItems.length, cartTotals.finalAmount]);
  
  // ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
  const processCheckout = useCallback(async (paymentMethod: PaymentMethod) => {
    if (!canCheckout) {
      setError('ê²°ì œ ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');
      return { success: false };
    }
    
    setIsProcessing(true);
    setError(null);
    
    try {
      // 1. ì£¼ë¬¸ ìƒì„±
      const orderResult = await orderAction('createOrder', {
        userId: profile.id,
        items: cartItems,
        totals: cartTotals,
        timestamp: Date.now()
      });
      
      if (!orderResult.success) {
        throw new Error(orderResult.error || 'ì£¼ë¬¸ ìƒì„± ì‹¤íŒ¨');
      }
      
      // 2. ê²°ì œ ì²˜ë¦¬
      const paymentResult = await orderAction('processPayment', {
        orderId: orderResult.order.id,
        amount: cartTotals.finalAmount,
        paymentMethod,
        userId: profile.id
      });
      
      if (!paymentResult.success) {
        // ì£¼ë¬¸ ì·¨ì†Œ
        await orderAction('cancelOrder', { orderId: orderResult.order.id });
        throw new Error(paymentResult.error || 'ê²°ì œ ì²˜ë¦¬ ì‹¤íŒ¨');
      }
      
      // 3. ì¥ë°”êµ¬ë‹ˆ ì •ë¦¬
      await cartAction('clearCart', {});
      
      // 4. ì‚¬ìš©ì í†µê³„ ì—…ë°ì´íŠ¸
      await userAction('updatePurchaseStats', {
        orderId: orderResult.order.id,
        amount: cartTotals.finalAmount
      });
      
      return {
        success: true,
        order: orderResult.order,
        payment: paymentResult.payment
      };
      
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : 'ê²°ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ';
      setError(errorMessage);
      return { success: false, error: errorMessage };
    } finally {
      setIsProcessing(false);
    }
  }, [canCheckout, profile.id, cartItems, cartTotals, userAction, cartAction, orderAction]);
  
  // ë¹ ë¥¸ ì¬ì£¼ë¬¸
  const reorder = useCallback(async (orderId: string) => {
    try {
      // 1. ê¸°ì¡´ ì£¼ë¬¸ ì •ë³´ ì¡°íšŒ
      const orderResult = await orderAction('getOrder', { orderId });
      if (!orderResult.success) {
        throw new Error('ì£¼ë¬¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
      }
      
      // 2. ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ì¶”ê°€
      for (const item of orderResult.order.items) {
        await cartAction('addItem', {
          productId: item.productId,
          quantity: item.quantity
        });
      }
      
      return { success: true };
      
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : 'ì¬ì£¼ë¬¸ ì²˜ë¦¬ ì‹¤íŒ¨';
      setError(errorMessage);
      return { success: false, error: errorMessage };
    }
  }, [cartAction, orderAction]);
  
  return {
    // ìƒíƒœ
    canCheckout,
    isProcessing,
    error,
    
    // ë°ì´í„°
    profile,
    cartItems,
    cartTotals,
    
    // ì•¡ì…˜
    processCheckout,
    reorder,
    clearError: () => setError(null)
  };
}

// ì‚¬ìš©ë²•
function CheckoutPage() {
  const {
    canCheckout,
    isProcessing,
    error,
    cartItems,
    cartTotals,
    processCheckout,
    clearError
  } = useCheckoutProcess();
  
  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<PaymentMethod>('card');
  
  const handleCheckout = useCallback(async () => {
    const result = await processCheckout(selectedPaymentMethod);
    if (result.success) {
      // ì„±ê³µ í˜ì´ì§€ë¡œ ì´ë™
      navigate(`/order-success/${result.order.id}`);
    }
  }, [processCheckout, selectedPaymentMethod]);
  
  return (
    <div>
      <h2>ê²°ì œ</h2>
      
      {error && (
        <div className="error-message">
          {error}
          <button onClick={clearError}>Ã—</button>
        </div>
      )}
      
      <div className="cart-summary">
        <h3>ì£¼ë¬¸ ìš”ì•½</h3>
        {cartItems.map(item => (
          <div key={item.id}>
            {item.name} Ã— {item.quantity} = {item.total}
          </div>
        ))}
        <div className="total">ì´ì•¡: {cartTotals.finalAmount}</div>
      </div>
      
      <PaymentMethodSelector 
        value={selectedPaymentMethod}
        onChange={setSelectedPaymentMethod}
      />
      
      <button 
        onClick={handleCheckout}
        disabled={!canCheckout || isProcessing}
      >
        {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ê²°ì œí•˜ê¸°'}
      </button>
    </div>
  );
}
```

### 2. ë°ì´í„° ì§‘ê³„ í›…

```typescript
// ì—¬ëŸ¬ ë„ë©”ì¸ì˜ ë°ì´í„°ë¥¼ ì§‘ê³„í•˜ëŠ” í›…
export function useUserDashboardData() {
  // ë‹¤ì¤‘ ë„ë©”ì¸ ë°ì´í„° êµ¬ë…
  const profile = useStoreValue(useUserStore('profile'));
  const preferences = useStoreValue(useUserStore('preferences'));
  const cartItems = useStoreValue(useCartStore('items'));
  const recentOrders = useStoreValue(useOrderStore('recentOrders'));
  const notifications = useStoreValue(useNotificationStore('unread'));
  
  // ëŒ€ì‹œë³´ë“œ ìš”ì•½ ë°ì´í„° ê³„ì‚°
  const dashboardSummary = useMemo(() => {
    const cartValue = cartItems.reduce((sum, item) => sum + item.total, 0);
    const totalOrders = recentOrders.length;
    const unreadCount = notifications.length;
    
    const recentOrdersValue = recentOrders
      .slice(0, 5)
      .reduce((sum, order) => sum + order.totalAmount, 0);
    
    return {
      user: {
        name: profile.name,
        email: profile.email,
        memberSince: profile.createdAt,
        theme: preferences.theme
      },
      cart: {
        itemCount: cartItems.length,
        totalValue: cartValue,
        hasItems: cartItems.length > 0
      },
      orders: {
        totalCount: totalOrders,
        recentValue: recentOrdersValue,
        lastOrderDate: recentOrders[0]?.createdAt
      },
      notifications: {
        unreadCount,
        hasUnread: unreadCount > 0
      },
      summary: {
        completionRate: calculateProfileCompletion(profile),
        activityScore: calculateActivityScore(recentOrders, cartItems),
        loyaltyTier: calculateLoyaltyTier(recentOrders)
      }
    };
  }, [profile, preferences, cartItems, recentOrders, notifications]);
  
  return dashboardSummary;
}

// ë³´ì¡° ê³„ì‚° í•¨ìˆ˜ë“¤
function calculateProfileCompletion(profile: UserProfile): number {
  const fields = ['name', 'email', 'avatar', 'phone', 'address'];
  const completed = fields.filter(field => profile[field]).length;
  return Math.round((completed / fields.length) * 100);
}

function calculateActivityScore(orders: Order[], cartItems: CartItem[]): number {
  const orderScore = orders.length * 10;
  const cartScore = cartItems.length * 2;
  return Math.min(orderScore + cartScore, 100);
}

function calculateLoyaltyTier(orders: Order[]): 'bronze' | 'silver' | 'gold' | 'platinum' {
  const totalSpent = orders.reduce((sum, order) => sum + order.totalAmount, 0);
  
  if (totalSpent >= 1000000) return 'platinum';
  if (totalSpent >= 500000) return 'gold';
  if (totalSpent >= 200000) return 'silver';
  return 'bronze';
}

// ì‚¬ìš©ë²•
function UserDashboard() {
  const dashboardData = useUserDashboardData();
  
  return (
    <div className={`dashboard theme-${dashboardData.user.theme}`}>
      <header>
        <h1>ì•ˆë…•í•˜ì„¸ìš”, {dashboardData.user.name}ë‹˜!</h1>
        <div className="loyalty-badge">
          {dashboardData.summary.loyaltyTier.toUpperCase()} íšŒì›
        </div>
      </header>
      
      <div className="dashboard-grid">
        <div className="profile-card">
          <h3>í”„ë¡œí•„ ì™„ì„±ë„</h3>
          <div className="progress-bar">
            <div 
              className="progress"
              style={{ width: `${dashboardData.summary.completionRate}%` }}
            />
          </div>
          <span>{dashboardData.summary.completionRate}% ì™„ë£Œ</span>
        </div>
        
        <div className="cart-card">
          <h3>ì¥ë°”êµ¬ë‹ˆ</h3>
          <p>{dashboardData.cart.itemCount}ê°œ ìƒí’ˆ</p>
          <p>ì´ {dashboardData.cart.totalValue.toLocaleString()}ì›</p>
        </div>
        
        <div className="orders-card">
          <h3>ì£¼ë¬¸ ë‚´ì—­</h3>
          <p>ì´ {dashboardData.orders.totalCount}íšŒ ì£¼ë¬¸</p>
          <p>ìµœê·¼ ì£¼ë¬¸: {dashboardData.orders.recentValue.toLocaleString()}ì›</p>
        </div>
        
        <div className="notifications-card">
          <h3>ì•Œë¦¼</h3>
          <p>
            {dashboardData.notifications.hasUnread 
              ? `${dashboardData.notifications.unreadCount}ê°œì˜ ìƒˆ ì•Œë¦¼`
              : 'ìƒˆ ì•Œë¦¼ ì—†ìŒ'
            }
          </p>
        </div>
      </div>
    </div>
  );
}
```

## ì´ë²¤íŠ¸ ê¸°ë°˜ í†µí•©

### 1. ë„ë©”ì¸ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ

```typescript
// ë„ë©”ì¸ ì´ë²¤íŠ¸ íƒ€ì… ì •ì˜
interface DomainEvents {
  // ì‚¬ìš©ì ë„ë©”ì¸ ì´ë²¤íŠ¸
  'user.login': { userId: string; timestamp: number };
  'user.logout': { userId: string; timestamp: number };
  'user.profile.updated': { userId: string; changes: Partial<UserProfile> };
  
  // ì¥ë°”êµ¬ë‹ˆ ë„ë©”ì¸ ì´ë²¤íŠ¸
  'cart.item.added': { userId: string; productId: string; quantity: number };
  'cart.item.removed': { userId: string; productId: string };
  'cart.cleared': { userId: string; timestamp: number };
  
  // ì£¼ë¬¸ ë„ë©”ì¸ ì´ë²¤íŠ¸
  'order.created': { orderId: string; userId: string; amount: number };
  'order.paid': { orderId: string; paymentId: string };
  'order.shipped': { orderId: string; trackingNumber: string };
}

// ì´ë²¤íŠ¸ ë°œí–‰/êµ¬ë… ì‹œìŠ¤í…œ
class DomainEventBus {
  private listeners = new Map<keyof DomainEvents, Function[]>();
  
  subscribe<T extends keyof DomainEvents>(
    event: T, 
    handler: (payload: DomainEvents[T]) => void
  ): () => void {
    if (!this.listeners.has(event)) {
      this.listeners.set(event, []);
    }
    
    this.listeners.get(event)!.push(handler);
    
    // êµ¬ë… í•´ì œ í•¨ìˆ˜ ë°˜í™˜
    return () => {
      const handlers = this.listeners.get(event);
      if (handlers) {
        const index = handlers.indexOf(handler);
        if (index > -1) {
          handlers.splice(index, 1);
        }
      }
    };
  }
  
  publish<T extends keyof DomainEvents>(event: T, payload: DomainEvents[T]) {
    const handlers = this.listeners.get(event) || [];
    handlers.forEach(handler => {
      try {
        handler(payload);
      } catch (error) {
        console.error(`Error in event handler for ${event}:`, error);
      }
    });
  }
}

// ì „ì—­ ì´ë²¤íŠ¸ ë²„ìŠ¤
export const domainEventBus = new DomainEventBus();

// ì´ë²¤íŠ¸ ê¸°ë°˜ í•¸ë“¤ëŸ¬
function useEventBasedIntegration() {
  const cartAction = useCartAction();
  const orderAction = useOrderAction();
  const notificationAction = useNotificationAction();
  
  useEffect(() => {
    // ì‚¬ìš©ì ë¡œê·¸ì¸ ì‹œ ì¥ë°”êµ¬ë‹ˆ ë™ê¸°í™”
    const unsubscribeLogin = domainEventBus.subscribe('user.login', async ({ userId }) => {
      await cartAction('syncFromServer', { userId });
    });
    
    // ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ì¶”ê°€ ì‹œ ì¶”ì²œ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
    const unsubscribeCartAdd = domainEventBus.subscribe('cart.item.added', async ({ userId, productId }) => {
      // ì¶”ì²œ ì‹œìŠ¤í…œì— ì‚¬ìš©ì í–‰ë™ ê¸°ë¡
      await fetch('/api/recommendations/track', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userId, action: 'cart-add', productId })
      });
    });
    
    // ì£¼ë¬¸ ìƒì„± ì‹œ ì•Œë¦¼ ë°œì†¡
    const unsubscribeOrderCreated = domainEventBus.subscribe('order.created', async ({ orderId, userId }) => {
      await notificationAction('sendOrderConfirmation', { orderId, userId });
    });
    
    // ì£¼ë¬¸ ë°°ì†¡ ì‹œ ì•Œë¦¼ ë°œì†¡
    const unsubscribeOrderShipped = domainEventBus.subscribe('order.shipped', async ({ orderId, trackingNumber }) => {
      await notificationAction('sendShippingNotification', { orderId, trackingNumber });
    });
    
    return () => {
      unsubscribeLogin();
      unsubscribeCartAdd();
      unsubscribeOrderCreated();
      unsubscribeOrderShipped();
    };
  }, [cartAction, orderAction, notificationAction]);
}
```

### 2. ì´ë²¤íŠ¸ ë°œí–‰ í•¸ë“¤ëŸ¬

```typescript
// ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ëŠ” í•¸ë“¤ëŸ¬ íŒ¨í„´
function useUserHandlersWithEvents() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  const loginHandler = useCallback(async (payload, controller) => {
    const sessionStore = registry.getStore('session');
    const profileStore = registry.getStore('profile');
    
    try {
      // ë¡œê·¸ì¸ ë¡œì§
      const loginResult = await performLogin(payload);
      
      sessionStore.setValue({
        isLoggedIn: true,
        token: loginResult.token,
        expiresAt: Date.now() + (loginResult.expiresIn * 1000)
      });
      
      profileStore.setValue(loginResult.user);
      
      // ë¡œê·¸ì¸ ì´ë²¤íŠ¸ ë°œí–‰
      domainEventBus.publish('user.login', {
        userId: loginResult.user.id,
        timestamp: Date.now()
      });
      
      return { success: true, user: loginResult.user };
      
    } catch (error) {
      controller.abort('ë¡œê·¸ì¸ ì‹¤íŒ¨', error);
      return { success: false, error: 'LOGIN_FAILED' };
    }
  }, [registry]);
  
  const updateProfileHandler = useCallback(async (payload, controller) => {
    const profileStore = registry.getStore('profile');
    const currentProfile = profileStore.getValue();
    
    try {
      const updatedProfile = { ...currentProfile, ...payload.data };
      profileStore.setValue(updatedProfile);
      
      // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ë°œí–‰
      domainEventBus.publish('user.profile.updated', {
        userId: currentProfile.id,
        changes: payload.data
      });
      
      return { success: true, profile: updatedProfile };
      
    } catch (error) {
      controller.abort('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', error);
      return { success: false, error: 'UPDATE_FAILED' };
    }
  }, [registry]);
  
  // í•¸ë“¤ëŸ¬ ë“±ë¡
  useEffect(() => {
    if (!register) return;
    
    const unregisterLogin = register('login', loginHandler, {
      id: 'user-login-with-events',
      priority: 100
    });
    
    const unregisterUpdate = register('updateProfile', updateProfileHandler, {
      id: 'user-profile-update-with-events',
      priority: 100
    });
    
    return () => {
      unregisterLogin();
      unregisterUpdate();
    };
  }, [register, loginHandler, updateProfileHandler]);
}
```

## ê³ ê¸‰ í†µí•© íŒ¨í„´

### 1. ì¡°ê±´ë¶€ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì ‘ê·¼

```typescript
// ì¡°ê±´ì— ë”°ë¥¸ ì„ íƒì  ë„ë©”ì¸ ì ‘ê·¼
export function useConditionalCrossDomain(features: {
  cart?: boolean;
  orders?: boolean;
  notifications?: boolean;
}) {
  const profile = useStoreValue(useUserStore('profile'));
  
  // ì¡°ê±´ë¶€ í›… ì‚¬ìš©
  const cartItems = features.cart 
    ? useStoreValue(useCartStore('items'))
    : [];
    
  const recentOrders = features.orders
    ? useStoreValue(useOrderStore('recent'))
    : [];
    
  const notifications = features.notifications
    ? useStoreValue(useNotificationStore('unread'))
    : [];
  
  // ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥ì— ë”°ë¥¸ ë°ì´í„° ì§‘ê³„
  const summary = useMemo(() => {
    const baseData = { profile };
    
    if (features.cart && cartItems.length > 0) {
      baseData.cartSummary = {
        itemCount: cartItems.length,
        totalValue: cartItems.reduce((sum, item) => sum + item.total, 0)
      };
    }
    
    if (features.orders && recentOrders.length > 0) {
      baseData.ordersSummary = {
        count: recentOrders.length,
        lastOrder: recentOrders[0]
      };
    }
    
    if (features.notifications && notifications.length > 0) {
      baseData.notificationsSummary = {
        unreadCount: notifications.length
      };
    }
    
    return baseData;
  }, [profile, cartItems, recentOrders, notifications, features]);
  
  return summary;
}
```

### 2. íŠ¸ëœì­ì…˜ íŒ¨í„´

```typescript
// ì—¬ëŸ¬ ë„ë©”ì¸ì— ê±¸ì¹œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
export function useTransactionalOperation() {
  const userAction = useUserAction();
  const cartAction = useCartAction();
  const orderAction = useOrderAction();
  const paymentAction = usePaymentAction();
  
  const executeTransactionalCheckout = useCallback(async (checkoutData: CheckoutData) => {
    const rollbackActions: Array<() => Promise<void>> = [];
    
    try {
      // 1. ì¬ê³  ì˜ˆì•½
      const reservationResult = await orderAction('reserveInventory', {
        items: checkoutData.items
      });
      
      if (!reservationResult.success) {
        throw new Error('ì¬ê³  ë¶€ì¡±');
      }
      
      rollbackActions.push(() => 
        orderAction('releaseInventoryReservation', { 
          reservationId: reservationResult.reservationId 
        })
      );
      
      // 2. ì£¼ë¬¸ ìƒì„±
      const orderResult = await orderAction('createOrder', {
        userId: checkoutData.userId,
        items: checkoutData.items,
        reservationId: reservationResult.reservationId
      });
      
      if (!orderResult.success) {
        throw new Error('ì£¼ë¬¸ ìƒì„± ì‹¤íŒ¨');
      }
      
      rollbackActions.push(() => 
        orderAction('cancelOrder', { 
          orderId: orderResult.order.id 
        })
      );
      
      // 3. ê²°ì œ ì²˜ë¦¬
      const paymentResult = await paymentAction('processPayment', {
        orderId: orderResult.order.id,
        amount: checkoutData.amount,
        paymentMethod: checkoutData.paymentMethod
      });
      
      if (!paymentResult.success) {
        throw new Error('ê²°ì œ ì²˜ë¦¬ ì‹¤íŒ¨');
      }
      
      // 4. ì¥ë°”êµ¬ë‹ˆ ì •ë¦¬
      await cartAction('clearCart', {});
      
      // 5. ì‚¬ìš©ì í†µê³„ ì—…ë°ì´íŠ¸
      await userAction('updatePurchaseHistory', {
        orderId: orderResult.order.id,
        amount: checkoutData.amount
      });
      
      return {
        success: true,
        order: orderResult.order,
        payment: paymentResult.payment
      };
      
    } catch (error) {
      // ë¡¤ë°± ì‹¤í–‰ (ì—­ìˆœ)
      for (let i = rollbackActions.length - 1; i >= 0; i--) {
        try {
          await rollbackActions[i]();
        } catch (rollbackError) {
          console.error('ë¡¤ë°± ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜:', rollbackError);
        }
      }
      
      return {
        success: false,
        error: error instanceof Error ? error.message : 'íŠ¸ëœì­ì…˜ ì‹¤íŒ¨'
      };
    }
  }, [userAction, cartAction, orderAction, paymentAction]);
  
  return { executeTransactionalCheckout };
}
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ë„ë©”ì¸ ê²½ê³„ ì›ì¹™

```typescript
// âœ… ì¢‹ìŒ: ëª…í™•í•œ ëª©ì ì˜ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì ‘ê·¼
function useOrderSummaryWithUserInfo() {
  // ì£¼ë¬¸ ìš”ì•½ì„ ìœ„í•´ í•„ìš”í•œ ì‚¬ìš©ì ì •ë³´ë§Œ ì ‘ê·¼
  const userName = useStoreValue(useUserStore('profile'), profile => profile.name);
  const orders = useStoreValue(useOrderStore('recent'));
  
  return {
    userName,
    orders,
    summary: `${userName}ë‹˜ì˜ ìµœê·¼ ì£¼ë¬¸ ${orders.length}ê±´`
  };
}

// âŒ í”¼í•˜ê¸°: ë¶ˆí•„ìš”í•œ í¬ë¡œìŠ¤ ë„ë©”ì¸ ì˜ì¡´ì„±
function useUserProfileWithCartAndOrders() {
  // í”„ë¡œí•„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¥ë°”êµ¬ë‹ˆì™€ ì£¼ë¬¸ ì •ë³´ê¹Œì§€ ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ê³¼ë„í•¨
  const profile = useStoreValue(useUserStore('profile'));
  const cartItems = useStoreValue(useCartStore('items')); // ë¶ˆí•„ìš”
  const orders = useStoreValue(useOrderStore('all')); // ë¶ˆí•„ìš”
  
  return { profile, cartItems, orders }; // ë„ˆë¬´ ë§ì€ ì±…ì„
}
```

### 2. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

```typescript
// âœ… ì¢‹ìŒ: ì¡°ê±´ë¶€ êµ¬ë…ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
function useOptimizedCrossDomain({ includeCart, includeOrders }: {
  includeCart?: boolean;
  includeOrders?: boolean;
}) {
  const profile = useStoreValue(useUserStore('profile'));
  
  // í•„ìš”í•œ ê²½ìš°ì—ë§Œ êµ¬ë…
  const cartData = includeCart 
    ? useStoreValue(useCartStore('items'))
    : null;
    
  const orderData = includeOrders 
    ? useStoreValue(useOrderStore('recent'))
    : null;
  
  return {
    profile,
    ...(cartData && { cart: cartData }),
    ...(orderData && { orders: orderData })
  };
}

// âŒ í”¼í•˜ê¸°: í•­ìƒ ëª¨ë“  ë„ë©”ì¸ êµ¬ë…
function useInefficientCrossDomain() {
  // ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëª¨ë“  ë°ì´í„°ë¥¼ êµ¬ë…í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì 
  const profile = useStoreValue(useUserStore('profile'));
  const cartItems = useStoreValue(useCartStore('items'));
  const orders = useStoreValue(useOrderStore('all'));
  const notifications = useStoreValue(useNotificationStore('all'));
  
  return { profile }; // ë‹¤ë¥¸ ë°ì´í„°ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
}
```

### 3. ì˜¤ë¥˜ ì²˜ë¦¬ ì „ëµ

```typescript
// í¬ë¡œìŠ¤ ë„ë©”ì¸ ì˜¤ë¥˜ ì²˜ë¦¬
export function useSafeCrossDomainOperation() {
  const [errors, setErrors] = useState<Record<string, string>>({});
  
  const safeCrossOperation = useCallback(async (operation: () => Promise<any>) => {
    try {
      setErrors({});
      return await operation();
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
      
      // ë„ë©”ì¸ë³„ ì˜¤ë¥˜ ë¶„ë¥˜
      if (errorMessage.includes('ì‚¬ìš©ì')) {
        setErrors(prev => ({ ...prev, user: errorMessage }));
      } else if (errorMessage.includes('ì¥ë°”êµ¬ë‹ˆ')) {
        setErrors(prev => ({ ...prev, cart: errorMessage }));
      } else if (errorMessage.includes('ì£¼ë¬¸')) {
        setErrors(prev => ({ ...prev, order: errorMessage }));
      } else {
        setErrors(prev => ({ ...prev, general: errorMessage }));
      }
      
      throw error;
    }
  }, []);
  
  return { errors, safeCrossOperation, clearErrors: () => setErrors({}) };
}
```

---

## ìš”ì•½

í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©ì€ ë‹¤ìŒ ì›ì¹™ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:

- **ìµœì†Œí•œì˜ ê²°í•©** - í•„ìš”í•œ ê²½ìš°ì—ë§Œ ë„ë©”ì¸ ê°„ ì ‘ê·¼
- **ëª…í™•í•œ ëª©ì ** - ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì— ê¸°ë°˜í•œ í†µí•©
- **ì„±ëŠ¥ ìµœì í™”** - ì¡°ê±´ë¶€ êµ¬ë…ê³¼ ì§€ì—° ë¡œë”© í™œìš©
- **ì•ˆì „í•œ ì‹¤í–‰** - íŠ¸ëœì­ì…˜ê³¼ ë¡¤ë°± ë©”ì»¤ë‹ˆì¦˜
- **ìœ ì§€ë³´ìˆ˜ì„±** - í†µí•© ë¡œì§ì˜ ìº¡ìŠí™”ì™€ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±

ì˜¬ë°”ë¥¸ í¬ë¡œìŠ¤ ë„ë©”ì¸ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ê¹”ë”í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [MVVM ì•„í‚¤í…ì²˜](./mvvm-architecture) - MVVM íŒ¨í„´ê³¼ í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©
- [ì„±ëŠ¥ ìµœì í™”](./performance) - í¬ë¡œìŠ¤ ë„ë©”ì¸ ì„±ëŠ¥ ìµœì í™”
- [ëª¨ë²” ì‚¬ë¡€](./best-practices) - ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ ê¶Œì¥ì‚¬í•­
:::

---


# Guide Domain Hooks Pattern

**Source**: `guide/domain-hooks-pattern.md`  
**Priority**: 80 (essential)  

# ë„ë©”ì¸ í›… íŒ¨í„´

Context-Action í”„ë ˆì„ì›Œí¬ì˜ **ë„ë©”ì¸ í›… íŒ¨í„´**ì€ íƒ€ì… ì•ˆì „í•œ ë„ë©”ì¸ë³„ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. êµ¬ì¡° ë¶„í•´ í• ë‹¹ì„ í†µí•´ ìë™ íƒ€ì… ì¶”ë¡ ê³¼ ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## íŒ¨í„´ ê°œìš”

ë„ë©”ì¸ í›… íŒ¨í„´ì€ ì œë„¤ë¦­ í›… ëŒ€ì‹  ë„ë©”ì¸ë³„ë¡œ íŠ¹í™”ëœ í›…ì„ ìƒì„±í•˜ì—¬ ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„±ì„ ì œê³µí•©ë‹ˆë‹¤:

```typescript
// âŒ ì œë„¤ë¦­ ì ‘ê·¼ë²• (íƒ€ì… ì •ë³´ ì—†ìŒ)
const store = useStore('user-profile');
const dispatch = useDispatch();

// âœ… ë„ë©”ì¸ í›… íŒ¨í„´ (ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„±)
const store = useUserStore('profile');
const dispatch = useUserAction();
```

## ìŠ¤í† ì–´ ë„ë©”ì¸ í›…

### ê¸°ë³¸ êµ¬ì¡°

```typescript
// stores/user.store.ts
import { createDeclarativeStores } from '@context-action/react';

export interface UserData {
  profile: {
    id: string;
    name: string;
    email: string;
    avatar?: string;
  };
  preferences: {
    theme: 'light' | 'dark';
    language: string;
    notifications: {
      email: boolean;
      push: boolean;
    };
  };
  session: {
    isLoggedIn: boolean;
    token: string | null;
    expiresAt: number | null;
  };
}

// ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ í›… ìƒì„±
export const {
  Provider: UserStoreProvider,
  useStore: useUserStore,           // Store<UserData[K]> íƒ€ì… ë°˜í™˜
  useStores: useUserStores,         // StoreRegistry<UserData> íƒ€ì… ë°˜í™˜
  useCreateStore: useCreateUserStore // ë™ì  ìŠ¤í† ì–´ ìƒì„±
} = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: ''
    },
    strategy: 'deep'
  },
  preferences: {
    initialValue: {
      theme: 'light',
      language: 'ko',
      notifications: {
        email: true,
        push: true
      }
    },
    strategy: 'shallow'
  },
  session: {
    initialValue: {
      isLoggedIn: false,
      token: null,
      expiresAt: null
    },
    strategy: 'reference'
  }
});
```

### ì‚¬ìš© íŒ¨í„´

```typescript
// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
function UserProfile() {
  // ìë™ íƒ€ì… ì¶”ë¡ : Store<UserData['profile']>
  const profileStore = useUserStore('profile');
  
  // ìë™ íƒ€ì… ì¶”ë¡ : UserData['profile']
  const profile = useStoreValue(profileStore);
  
  // ìë™ íƒ€ì… ì¶”ë¡ : UserData['preferences']
  const preferences = useStoreValue(useUserStore('preferences'));
  
  return (
    <div>
      <h2>ì•ˆë…•í•˜ì„¸ìš”, {profile.name}ë‹˜</h2>
      <p>í˜„ì¬ í…Œë§ˆ: {preferences.theme}</p>
    </div>
  );
}

// í•¸ë“¤ëŸ¬ì—ì„œ ì‚¬ìš©
function useUserHandlers() {
  const registry = useUserStores(); // StoreRegistry<UserData>
  
  const handler = useCallback(async (payload, controller) => {
    // ì§€ì—° í‰ê°€ë¡œ ìµœì‹  ê°’ ì ‘ê·¼
    const profileStore = registry.getStore('profile');
    const currentProfile = profileStore.getValue();
    
    // íƒ€ì… ì•ˆì „í•œ ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
    profileStore.setValue({
      ...currentProfile,
      name: payload.newName
    });
  }, [registry]);
}
```

## ì•¡ì…˜ ë„ë©”ì¸ í›…

### ê¸°ë³¸ êµ¬ì¡°

```typescript
// stores/user.actions.ts
import { createActionContext } from '@context-action/react';

export interface UserActions {
  // ì¸ì¦ ì•¡ì…˜
  login: { 
    email: string; 
    password: string; 
    rememberMe?: boolean; 
  };
  logout: void;
  refreshToken: void;
  
  // í”„ë¡œí•„ ì•¡ì…˜
  updateProfile: { 
    data: Partial<UserData['profile']>; 
  };
  uploadAvatar: { 
    file: File; 
  };
  deleteProfile: { 
    confirmation: string; 
  };
  
  // ì„¤ì • ì•¡ì…˜
  updatePreferences: { 
    preferences: Partial<UserData['preferences']>; 
  };
  
  // ë³µí•© ì•¡ì…˜
  resetUserData: void;
  syncWithServer: { 
    force?: boolean; 
  };
}

// ë„ë©”ì¸ë³„ ì•¡ì…˜ í›… ìƒì„±
export const {
  Provider: UserActionProvider,
  useAction: useUserAction,                    // Dispatch<UserActions>
  useActionHandler: useUserActionHandler,      // RegisterHandler<UserActions>
  useActionDispatchWithResult: useUserActionWithResult // WithResult<UserActions>
} = createActionContext<UserActions>({
  name: 'UserAction',
  debug: process.env.NODE_ENV === 'development'
});
```

### ì‚¬ìš© íŒ¨í„´

```typescript
// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
function LoginForm() {
  const dispatch = useUserAction(); // ì™„ì „íˆ íƒ€ì…ëœ ë””ìŠ¤íŒ¨ì²˜
  const [form, setForm] = useState({ email: '', password: '' });
  
  const handleLogin = useCallback(async () => {
    // íƒ€ì… ì•ˆì „í•œ ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
    await dispatch('login', {
      email: form.email,
      password: form.password,
      rememberMe: true
    });
  }, [dispatch, form]);
  
  return (
    <form onSubmit={handleLogin}>
      <input 
        value={form.email}
        onChange={(e) => setForm(prev => ({ ...prev, email: e.target.value }))}
        type="email"
        placeholder="ì´ë©”ì¼"
      />
      <input 
        value={form.password}
        onChange={(e) => setForm(prev => ({ ...prev, password: e.target.value }))}
        type="password"
        placeholder="ë¹„ë°€ë²ˆí˜¸"
      />
      <button type="submit">ë¡œê·¸ì¸</button>
    </form>
  );
}

// ê²°ê³¼ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ì•¡ì…˜
function ProfileUpdater() {
  const dispatchWithResult = useUserActionWithResult();
  
  const handleUpdate = useCallback(async (data: Partial<UserData['profile']>) => {
    const result = await dispatchWithResult('updateProfile', { data }, {
      result: { collect: true, strategy: 'first' }
    });
    
    if (result.success) {
      console.log('ì—…ë°ì´íŠ¸ ì„±ê³µ:', result.results);
    } else {
      console.error('ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', result.errors);
    }
  }, [dispatchWithResult]);
}
```

## ê³ ê¸‰ íŒ¨í„´

### 1. ì¡°ê±´ë¶€ ìŠ¤í† ì–´ ìƒì„±

```typescript
// ë™ì  ìŠ¤í† ì–´ ìƒì„±
function UserDashboard({ userId }: { userId: string }) {
  const createStore = useCreateUserStore();
  
  // ì‚¬ìš©ìë³„ ë™ì  ìŠ¤í† ì–´
  const userCache = createStore(`cache-${userId}`, {
    activities: [],
    lastFetch: null
  });
  
  const activities = useStoreValue(userCache);
  
  return <div>ì‚¬ìš©ì í™œë™: {activities.length}ê°œ</div>;
}
```

### 2. ë³µí•© ë„ë©”ì¸ í›…

```typescript
// hooks/useUserProfile.ts - ë³µí•© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
export function useUserProfile() {
  const profileStore = useUserStore('profile');
  const sessionStore = useUserStore('session');
  const dispatch = useUserAction();
  
  const profile = useStoreValue(profileStore);
  const session = useStoreValue(sessionStore);
  
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ë¡œì§
  const updateProfile = useCallback(async (data: Partial<UserData['profile']>) => {
    setIsLoading(true);
    setError(null);
    
    try {
      const result = await dispatch('updateProfile', { data });
      return result;
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : 'ì—…ë°ì´íŠ¸ ì‹¤íŒ¨';
      setError(errorMessage);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [dispatch]);
  
  // ì¸ì¦ ìƒíƒœ í™•ì¸
  const isAuthenticated = useMemo(() => {
    return session.isLoggedIn && 
           session.token && 
           (session.expiresAt ? session.expiresAt > Date.now() : true);
  }, [session]);
  
  // ì™„ì „í•œ í”„ë¡œí•„ ì—¬ë¶€
  const hasCompleteProfile = useMemo(() => {
    return profile.name && profile.email && profile.id;
  }, [profile]);
  
  return {
    profile,
    session,
    isLoading,
    error,
    updateProfile,
    isAuthenticated,
    hasCompleteProfile,
    clearError: () => setError(null)
  };
}
```

### 3. í¬ë¡œìŠ¤ ë„ë©”ì¸ í›…

```typescript
// hooks/useUserCartIntegration.ts - ë‹¤ì¤‘ ë„ë©”ì¸ í†µí•©
export function useUserCartIntegration() {
  // ì—¬ëŸ¬ ë„ë©”ì¸ì˜ í›… ì‚¬ìš©
  const userProfile = useUserStore('profile');
  const cartItems = useCartStore('items');
  const userDispatch = useUserAction();
  const cartDispatch = useCartAction();
  
  const profile = useStoreValue(userProfile);
  const items = useStoreValue(cartItems);
  
  // í¬ë¡œìŠ¤ ë„ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  const processCheckout = useCallback(async () => {
    // ì‚¬ìš©ì ì¸ì¦ í™•ì¸
    if (!profile.id) {
      await userDispatch('login', { 
        /* ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ ë¡œì§ */ 
      });
      return { success: false, reason: 'AUTH_REQUIRED' };
    }
    
    // ì¥ë°”êµ¬ë‹ˆ ê²€ì¦
    if (items.length === 0) {
      return { success: false, reason: 'EMPTY_CART' };
    }
    
    // ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì‹œì‘
    const checkoutResult = await cartDispatch('processCheckout', {
      userId: profile.id,
      items: items,
      userEmail: profile.email
    });
    
    return checkoutResult;
  }, [profile, items, userDispatch, cartDispatch]);
  
  // ë¡œê·¸ì¸ ì‹œ ì¥ë°”êµ¬ë‹ˆ ë™ê¸°í™”
  const syncCartOnLogin = useCallback(async () => {
    if (profile.id) {
      await cartDispatch('syncWithServer', { 
        userId: profile.id 
      });
    }
  }, [profile.id, cartDispatch]);
  
  // ì¥ë°”êµ¬ë‹ˆ ìš”ì•½ ì •ë³´
  const cartSummary = useMemo(() => {
    const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);
    const totalPrice = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    return {
      itemCount: totalItems,
      totalPrice,
      canCheckout: profile.id && totalItems > 0
    };
  }, [items, profile.id]);
  
  return {
    processCheckout,
    syncCartOnLogin,
    cartSummary,
    userProfile: profile,
    cartItems: items
  };
}
```

## íƒ€ì… ì•ˆì „ì„± ì¥ì 

### 1. ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ ê²€ì¶œ

```typescript
// âŒ ì»´íŒŒì¼ ì—ëŸ¬ - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í† ì–´ í‚¤
const invalidStore = useUserStore('nonexistent');
// TS2345: Argument of type '"nonexistent"' is not assignable to parameter

// âŒ ì»´íŒŒì¼ ì—ëŸ¬ - ì˜ëª»ëœ ì•¡ì…˜ ì´ë¦„
dispatch('invalidAction', {});
// TS2345: Argument of type '"invalidAction"' is not assignable

// âŒ ì»´íŒŒì¼ ì—ëŸ¬ - ì˜ëª»ëœ í˜ì´ë¡œë“œ íƒ€ì…
dispatch('updateProfile', { invalidField: 'value' });
// TS2345: Object literal may only specify known properties
```

### 2. IDE ìë™ì™„ì„±

```typescript
// ìŠ¤í† ì–´ í‚¤ ìë™ì™„ì„±
const store = useUserStore('|'); // 'profile' | 'preferences' | 'session'

// ì•¡ì…˜ ì´ë¦„ ìë™ì™„ì„±  
dispatch('|'); // 'login' | 'logout' | 'updateProfile' | ...

// í˜ì´ë¡œë“œ íƒ€ì… ìë™ì™„ì„±
dispatch('updateProfile', {
  data: {
    name: '|', // string íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ 
    email: '|' // string íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ 
  }
});
```

### 3. ë¦¬íŒ©í† ë§ ì•ˆì „ì„±

```typescript
// ì¸í„°í˜ì´ìŠ¤ ë³€ê²½ ì‹œ ê´€ë ¨ ì½”ë“œ ìë™ ì—…ë°ì´íŠ¸
interface UserData {
  profile: {
    id: string;
    fullName: string; // nameì—ì„œ fullNameìœ¼ë¡œ ë³€ê²½
    email: string;
  };
  // ...
}

// ëª¨ë“  ì‚¬ìš©ì²˜ì—ì„œ TypeScript ì—ëŸ¬ë¡œ ë³€ê²½ í•„ìš” ìœ„ì¹˜ í‘œì‹œ
const profile = useStoreValue(useUserStore('profile'));
console.log(profile.name); // TS ì—ëŸ¬: Property 'name' does not exist
console.log(profile.fullName); // âœ… ìˆ˜ì •ë¨
```

## ì„±ëŠ¥ ìµœì í™”

### 1. ì„ íƒì  êµ¬ë…

```typescript
// í•„ìš”í•œ ìŠ¤í† ì–´ë§Œ êµ¬ë…í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
function UserName() {
  const profile = useStoreValue(useUserStore('profile'));
  
  // preferences ë³€ê²½ ì‹œì—ëŠ” ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ
  return <span>{profile.name}</span>;
}

function UserTheme() {
  const preferences = useStoreValue(useUserStore('preferences'));
  
  // profile ë³€ê²½ ì‹œì—ëŠ” ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ
  return <div className={`theme-${preferences.theme}`} />;
}
```

### 2. ë©”ëª¨í™”ì™€ ì¡°í•©

```typescript
function UserSummary() {
  const profile = useStoreValue(useUserStore('profile'));
  const preferences = useStoreValue(useUserStore('preferences'));
  
  // í”„ë¡œí•„ì´ë‚˜ í™˜ê²½ì„¤ì •ì´ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°
  const displayInfo = useMemo(() => ({
    greeting: `ì•ˆë…•í•˜ì„¸ìš”, ${profile.name}ë‹˜`,
    themeClass: `user-theme-${preferences.theme}`,
    locale: preferences.language
  }), [profile.name, preferences.theme, preferences.language]);
  
  return (
    <div className={displayInfo.themeClass}>
      {displayInfo.greeting}
    </div>
  );
}
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„

```typescript
// âœ… ì¢‹ìŒ: ëª…í™•í•œ ë„ë©”ì¸ë³„ ë¶„ë¦¬
const userProfile = useUserStore('profile');
const cartItems = useCartStore('items');
const orderHistory = useOrderStore('history');

// âŒ í”¼í•˜ê¸°: í•˜ë‚˜ì˜ í›…ì—ì„œ ì—¬ëŸ¬ ë„ë©”ì¸ ì ‘ê·¼ (í•„ìš”í•œ ê²½ìš° ì œì™¸)
function ProfileComponent() {
  const profile = useUserStore('profile');
  const cartCount = useCartStore('items'); // í”„ë¡œí•„ì—ì„œ ì¥ë°”êµ¬ë‹ˆê°€ ì™œ í•„ìš”í•œê°€?
}
```

### 2. ì ì ˆí•œ ì¶”ìƒí™” ìˆ˜ì¤€

```typescript
// âœ… ì¢‹ìŒ: ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í›…
export function useUserAuthentication() {
  const sessionStore = useUserStore('session');
  const dispatch = useUserAction();
  
  return {
    login: (credentials) => dispatch('login', credentials),
    logout: () => dispatch('logout'),
    isAuthenticated: useStoreValue(sessionStore).isLoggedIn
  };
}

// ì‚¬ìš©ë²•
function LoginButton() {
  const { login, logout, isAuthenticated } = useUserAuthentication();
  
  return (
    <button onClick={isAuthenticated ? logout : () => login(credentials)}>
      {isAuthenticated ? 'ë¡œê·¸ì•„ì›ƒ' : 'ë¡œê·¸ì¸'}
    </button>
  );
}
```

### 3. ì¼ê´€ëœ ëª…ëª… ê·œì¹™

```typescript
// ìŠ¤í† ì–´ í›…
export const useUserStore = ...;
export const useCartStore = ...;
export const useOrderStore = ...;

// ì•¡ì…˜ í›…
export const useUserAction = ...;
export const useCartAction = ...;
export const useOrderAction = ...;

// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í›…
export const useUserProfile = ...;
export const useCartManagement = ...;
export const useOrderProcessing = ...;
```

---

## ìš”ì•½

ë„ë©”ì¸ í›… íŒ¨í„´ì€ Context-Action í”„ë ˆì„ì›Œí¬ì˜ í•µì‹¬ìœ¼ë¡œ, ë‹¤ìŒì„ ì œê³µí•©ë‹ˆë‹¤:

- **ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„±** - ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ ê²€ì¶œ
- **ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„** - ë…¼ë¦¬ì  ë¶„ë¦¬ì™€ ìº¡ìŠí™”
- **ìš°ìˆ˜í•œ ê°œë°œì ê²½í—˜** - IDE ìë™ì™„ì„±ê³¼ ë¦¬íŒ©í† ë§ ì•ˆì „ì„±
- **ì„±ëŠ¥ ìµœì í™”** - ì„ íƒì  êµ¬ë…ê³¼ ìµœì†Œí•œì˜ ë¦¬ë Œë”ë§
- **í™•ì¥ì„±** - ìƒˆë¡œìš´ ë„ë©”ì¸ê³¼ ê¸°ëŠ¥ì˜ ì‰¬ìš´ ì¶”ê°€

ì´ íŒ¨í„´ì„ ë”°ë¥´ë©´ ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œë„ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•˜ê³  íƒ€ì… ì•ˆì „í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [ìŠ¤í† ì–´ ê´€ë¦¬](./store-management) - ìŠ¤í† ì–´ ì‹œìŠ¤í…œ ì‹¬í™” í•™ìŠµ
- [ì•¡ì…˜ í•¸ë“¤ëŸ¬](./action-handlers) - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ íŒ¨í„´
- [í”„ë¡œë°”ì´ë” êµ¬ì„±](./provider-composition) - ë„ë©”ì¸ ê²½ê³„ ê´€ë¦¬
:::

---


# Guide Error Handling

**Source**: `guide/error-handling.md`  
**Priority**: 80 (essential)  

# ì˜¤ë¥˜ ì²˜ë¦¬

Context-Action í”„ë ˆì„ì›Œí¬ì—ì„œì˜ ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ì•ˆì •ì ì´ê³  ë³µì›ë ¥ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ì²´ê³„ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ ì „ëµê³¼ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ì˜¤ë¥˜ ì²˜ë¦¬ ì•„í‚¤í…ì²˜

### ê³„ì¸µë³„ ì˜¤ë¥˜ ì²˜ë¦¬

```typescript
// ì˜¤ë¥˜ ê³„ì¸µ êµ¬ì¡°
interface ErrorHandlingLayers {
  // 1. Handler Layer - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜¤ë¥˜
  handlerErrors: {
    validationErrors: ValidationError[];
    businessLogicErrors: BusinessLogicError[];
    externalServiceErrors: ExternalServiceError[];
  };
  
  // 2. Store Layer - ë°ì´í„° ì¼ê´€ì„± ì˜¤ë¥˜
  storeErrors: {
    stateValidationErrors: StateValidationError[];
    concurrencyErrors: ConcurrencyError[];
  };
  
  // 3. View Layer - UI ë Œë”ë§ ì˜¤ë¥˜
  viewErrors: {
    renderingErrors: RenderingError[];
    userInteractionErrors: UserInteractionError[];
  };
  
  // 4. System Layer - ì‹œìŠ¤í…œ ìˆ˜ì¤€ ì˜¤ë¥˜
  systemErrors: {
    networkErrors: NetworkError[];
    memoryErrors: MemoryError[];
    configurationErrors: ConfigurationError[];
  };
}
```

### ì˜¤ë¥˜ íƒ€ì… ì •ì˜

```typescript
// ê¸°ë³¸ ì˜¤ë¥˜ ì¸í„°í˜ì´ìŠ¤
interface BaseError {
  code: string;
  message: string;
  timestamp: number;
  severity: 'low' | 'medium' | 'high' | 'critical';
  recoverable: boolean;
  context?: Record<string, any>;
  stackTrace?: string;
}

// ë„ë©”ì¸ íŠ¹í™” ì˜¤ë¥˜ íƒ€ì…ë“¤
export class ValidationError extends Error implements BaseError {
  code = 'VALIDATION_ERROR';
  severity: 'medium' = 'medium';
  recoverable = true;
  timestamp = Date.now();
  
  constructor(
    message: string,
    public field: string,
    public value: any,
    public rule: string,
    public context?: Record<string, any>
  ) {
    super(message);
    this.name = 'ValidationError';
  }
}

export class BusinessLogicError extends Error implements BaseError {
  code: string;
  severity: 'high' = 'high';
  recoverable: boolean;
  timestamp = Date.now();
  
  constructor(
    code: string,
    message: string,
    recoverable = true,
    public context?: Record<string, any>
  ) {
    super(message);
    this.name = 'BusinessLogicError';
    this.code = code;
    this.recoverable = recoverable;
  }
}

export class ExternalServiceError extends Error implements BaseError {
  code = 'EXTERNAL_SERVICE_ERROR';
  severity: 'high' = 'high';
  recoverable = true;
  timestamp = Date.now();
  
  constructor(
    message: string,
    public service: string,
    public statusCode?: number,
    public retryable = true,
    public context?: Record<string, any>
  ) {
    super(message);
    this.name = 'ExternalServiceError';
    this.recoverable = retryable;
  }
}

export class SystemError extends Error implements BaseError {
  code: string;
  severity: 'critical' = 'critical';
  recoverable = false;
  timestamp = Date.now();
  
  constructor(
    code: string,
    message: string,
    public context?: Record<string, any>
  ) {
    super(message);
    this.name = 'SystemError';
    this.code = code;
  }
}
```

## í•¸ë“¤ëŸ¬ ì˜¤ë¥˜ ì²˜ë¦¬

### 1. êµ¬ì¡°í™”ëœ ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´

```typescript
// í¬ê´„ì ì¸ í•¸ë“¤ëŸ¬ ì˜¤ë¥˜ ì²˜ë¦¬
function useRobustUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  const loginHandler = useCallback(async (
    payload: { email: string; password: string },
    controller: ActionController
  ) => {
    const operation = 'user-login';
    const context = { email: payload.email, timestamp: Date.now() };
    
    try {
      // 1ë‹¨ê³„: ì…ë ¥ ê²€ì¦
      await validateLoginInput(payload);
      
      // 2ë‹¨ê³„: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
      await validateBusinessRules(payload);
      
      // 3ë‹¨ê³„: ì™¸ë¶€ ì„œë¹„ìŠ¤ í˜¸ì¶œ
      const authResult = await performAuthentication(payload);
      
      // 4ë‹¨ê³„: ìƒíƒœ ì—…ë°ì´íŠ¸
      await updateUserState(authResult);
      
      return { 
        success: true, 
        user: authResult.user,
        timestamp: Date.now()
      };
      
    } catch (error) {
      return handleLoginError(error, controller, context);
    }
  }, [registry]);
  
  // ì˜¤ë¥˜ ì²˜ë¦¬ ì „ìš© í•¨ìˆ˜
  const handleLoginError = (
    error: unknown,
    controller: ActionController,
    context: Record<string, any>
  ) => {
    // ì˜¤ë¥˜ íƒ€ì…ë³„ ì²˜ë¦¬
    if (error instanceof ValidationError) {
      controller.abort(`ì…ë ¥ ê²€ì¦ ì‹¤íŒ¨: ${error.message}`, {
        type: 'validation',
        field: error.field,
        value: error.value,
        rule: error.rule,
        ...context
      });
      
      return {
        success: false,
        error: 'VALIDATION_FAILED',
        details: {
          field: error.field,
          message: error.message,
          rule: error.rule
        }
      };
    }
    
    if (error instanceof BusinessLogicError) {
      controller.abort(`ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜¤ë¥˜: ${error.message}`, {
        type: 'business-logic',
        code: error.code,
        recoverable: error.recoverable,
        ...context
      });
      
      return {
        success: false,
        error: error.code,
        recoverable: error.recoverable,
        message: error.message
      };
    }
    
    if (error instanceof ExternalServiceError) {
      controller.abort(`ì™¸ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜: ${error.message}`, {
        type: 'external-service',
        service: error.service,
        statusCode: error.statusCode,
        retryable: error.retryable,
        ...context
      });
      
      return {
        success: false,
        error: 'EXTERNAL_SERVICE_ERROR',
        service: error.service,
        retryable: error.retryable,
        statusCode: error.statusCode
      };
    }
    
    // ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜
    const systemError = new SystemError(
      'UNEXPECTED_LOGIN_ERROR',
      error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ë¡œê·¸ì¸ ì˜¤ë¥˜',
      { originalError: error, ...context }
    );
    
    controller.abort(systemError.message, {
      type: 'system',
      code: systemError.code,
      severity: systemError.severity,
      ...context
    });
    
    // ì‹œìŠ¤í…œ ì˜¤ë¥˜ ë¦¬í¬íŒ…
    reportSystemError(systemError);
    
    return {
      success: false,
      error: 'SYSTEM_ERROR',
      message: 'ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
      severity: 'critical'
    };
  };
  
  // í•¸ë“¤ëŸ¬ ë“±ë¡
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('login', loginHandler, {
      id: 'robust-login-handler',
      priority: 100,
      blocking: true,
      onError: (error, context) => {
        // í•¸ë“¤ëŸ¬ ìˆ˜ì¤€ ì˜¤ë¥˜ ì²˜ë¦¬
        console.error('í•¸ë“¤ëŸ¬ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜:', error, context);
        
        // ì‹¬ê°í•œ ì˜¤ë¥˜ëŠ” ì¦‰ì‹œ ë³´ê³ 
        if (error.severity === 'critical') {
          reportCriticalError(error, context);
        }
      }
    });
    
    return unregister;
  }, [register, loginHandler]);
}
```

### 2. ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

```typescript
// ì§€ìˆ˜ ë°±ì˜¤í”„ë¥¼ ì‚¬ìš©í•œ ì¬ì‹œë„ ì‹œìŠ¤í…œ
class RetryManager {
  static async withRetry<T>(
    operation: () => Promise<T>,
    options: {
      maxAttempts?: number;
      baseDelay?: number;
      maxDelay?: number;
      backoffFactor?: number;
      retryCondition?: (error: any) => boolean;
    } = {}
  ): Promise<T> {
    const {
      maxAttempts = 3,
      baseDelay = 1000,
      maxDelay = 10000,
      backoffFactor = 2,
      retryCondition = (error) => error instanceof ExternalServiceError && error.retryable
    } = options;
    
    let lastError: any;
    
    for (let attempt = 1; attempt <= maxAttempts; attempt++) {
      try {
        return await operation();
      } catch (error) {
        lastError = error;
        
        // ì¬ì‹œë„ ì¡°ê±´ í™•ì¸
        if (!retryCondition(error) || attempt === maxAttempts) {
          throw error;
        }
        
        // ì§€ìˆ˜ ë°±ì˜¤í”„ ê³„ì‚°
        const delay = Math.min(baseDelay * Math.pow(backoffFactor, attempt - 1), maxDelay);
        
        console.warn(`ì‘ì—… ì‹¤íŒ¨ (ì‹œë„ ${attempt}/${maxAttempts}), ${delay}ms í›„ ì¬ì‹œë„:`, error);
        
        // ì§€ì—° í›„ ì¬ì‹œë„
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }
    
    throw lastError;
  }
}

// ì¬ì‹œë„ê°€ ì ìš©ëœ í•¸ë“¤ëŸ¬
function useRetryableHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  const updateProfileHandler = useCallback(async (payload, controller) => {
    try {
      const result = await RetryManager.withRetry(
        async () => {
          // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ API í˜¸ì¶œ
          const response = await fetch('/api/user/profile', {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload.data)
          });
          
          if (!response.ok) {
            if (response.status >= 500) {
              throw new ExternalServiceError(
                'ì„œë²„ ì˜¤ë¥˜',
                'user-api',
                response.status,
                true // ì¬ì‹œë„ ê°€ëŠ¥
              );
            } else if (response.status === 429) {
              throw new ExternalServiceError(
                'ìš”ì²­ í•œë„ ì´ˆê³¼',
                'user-api',
                response.status,
                true // ì¬ì‹œë„ ê°€ëŠ¥
              );
            } else {
              throw new ExternalServiceError(
                'í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜',
                'user-api',
                response.status,
                false // ì¬ì‹œë„ ë¶ˆê°€ëŠ¥
              );
            }
          }
          
          return await response.json();
        },
        {
          maxAttempts: 3,
          baseDelay: 1000,
          retryCondition: (error) => 
            error instanceof ExternalServiceError && 
            error.retryable &&
            [429, 500, 502, 503, 504].includes(error.statusCode || 0)
        }
      );
      
      // ì„±ê³µ ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸
      const profileStore = registry.getStore('profile');
      profileStore.setValue(result.profile);
      
      return { success: true, profile: result.profile };
      
    } catch (error) {
      controller.abort('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', { error, retryExhausted: true });
      
      if (error instanceof ExternalServiceError) {
        return {
          success: false,
          error: 'EXTERNAL_SERVICE_ERROR',
          retryable: error.retryable,
          service: error.service
        };
      }
      
      return {
        success: false,
        error: 'UNKNOWN_ERROR',
        message: 'í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
      };
    }
  }, [registry]);
  
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('updateProfile', updateProfileHandler, {
      id: 'retryable-profile-updater',
      priority: 100,
      blocking: true
    });
    
    return unregister;
  }, [register, updateProfileHandler]);
}
```

### 3. íšŒë¡œ ì°¨ë‹¨ê¸° íŒ¨í„´

```typescript
// íšŒë¡œ ì°¨ë‹¨ê¸° êµ¬í˜„
class CircuitBreaker {
  private failures = 0;
  private lastFailureTime = 0;
  private state: 'closed' | 'open' | 'half-open' = 'closed';
  
  constructor(
    private threshold: number = 5,
    private timeout: number = 60000,
    private monitor?: (state: string, error?: any) => void
  ) {}
  
  async execute<T>(operation: () => Promise<T>): Promise<T> {
    if (this.state === 'open') {
      if (Date.now() - this.lastFailureTime < this.timeout) {
        throw new Error('íšŒë¡œ ì°¨ë‹¨ê¸°ê°€ ì—´ë ¤ìˆìŠµë‹ˆë‹¤ (Circuit Breaker Open)');
      } else {
        this.state = 'half-open';
        this.monitor?.('half-open');
      }
    }
    
    try {
      const result = await operation();
      
      // ì„±ê³µ ì‹œ íšŒë¡œ ì¬ì„¤ì •
      if (this.state === 'half-open') {
        this.state = 'closed';
        this.failures = 0;
        this.monitor?.('closed');
      }
      
      return result;
      
    } catch (error) {
      this.failures += 1;
      this.lastFailureTime = Date.now();
      
      if (this.failures >= this.threshold) {
        this.state = 'open';
        this.monitor?.('open', error);
      }
      
      throw error;
    }
  }
  
  getState() {
    return {
      state: this.state,
      failures: this.failures,
      lastFailureTime: this.lastFailureTime
    };
  }
  
  reset() {
    this.state = 'closed';
    this.failures = 0;
    this.lastFailureTime = 0;
    this.monitor?.('reset');
  }
}

// íšŒë¡œ ì°¨ë‹¨ê¸°ê°€ ì ìš©ëœ í•¸ë“¤ëŸ¬
function useCircuitBreakerHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  // ì™¸ë¶€ ì„œë¹„ìŠ¤ë³„ íšŒë¡œ ì°¨ë‹¨ê¸°
  const userApiCircuitBreaker = useMemo(
    () => new CircuitBreaker(3, 30000, (state, error) => {
      console.log(`ì‚¬ìš©ì API íšŒë¡œ ì°¨ë‹¨ê¸° ìƒíƒœ ë³€ê²½: ${state}`, error);
      
      if (state === 'open') {
        // íšŒë¡œê°€ ì—´ë ¸ì„ ë•Œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
        showNotification('ì‚¬ìš©ì ì„œë¹„ìŠ¤ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    }),
    []
  );
  
  const loadUserDataHandler = useCallback(async (payload, controller) => {
    try {
      const result = await userApiCircuitBreaker.execute(async () => {
        const response = await fetch(`/api/users/${payload.userId}`);
        
        if (!response.ok) {
          throw new ExternalServiceError(
            `ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${response.status}`,
            'user-api',
            response.status
          );
        }
        
        return await response.json();
      });
      
      // ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
      const profileStore = registry.getStore('profile');
      profileStore.setValue(result.profile);
      
      return { success: true, user: result };
      
    } catch (error) {
      if (error.message.includes('Circuit Breaker Open')) {
        controller.abort('ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨', {
          type: 'circuit-breaker',
          service: 'user-api',
          state: userApiCircuitBreaker.getState()
        });
        
        return {
          success: false,
          error: 'SERVICE_UNAVAILABLE',
          message: 'ì‚¬ìš©ì ì„œë¹„ìŠ¤ê°€ ì¼ì‹œì ìœ¼ë¡œ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.',
          retryAfter: 30000
        };
      }
      
      throw error;
    }
  }, [registry, userApiCircuitBreaker]);
  
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('loadUserData', loadUserDataHandler, {
      id: 'circuit-breaker-user-loader',
      priority: 100,
      blocking: true
    });
    
    return unregister;
  }, [register, loadUserDataHandler]);
}
```

## React ì»´í¬ë„ŒíŠ¸ ì˜¤ë¥˜ ì²˜ë¦¬

### 1. ì˜¤ë¥˜ ê²½ê³„ êµ¬í˜„

```typescript
// ë„ë©”ì¸ë³„ ì˜¤ë¥˜ ê²½ê³„
interface ErrorBoundaryState {
  hasError: boolean;
  error: Error | null;
  errorInfo: React.ErrorInfo | null;
}

class UserDomainErrorBoundary extends React.Component<
  { children: React.ReactNode; fallback?: React.ComponentType<any> },
  ErrorBoundaryState
> {
  constructor(props) {
    super(props);
    this.state = {
      hasError: false,
      error: null,
      errorInfo: null
    };
  }
  
  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {
    return {
      hasError: true,
      error
    };
  }
  
  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    this.setState({
      error,
      errorInfo
    });
    
    // ì˜¤ë¥˜ ë¦¬í¬íŒ…
    reportComponentError('UserDomain', error, errorInfo);
    
    // ì‹¬ê°ë„ ë¶„ë¥˜
    const severity = this.classifyError(error);
    
    if (severity === 'critical') {
      // ì‹œìŠ¤í…œ ê´€ë¦¬ìì—ê²Œ ì¦‰ì‹œ ì•Œë¦¼
      alertSystemAdministrator(error, errorInfo);
    }
  }
  
  private classifyError(error: Error): 'low' | 'medium' | 'high' | 'critical' {
    if (error.name === 'ChunkLoadError') return 'medium';
    if (error.message.includes('Network Error')) return 'medium';
    if (error.message.includes('Out of memory')) return 'critical';
    if (error.stack?.includes('useState') || error.stack?.includes('useEffect')) return 'high';
    
    return 'medium';
  }
  
  private handleRetry = () => {
    this.setState({
      hasError: false,
      error: null,
      errorInfo: null
    });
  };
  
  private handleReload = () => {
    window.location.reload();
  };
  
  render() {
    if (this.state.hasError) {
      const FallbackComponent = this.props.fallback || DefaultErrorFallback;
      
      return (
        <FallbackComponent
          error={this.state.error}
          errorInfo={this.state.errorInfo}
          onRetry={this.handleRetry}
          onReload={this.handleReload}
        />
      );
    }
    
    return this.props.children;
  }
}

// ê¸°ë³¸ ì˜¤ë¥˜ í´ë°± ì»´í¬ë„ŒíŠ¸
function DefaultErrorFallback({
  error,
  errorInfo,
  onRetry,
  onReload
}: {
  error: Error | null;
  errorInfo: React.ErrorInfo | null;
  onRetry: () => void;
  onReload: () => void;
}) {
  return (
    <div className="error-fallback">
      <div className="error-content">
        <h2>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
        <p>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
        
        <div className="error-details">
          <details>
            <summary>ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­</summary>
            <pre>{error?.message}</pre>
            {process.env.NODE_ENV === 'development' && (
              <pre>{error?.stack}</pre>
            )}
          </details>
        </div>
        
        <div className="error-actions">
          <button onClick={onRetry} className="btn-retry">
            ë‹¤ì‹œ ì‹œë„
          </button>
          <button onClick={onReload} className="btn-reload">
            í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
          </button>
        </div>
      </div>
    </div>
  );
}

// íŠ¹í™”ëœ ì˜¤ë¥˜ í´ë°±ë“¤
function NetworkErrorFallback({ onRetry }: { onRetry: () => void }) {
  return (
    <div className="error-fallback network-error">
      <h3>ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜</h3>
      <p>ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
      <button onClick={onRetry}>ì¬ì—°ê²° ì‹œë„</button>
    </div>
  );
}

function ValidationErrorFallback({ error, onRetry }: { 
  error: ValidationError;
  onRetry: () => void;
}) {
  return (
    <div className="error-fallback validation-error">
      <h3>ì…ë ¥ ì˜¤ë¥˜</h3>
      <p>{error.message}</p>
      <p>í•„ë“œ: {error.field}</p>
      <button onClick={onRetry}>ìˆ˜ì •í•˜ê¸°</button>
    </div>
  );
}
```

### 2. í›… ê¸°ë°˜ ì˜¤ë¥˜ ì²˜ë¦¬

```typescript
// ì „ì—­ ì˜¤ë¥˜ ìƒíƒœ ê´€ë¦¬
interface GlobalErrorState {
  errors: Array<{
    id: string;
    error: BaseError;
    timestamp: number;
    acknowledged: boolean;
  }>;
  criticalErrors: BaseError[];
}

function useGlobalErrorHandler() {
  const [errorState, setErrorState] = useState<GlobalErrorState>({
    errors: [],
    criticalErrors: []
  });
  
  const addError = useCallback((error: BaseError) => {
    const errorEntry = {
      id: generateId(),
      error,
      timestamp: Date.now(),
      acknowledged: false
    };
    
    setErrorState(prev => ({
      ...prev,
      errors: [errorEntry, ...prev.errors.slice(0, 49)], // ìµœëŒ€ 50ê°œ ìœ ì§€
      criticalErrors: error.severity === 'critical' 
        ? [error, ...prev.criticalErrors.slice(0, 9)] // ìµœëŒ€ 10ê°œ ìœ ì§€
        : prev.criticalErrors
    }));
    
    // ì‹¬ê°í•œ ì˜¤ë¥˜ëŠ” ì¦‰ì‹œ ì²˜ë¦¬
    if (error.severity === 'critical') {
      handleCriticalError(error);
    }
    
    // ìë™ ë§Œë£Œ (5ë¶„)
    setTimeout(() => {
      removeError(errorEntry.id);
    }, 5 * 60 * 1000);
    
  }, []);
  
  const removeError = useCallback((id: string) => {
    setErrorState(prev => ({
      ...prev,
      errors: prev.errors.filter(e => e.id !== id)
    }));
  }, []);
  
  const acknowledgeError = useCallback((id: string) => {
    setErrorState(prev => ({
      ...prev,
      errors: prev.errors.map(e => 
        e.id === id ? { ...e, acknowledged: true } : e
      )
    }));
  }, []);
  
  const clearAllErrors = useCallback(() => {
    setErrorState({
      errors: [],
      criticalErrors: []
    });
  }, []);
  
  return {
    errorState,
    addError,
    removeError,
    acknowledgeError,
    clearAllErrors
  };
}

// ì•¡ì…˜ë³„ ì˜¤ë¥˜ ì²˜ë¦¬ í›…
function useActionErrorHandler(actionName: string) {
  const { addError } = useGlobalErrorHandler();
  const [localError, setLocalError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  
  const dispatch = useUserAction();
  
  const executeAction = useCallback(async (payload: any) => {
    setIsLoading(true);
    setLocalError(null);
    
    try {
      const result = await dispatch(actionName, payload);
      
      if (!result.success) {
        const error = new BusinessLogicError(
          result.error || 'UNKNOWN_ERROR',
          result.message || 'ì‘ì—… ì‹¤í–‰ ì‹¤íŒ¨',
          result.recoverable !== false
        );
        
        addError(error);
        setLocalError(result.message || 'ì‘ì—… ì‹¤í–‰ ì‹¤íŒ¨');
      }
      
      return result;
      
    } catch (error) {
      const handledError = error instanceof Error 
        ? new SystemError('ACTION_EXECUTION_ERROR', error.message)
        : new SystemError('UNKNOWN_ACTION_ERROR', 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ');
      
      addError(handledError);
      setLocalError(handledError.message);
      
      throw handledError;
    } finally {
      setIsLoading(false);
    }
  }, [actionName, dispatch, addError]);
  
  const clearLocalError = useCallback(() => {
    setLocalError(null);
  }, []);
  
  return {
    executeAction,
    localError,
    isLoading,
    clearLocalError
  };
}

// ì‚¬ìš©ë²• ì˜ˆì‹œ
function UserProfileForm() {
  const { executeAction, localError, isLoading, clearLocalError } = useActionErrorHandler('updateProfile');
  const [formData, setFormData] = useState({ name: '', email: '' });
  
  const handleSubmit = useCallback(async (e: React.FormEvent) => {
    e.preventDefault();
    
    try {
      await executeAction({ data: formData });
      // ì„±ê³µ ì²˜ë¦¬
      showSuccessMessage('í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } catch (error) {
      // ì˜¤ë¥˜ëŠ” ì´ë¯¸ useActionErrorHandlerì—ì„œ ì²˜ë¦¬ë¨
      console.error('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
    }
  }, [executeAction, formData]);
  
  return (
    <form onSubmit={handleSubmit}>
      {localError && (
        <div className="error-message">
          {localError}
          <button onClick={clearLocalError}>Ã—</button>
        </div>
      )}
      
      <input
        value={formData.name}
        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
        placeholder="ì´ë¦„"
      />
      
      <input
        value={formData.email}
        onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}
        placeholder="ì´ë©”ì¼"
        type="email"
      />
      
      <button type="submit" disabled={isLoading}>
        {isLoading ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}
      </button>
    </form>
  );
}
```

## ëª¨ë‹ˆí„°ë§ê³¼ ë¦¬í¬íŒ…

### 1. ì˜¤ë¥˜ ìˆ˜ì§‘ê³¼ ë¶„ì„

```typescript
// ì˜¤ë¥˜ ìˆ˜ì§‘ê¸°
class ErrorCollector {
  private static instance: ErrorCollector;
  private errors: BaseError[] = [];
  private reportingEndpoint = '/api/errors';
  
  static getInstance() {
    if (!this.instance) {
      this.instance = new ErrorCollector();
    }
    return this.instance;
  }
  
  collect(error: BaseError, context?: Record<string, any>) {
    const enrichedError = {
      ...error,
      context: {
        ...error.context,
        ...context,
        userAgent: navigator.userAgent,
        url: window.location.href,
        timestamp: Date.now(),
        sessionId: getSessionId()
      }
    };
    
    this.errors.push(enrichedError);
    
    // ì¦‰ì‹œ ë³´ê³ ê°€ í•„ìš”í•œ ì˜¤ë¥˜ë“¤
    if (error.severity === 'critical' || this.shouldReportImmediately(error)) {
      this.reportImmediately(enrichedError);
    }
    
    // ë°°ì¹˜ ë³´ê³  (ìµœëŒ€ 10ê°œ ë˜ëŠ” 5ë¶„ë§ˆë‹¤)
    if (this.errors.length >= 10) {
      this.flushErrors();
    }
  }
  
  private shouldReportImmediately(error: BaseError): boolean {
    return (
      error.code === 'AUTHENTICATION_FAILURE' ||
      error.code === 'SECURITY_VIOLATION' ||
      error.code === 'DATA_CORRUPTION' ||
      error.severity === 'high'
    );
  }
  
  private async reportImmediately(error: BaseError) {
    try {
      await fetch(this.reportingEndpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          errors: [error],
          immediate: true,
          priority: 'high'
        })
      });
    } catch (reportingError) {
      console.error('ì¦‰ì‹œ ì˜¤ë¥˜ ë³´ê³  ì‹¤íŒ¨:', reportingError);
    }
  }
  
  private async flushErrors() {
    if (this.errors.length === 0) return;
    
    const errorsToReport = [...this.errors];
    this.errors = [];
    
    try {
      await fetch(this.reportingEndpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          errors: errorsToReport,
          immediate: false,
          priority: 'normal'
        })
      });
    } catch (reportingError) {
      console.error('ë°°ì¹˜ ì˜¤ë¥˜ ë³´ê³  ì‹¤íŒ¨:', reportingError);
      // ì‹¤íŒ¨í•œ ì˜¤ë¥˜ë“¤ì„ ë‹¤ì‹œ íì— ì¶”ê°€
      this.errors.unshift(...errorsToReport);
    }
  }
  
  // ì£¼ê¸°ì  í”ŒëŸ¬ì‹œ ì„¤ì •
  startPeriodicFlush(interval = 5 * 60 * 1000) { // 5ë¶„
    setInterval(() => {
      this.flushErrors();
    }, interval);
  }
}

// ì „ì—­ ì˜¤ë¥˜ ìˆ˜ì§‘ ì„¤ì •
function setupGlobalErrorCollection() {
  const collector = ErrorCollector.getInstance();
  collector.startPeriodicFlush();
  
  // ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€
  window.addEventListener('unhandledrejection', (event) => {
    const error = new SystemError(
      'UNHANDLED_PROMISE_REJECTION',
      event.reason?.message || 'ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€',
      { reason: event.reason }
    );
    
    collector.collect(error);
  });
  
  // ì „ì—­ JavaScript ì˜¤ë¥˜
  window.addEventListener('error', (event) => {
    const error = new SystemError(
      'GLOBAL_JAVASCRIPT_ERROR',
      event.message,
      {
        filename: event.filename,
        lineno: event.lineno,
        colno: event.colno,
        stack: event.error?.stack
      }
    );
    
    collector.collect(error);
  });
}
```

### 2. ì„±ëŠ¥ ì˜í–¥ ëª¨ë‹ˆí„°ë§

```typescript
// ì˜¤ë¥˜ê°€ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ì¶”ì 
interface PerformanceImpact {
  errorType: string;
  performanceMetrics: {
    renderTime: number;
    handlerExecutionTime: number;
    memoryUsage: number;
    userInteractionDelay: number;
  };
  userExperienceMetrics: {
    taskCompletionRate: number;
    userSatisfactionScore: number;
    bounceRate: number;
  };
}

class ErrorPerformanceMonitor {
  private impacts: PerformanceImpact[] = [];
  
  recordErrorImpact(error: BaseError, metrics: Partial<PerformanceImpact>) {
    const impact: PerformanceImpact = {
      errorType: error.code,
      performanceMetrics: {
        renderTime: 0,
        handlerExecutionTime: 0,
        memoryUsage: 0,
        userInteractionDelay: 0,
        ...metrics.performanceMetrics
      },
      userExperienceMetrics: {
        taskCompletionRate: 1,
        userSatisfactionScore: 5,
        bounceRate: 0,
        ...metrics.userExperienceMetrics
      }
    };
    
    this.impacts.push(impact);
    
    // ì„±ëŠ¥ ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼
    this.checkPerformanceThresholds(impact);
  }
  
  private checkPerformanceThresholds(impact: PerformanceImpact) {
    const thresholds = {
      renderTime: 100, // ms
      handlerExecutionTime: 1000, // ms
      memoryUsage: 50, // MB
      userInteractionDelay: 200, // ms
      taskCompletionRate: 0.8, // 80%
      userSatisfactionScore: 3, // 1-5 scale
      bounceRate: 0.3 // 30%
    };
    
    const violations: string[] = [];
    
    Object.entries(thresholds).forEach(([metric, threshold]) => {
      const value = impact.performanceMetrics[metric] || impact.userExperienceMetrics[metric];
      
      if (
        (metric === 'taskCompletionRate' || metric === 'userSatisfactionScore') ? 
        value < threshold : 
        value > threshold
      ) {
        violations.push(`${metric}: ${value}`);
      }
    });
    
    if (violations.length > 0) {
      console.warn(`ì„±ëŠ¥ ì„ê³„ê°’ ì´ˆê³¼ (ì˜¤ë¥˜: ${impact.errorType}):`, violations);
      
      // ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ ì‹œ ì•Œë¦¼
      if (violations.length >= 3) {
        reportPerformanceDegradation(impact, violations);
      }
    }
  }
  
  getErrorPerformanceReport() {
    const groupedByType = this.impacts.reduce((acc, impact) => {
      if (!acc[impact.errorType]) {
        acc[impact.errorType] = [];
      }
      acc[impact.errorType].push(impact);
      return acc;
    }, {} as Record<string, PerformanceImpact[]>);
    
    return Object.entries(groupedByType).map(([errorType, impacts]) => {
      const avgPerformance = this.calculateAverageMetrics(impacts.map(i => i.performanceMetrics));
      const avgUserExperience = this.calculateAverageMetrics(impacts.map(i => i.userExperienceMetrics));
      
      return {
        errorType,
        frequency: impacts.length,
        averagePerformanceImpact: avgPerformance,
        averageUserExperienceImpact: avgUserExperience,
        severity: this.calculateSeverity(avgPerformance, avgUserExperience)
      };
    });
  }
  
  private calculateAverageMetrics(metricsList: any[]) {
    const keys = Object.keys(metricsList[0] || {});
    const averages = {};
    
    keys.forEach(key => {
      const sum = metricsList.reduce((acc, metrics) => acc + (metrics[key] || 0), 0);
      averages[key] = sum / metricsList.length;
    });
    
    return averages;
  }
  
  private calculateSeverity(perfMetrics: any, uxMetrics: any): 'low' | 'medium' | 'high' {
    const perfScore = (perfMetrics.renderTime > 100 ? 1 : 0) +
                     (perfMetrics.handlerExecutionTime > 1000 ? 1 : 0) +
                     (perfMetrics.memoryUsage > 50 ? 1 : 0);
    
    const uxScore = (uxMetrics.taskCompletionRate < 0.8 ? 1 : 0) +
                   (uxMetrics.userSatisfactionScore < 3 ? 1 : 0) +
                   (uxMetrics.bounceRate > 0.3 ? 1 : 0);
    
    const totalScore = perfScore + uxScore;
    
    if (totalScore >= 4) return 'high';
    if (totalScore >= 2) return 'medium';
    return 'low';
  }
}
```

## ë³µêµ¬ ì „ëµ

### 1. ìë™ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜

```typescript
// ìë™ ë³µêµ¬ ê´€ë¦¬ì
class RecoveryManager {
  private recoveryStrategies = new Map<string, (error: BaseError) => Promise<boolean>>();
  
  registerRecoveryStrategy(errorCode: string, strategy: (error: BaseError) => Promise<boolean>) {
    this.recoveryStrategies.set(errorCode, strategy);
  }
  
  async attemptRecovery(error: BaseError): Promise<boolean> {
    const strategy = this.recoveryStrategies.get(error.code);
    
    if (!strategy) {
      console.warn(`ë³µêµ¬ ì „ëµì´ ì—†ìŠµë‹ˆë‹¤: ${error.code}`);
      return false;
    }
    
    try {
      console.log(`ë³µêµ¬ ì‹œë„ ì¤‘: ${error.code}`);
      const recovered = await strategy(error);
      
      if (recovered) {
        console.log(`ë³µêµ¬ ì„±ê³µ: ${error.code}`);
        reportRecoverySuccess(error);
      } else {
        console.warn(`ë³µêµ¬ ì‹¤íŒ¨: ${error.code}`);
        reportRecoveryFailure(error);
      }
      
      return recovered;
    } catch (recoveryError) {
      console.error(`ë³µêµ¬ ì „ëµ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:`, recoveryError);
      reportRecoveryError(error, recoveryError);
      return false;
    }
  }
}

// ë³µêµ¬ ì „ëµë“¤
const recoveryManager = new RecoveryManager();

// ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë³µêµ¬
recoveryManager.registerRecoveryStrategy('NETWORK_ERROR', async (error) => {
  // ì—°ê²° ìƒíƒœ í™•ì¸
  if (!navigator.onLine) {
    return false; // ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œëŠ” ë³µêµ¬ ë¶ˆê°€ëŠ¥
  }
  
  // ê°„ë‹¨í•œ ping í…ŒìŠ¤íŠ¸
  try {
    const response = await fetch('/api/health', { 
      method: 'HEAD',
      cache: 'no-cache'
    });
    return response.ok;
  } catch {
    return false;
  }
});

// ì¸ì¦ ì˜¤ë¥˜ ë³µêµ¬
recoveryManager.registerRecoveryStrategy('AUTHENTICATION_ERROR', async (error) => {
  try {
    // í† í° ê°±ì‹  ì‹œë„
    const refreshResponse = await fetch('/api/auth/refresh', {
      method: 'POST',
      credentials: 'include'
    });
    
    if (refreshResponse.ok) {
      const newTokens = await refreshResponse.json();
      // ìƒˆ í† í°ìœ¼ë¡œ ì—…ë°ì´íŠ¸
      localStorage.setItem('accessToken', newTokens.accessToken);
      return true;
    }
  } catch (refreshError) {
    console.error('í† í° ê°±ì‹  ì‹¤íŒ¨:', refreshError);
  }
  
  // ê°±ì‹  ì‹¤íŒ¨ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  window.location.href = '/login';
  return false;
});

// ìƒíƒœ ë¶ˆì¼ì¹˜ ë³µêµ¬
recoveryManager.registerRecoveryStrategy('STATE_INCONSISTENCY', async (error) => {
  try {
    // ì„œë²„ì—ì„œ ìµœì‹  ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
    const response = await fetch('/api/user/current');
    const latestUserData = await response.json();
    
    // ë¡œì»¬ ìƒíƒœ ì¬ì„¤ì •
    const userStore = getUserStore();
    userStore.setValue(latestUserData);
    
    return true;
  } catch (syncError) {
    console.error('ìƒíƒœ ë™ê¸°í™” ì‹¤íŒ¨:', syncError);
    return false;
  }
});

// ë©”ëª¨ë¦¬ ë¶€ì¡± ë³µêµ¬
recoveryManager.registerRecoveryStrategy('OUT_OF_MEMORY', async (error) => {
  try {
    // ìºì‹œ ì •ë¦¬
    clearApplicationCaches();
    
    // ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ê°•ì œ ì‹¤í–‰ (ê°€ëŠ¥í•œ ê²½ìš°)
    if (window.gc) {
      window.gc();
    }
    
    // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¬í™•ì¸
    if ('memory' in performance) {
      const memory = (performance as any).memory;
      const usedMB = memory.usedJSHeapSize / 1024 / 1024;
      
      return usedMB < 100; // 100MB ë¯¸ë§Œìœ¼ë¡œ ê°ì†Œí–ˆëŠ”ì§€ í™•ì¸
    }
    
    return true;
  } catch (cleanupError) {
    console.error('ë©”ëª¨ë¦¬ ì •ë¦¬ ì‹¤íŒ¨:', cleanupError);
    return false;
  }
});
```

### 2. ìš°ì•„í•œ ì„±ëŠ¥ ì €í•˜

```typescript
// ì„±ëŠ¥ ì €í•˜ ê´€ë¦¬ì
class GracefulDegradationManager {
  private currentMode: 'normal' | 'degraded' | 'minimal' = 'normal';
  private degradationTriggers: Array<{
    condition: () => boolean;
    mode: 'degraded' | 'minimal';
    description: string;
  }> = [];
  
  addDegradationTrigger(
    condition: () => boolean,
    mode: 'degraded' | 'minimal',
    description: string
  ) {
    this.degradationTriggers.push({ condition, mode, description });
  }
  
  checkDegradationConditions() {
    let targetMode: 'normal' | 'degraded' | 'minimal' = 'normal';
    let triggerDescription = '';
    
    for (const trigger of this.degradationTriggers) {
      if (trigger.condition()) {
        if (trigger.mode === 'minimal' || targetMode === 'normal') {
          targetMode = trigger.mode;
          triggerDescription = trigger.description;
        }
      }
    }
    
    if (targetMode !== this.currentMode) {
      this.switchMode(targetMode, triggerDescription);
    }
  }
  
  private switchMode(mode: 'normal' | 'degraded' | 'minimal', reason: string) {
    console.log(`ì„±ëŠ¥ ëª¨ë“œ ë³€ê²½: ${this.currentMode} â†’ ${mode} (ì´ìœ : ${reason})`);
    
    this.currentMode = mode;
    
    // ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëª¨ë“œ ë³€ê²½ ì•Œë¦¼
    window.dispatchEvent(new CustomEvent('performance-mode-change', {
      detail: { mode, reason }
    }));
    
    // UI ì•Œë¦¼
    if (mode !== 'normal') {
      showNotification(
        `ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë©ë‹ˆë‹¤. (ì´ìœ : ${reason})`,
        'warning'
      );
    }
  }
  
  getCurrentMode() {
    return this.currentMode;
  }
  
  isNormalMode() {
    return this.currentMode === 'normal';
  }
  
  isDegradedMode() {
    return this.currentMode === 'degraded';
  }
  
  isMinimalMode() {
    return this.currentMode === 'minimal';
  }
}

// ì„±ëŠ¥ ì €í•˜ ì¡°ê±´ë“¤
const degradationManager = new GracefulDegradationManager();

// ë©”ëª¨ë¦¬ ë¶€ì¡±
degradationManager.addDegradationTrigger(
  () => {
    if ('memory' in performance) {
      const memory = (performance as any).memory;
      return memory.usedJSHeapSize / memory.jsHeapSizeLimit > 0.8;
    }
    return false;
  },
  'degraded',
  'ë©”ëª¨ë¦¬ ë¶€ì¡±'
);

// ë„¤íŠ¸ì›Œí¬ ì†ë„ ì €í•˜
degradationManager.addDegradationTrigger(
  () => {
    const connection = (navigator as any).connection;
    return connection && (
      connection.effectiveType === 'slow-2g' || 
      connection.effectiveType === '2g'
    );
  },
  'minimal',
  'ë„¤íŠ¸ì›Œí¬ ì†ë„ ì €í•˜'
);

// ì˜¤ë¥˜ ë°œìƒë¥  ë†’ìŒ
let errorCount = 0;
let lastErrorReset = Date.now();

degradationManager.addDegradationTrigger(
  () => {
    const now = Date.now();
    
    // 1ë¶„ë§ˆë‹¤ ì˜¤ë¥˜ íšŸìˆ˜ ë¦¬ì…‹
    if (now - lastErrorReset > 60000) {
      errorCount = 0;
      lastErrorReset = now;
    }
    
    // ë¶„ë‹¹ 5ê°œ ì´ìƒì˜ ì˜¤ë¥˜
    return errorCount > 5;
  },
  'degraded',
  'ë†’ì€ ì˜¤ë¥˜ ë°œìƒë¥ '
);

// ì£¼ê¸°ì  ì„±ëŠ¥ ëª¨ë“œ ì²´í¬
setInterval(() => {
  degradationManager.checkDegradationConditions();
}, 10000); // 10ì´ˆë§ˆë‹¤

// ì„±ëŠ¥ ëª¨ë“œì— ë”°ë¥¸ ì»´í¬ë„ŒíŠ¸ ë™ì‘
function PerformanceAwareComponent() {
  const [performanceMode, setPerformanceMode] = useState(degradationManager.getCurrentMode());
  
  useEffect(() => {
    const handleModeChange = (event: CustomEvent) => {
      setPerformanceMode(event.detail.mode);
    };
    
    window.addEventListener('performance-mode-change', handleModeChange as EventListener);
    return () => window.removeEventListener('performance-mode-change', handleModeChange as EventListener);
  }, []);
  
  // ì„±ëŠ¥ ëª¨ë“œì— ë”°ë¥¸ ë Œë”ë§
  if (degradationManager.isMinimalMode()) {
    return <MinimalModeComponent />;
  }
  
  if (degradationManager.isDegradedMode()) {
    return <DegradedModeComponent />;
  }
  
  return <FullFeatureComponent />;
}
```

---

## ëª¨ë²” ì‚¬ë¡€ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ì˜¤ë¥˜ ë¶„ë¥˜ì™€ ì²˜ë¦¬
- [ ] ì˜¤ë¥˜ íƒ€ì…ë³„ ì ì ˆí•œ ì²˜ë¦¬ ì „ëµ
- [ ] ì‹¬ê°ë„ ë¶„ë¥˜ì™€ ìš°ì„ ìˆœìœ„ ì„¤ì •
- [ ] ë³µêµ¬ ê°€ëŠ¥ì„±ì— ë”°ë¥¸ ë¶„ë¥˜
- [ ] ì‚¬ìš©ì ì¹œí™”ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€

### âœ… í•¸ë“¤ëŸ¬ ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] êµ¬ì¡°í™”ëœ ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´
- [ ] ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„
- [ ] íšŒë¡œ ì°¨ë‹¨ê¸° íŒ¨í„´ ì ìš©
- [ ] ì ì ˆí•œ ì˜¤ë¥˜ ë¡œê¹…

### âœ… UI ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] ì˜¤ë¥˜ ê²½ê³„ êµ¬í˜„
- [ ] í´ë°± ì»´í¬ë„ŒíŠ¸ ì œê³µ
- [ ] ì‚¬ìš©ì ì•¡ì…˜ë³„ ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] ë¡œë”©ê³¼ ì˜¤ë¥˜ ìƒíƒœ ê´€ë¦¬

### âœ… ëª¨ë‹ˆí„°ë§ê³¼ ë¦¬í¬íŒ…
- [ ] ì˜¤ë¥˜ ìˆ˜ì§‘ê³¼ ë¶„ì„
- [ ] ì„±ëŠ¥ ì˜í–¥ ì¶”ì 
- [ ] ìë™ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] ì˜¤ë¥˜ íŠ¸ë Œë“œ ë¶„ì„

### âœ… ë³µêµ¬ì™€ ì„±ëŠ¥ ì €í•˜
- [ ] ìë™ ë³µêµ¬ ì „ëµ
- [ ] ìš°ì•„í•œ ì„±ëŠ¥ ì €í•˜
- [ ] ìƒíƒœ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜
- [ ] ì‚¬ìš©ì ê²½í—˜ ë³´í˜¸

---

## ìš”ì•½

íš¨ê³¼ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ë‹¤ìŒ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

- **ì˜ˆë°© ìš°ì„ ** - ì˜¤ë¥˜ ë°œìƒì„ ë¯¸ë¦¬ ë°©ì§€
- **ë¹ ë¥¸ ê°ì§€** - ì˜¤ë¥˜ë¥¼ ì¦‰ì‹œ ì¸ì‹í•˜ê³  ë¶„ë¥˜
- **ìë™ ë³µêµ¬** - ê°€ëŠ¥í•œ ê²½ìš° ìë™ìœ¼ë¡œ ë³µêµ¬ ì‹œë„
- **ì‚¬ìš©ì ê²½í—˜ ë³´í˜¸** - ì˜¤ë¥˜ê°€ ì‚¬ìš©ìì—ê²Œ ë¯¸ì¹˜ëŠ” ì˜í–¥ ìµœì†Œí™”
- **ì§€ì†ì ì¸ ê°œì„ ** - ì˜¤ë¥˜ íŒ¨í„´ ë¶„ì„ìœ¼ë¡œ ì‹œìŠ¤í…œ ê°œì„ 

ì²´ê³„ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í†µí•´ ì•ˆì •ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [ê³µí†µ í•¨ì •](./common-pitfalls) - ì˜¤ë¥˜ ì²˜ë¦¬ ì‹œ í”íˆ í•˜ëŠ” ì‹¤ìˆ˜ë“¤
- [ëª¨ë²” ì‚¬ë¡€](./best-practices) - í”„ë¡œë•ì…˜ í™˜ê²½ ì˜¤ë¥˜ ì²˜ë¦¬ ê¶Œì¥ì‚¬í•­
:::

---


# Guide Handler Id Strategies

**Source**: `guide/handler-id-strategies.md`  
**Priority**: 80 (essential)  

# í•¸ë“¤ëŸ¬ ID ì „ëµ

í•¸ë“¤ëŸ¬ IDëŠ” Context-Action í”„ë ˆì„ì›Œí¬ì—ì„œ í•¸ë“¤ëŸ¬ë¥¼ ì‹ë³„í•˜ê³  ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. íš¨ê³¼ì ì¸ ID ì „ëµì€ ë””ë²„ê¹…, ëª¨ë‹ˆí„°ë§, ê·¸ë¦¬ê³  í•¸ë“¤ëŸ¬ ê´€ë¦¬ë¥¼ í¬ê²Œ ê°œì„ í•©ë‹ˆë‹¤.

## í•¸ë“¤ëŸ¬ ID ê¸°ë³¸ ê°œë…

### ìë™ ìƒì„± vs ëª…ì‹œì  ID

```typescript
// ìë™ ìƒì„± ID (ê¸°ë³¸ê°’)
register('updateProfile', handler, {
  priority: 100,
  blocking: true
  // id ì—†ìŒ - í”„ë ˆì„ì›Œí¬ê°€ ìë™ ìƒì„±
});

// ëª…ì‹œì  ID (ê¶Œì¥)
register('updateProfile', handler, {
  priority: 100,
  blocking: true,
  id: 'profile-updater' // ëª…ì‹œì  ID ì§€ì •
});
```

### ID ìƒì„± ê·œì¹™

í”„ë ˆì„ì›Œí¬ëŠ” ë‹¤ìŒ ìˆœì„œë¡œ IDë¥¼ ê²°ì •í•©ë‹ˆë‹¤:

1. **ëª…ì‹œì  ID**: ì‚¬ìš©ìê°€ ì œê³µí•œ `id` ê°’
2. **ìë™ ìƒì„±**: `{ì•¡ì…˜ëª…}-{í•¸ë“¤ëŸ¬ë²ˆí˜¸}` í˜•ì‹

```typescript
// ëª…ì‹œì  ID ì˜ˆì‹œ
register('login', loginHandler, { 
  id: 'user-authentication-handler' 
});

// ìë™ ìƒì„± ID ì˜ˆì‹œ (login-1, login-2, ...)
register('login', validationHandler);
register('login', mainHandler);
```

## ID ëª…ëª… ê·œì¹™

### 1. ì¼ê´€ëœ ëª…ëª… ì»¨ë²¤ì…˜

```typescript
// âœ… ê¶Œì¥: ë„ë©”ì¸-ê¸°ëŠ¥-ì—­í•  íŒ¨í„´
register('updateProfile', handler, { 
  id: 'user-profile-updater' 
});

register('validateProfile', handler, { 
  id: 'user-profile-validator' 
});

register('logProfileUpdate', handler, { 
  id: 'user-profile-logger' 
});

// âœ… ê¶Œì¥: ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í™”
register('login', authHandler, { 
  id: 'auth-login-main' 
});

register('login', auditHandler, { 
  id: 'audit-login-tracker' 
});

register('login', metricsHandler, { 
  id: 'metrics-login-counter' 
});
```

### 2. ê³„ì¸µì  ëª…ëª… êµ¬ì¡°

```typescript
// ê³„ì¸µì  êµ¬ì¡°ë¡œ í•¸ë“¤ëŸ¬ ì¡°ì§í™”
const HandlerIds = {
  User: {
    Auth: {
      LOGIN_MAIN: 'user-auth-login-main',
      LOGIN_VALIDATOR: 'user-auth-login-validator',
      LOGOUT_MAIN: 'user-auth-logout-main'
    },
    Profile: {
      UPDATE_MAIN: 'user-profile-update-main',
      UPDATE_VALIDATOR: 'user-profile-update-validator',
      DELETE_MAIN: 'user-profile-delete-main'
    }
  },
  Cart: {
    Items: {
      ADD_MAIN: 'cart-items-add-main',
      REMOVE_MAIN: 'cart-items-remove-main',
      UPDATE_QUANTITY: 'cart-items-update-quantity'
    }
  }
} as const;

// ì‚¬ìš©ë²•
register('login', loginHandler, { 
  id: HandlerIds.User.Auth.LOGIN_MAIN,
  priority: 100 
});

register('updateProfile', updateHandler, { 
  id: HandlerIds.User.Profile.UPDATE_MAIN,
  priority: 100 
});
```

### 3. í™˜ê²½ë³„ ID ì „ëµ

```typescript
// í™˜ê²½ë³„ ID ì ‘ë‘ì‚¬
const getHandlerId = (baseId: string, environment?: string) => {
  const env = environment || process.env.NODE_ENV || 'development';
  return `${env}-${baseId}`;
};

// ê°œë°œ í™˜ê²½: dev-user-profile-updater
// í”„ë¡œë•ì…˜: prod-user-profile-updater
register('updateProfile', handler, {
  id: getHandlerId('user-profile-updater'),
  priority: 100
});
```

## ê³ ê¸‰ ID íŒ¨í„´

### 1. ë™ì  ID ìƒì„±

```typescript
// ì‚¬ìš©ìë³„ ë™ì  í•¸ë“¤ëŸ¬
function createUserSpecificHandler(userId: string) {
  const handlerId = `user-${userId}-profile-updater`;
  
  return {
    id: handlerId,
    handler: async (payload, controller) => {
      // íŠ¹ì • ì‚¬ìš©ìë¥¼ ìœ„í•œ ë¡œì§
      console.log(`Processing for user ${userId}`);
      // ...
    }
  };
}

// ë“±ë¡
function useUserSpecificHandlers(userId: string) {
  const register = useUserActionRegister();
  
  useEffect(() => {
    if (!register || !userId) return;
    
    const { id, handler } = createUserSpecificHandler(userId);
    const unregister = register('updateProfile', handler, {
      id,
      priority: 100,
      tags: ['user-specific', userId]
    });
    
    return unregister;
  }, [register, userId]);
}
```

### 2. ë²„ì „ ê´€ë¦¬ ID

```typescript
// í•¸ë“¤ëŸ¬ ë²„ì „ ê´€ë¦¬
const HandlerVersions = {
  PROFILE_UPDATER_V1: 'user-profile-updater-v1',
  PROFILE_UPDATER_V2: 'user-profile-updater-v2',
  PROFILE_UPDATER_CURRENT: 'user-profile-updater-v2' // í˜„ì¬ ë²„ì „
} as const;

// ë²„ì „ë³„ í•¸ë“¤ëŸ¬ ë“±ë¡
register('updateProfile', legacyHandler, {
  id: HandlerVersions.PROFILE_UPDATER_V1,
  priority: 90,
  deprecated: true
});

register('updateProfile', newHandler, {
  id: HandlerVersions.PROFILE_UPDATER_V2,
  priority: 100,
  version: '2.0.0'
});

// ê¸°ëŠ¥ í”Œë˜ê·¸ì™€ ê²°í•©
const useVersionedHandler = (useV2: boolean) => {
  const handlerId = useV2 
    ? HandlerVersions.PROFILE_UPDATER_V2 
    : HandlerVersions.PROFILE_UPDATER_V1;
    
  register('updateProfile', 
    useV2 ? newHandler : legacyHandler, 
    { id: handlerId, priority: 100 }
  );
};
```

### 3. ì¡°ê±´ë¶€ í•¸ë“¤ëŸ¬ ID

```typescript
// ì¡°ê±´ì— ë”°ë¥¸ ë‹¤ë¥¸ í•¸ë“¤ëŸ¬
function useConditionalHandlers(userRole: 'admin' | 'user' | 'guest') {
  const register = useUserActionRegister();
  
  useEffect(() => {
    if (!register) return;
    
    const unregisterFunctions: Array<() => void> = [];
    
    // ê¸°ë³¸ í•¸ë“¤ëŸ¬ (ëª¨ë“  ì—­í• )
    unregisterFunctions.push(
      register('updateProfile', baseHandler, {
        id: `profile-updater-${userRole}`,
        priority: 100
      })
    );
    
    // ê´€ë¦¬ì ì „ìš© í•¸ë“¤ëŸ¬
    if (userRole === 'admin') {
      unregisterFunctions.push(
        register('updateProfile', adminAuditHandler, {
          id: 'profile-updater-admin-audit',
          priority: 150
        })
      );
    }
    
    // ì¼ë°˜ ì‚¬ìš©ì ì „ìš© í•¸ë“¤ëŸ¬
    if (userRole === 'user') {
      unregisterFunctions.push(
        register('updateProfile', userValidationHandler, {
          id: 'profile-updater-user-validation',
          priority: 110
        })
      );
    }
    
    return () => {
      unregisterFunctions.forEach(unregister => unregister());
    };
  }, [register, userRole]);
}
```

## í•¸ë“¤ëŸ¬ ë°œê²¬ê³¼ ê´€ë¦¬

### 1. í•¸ë“¤ëŸ¬ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¡°íšŒ

```typescript
// ë“±ë¡ëœ í•¸ë“¤ëŸ¬ ì •ë³´ ì¡°íšŒ
function useHandlerInspector() {
  const registry = useUserActionRegister();
  
  const getHandlerInfo = useCallback((actionName: string) => {
    if (!registry) return [];
    
    // íŠ¹ì • ì•¡ì…˜ì˜ ëª¨ë“  í•¸ë“¤ëŸ¬ ì •ë³´ ì¡°íšŒ
    return registry.getHandlers(actionName).map(handler => ({
      id: handler.id,
      priority: handler.priority,
      blocking: handler.blocking,
      tags: handler.tags,
      category: handler.category
    }));
  }, [registry]);
  
  const getAllHandlers = useCallback(() => {
    if (!registry) return {};
    
    // ëª¨ë“  ë“±ë¡ëœ í•¸ë“¤ëŸ¬ ì •ë³´
    return registry.getAllHandlers();
  }, [registry]);
  
  return { getHandlerInfo, getAllHandlers };
}

// ì‚¬ìš©ë²•
function HandlerDebugPanel() {
  const { getHandlerInfo, getAllHandlers } = useHandlerInspector();
  const [selectedAction, setSelectedAction] = useState('updateProfile');
  
  const handlers = getHandlerInfo(selectedAction);
  const allHandlers = getAllHandlers();
  
  return (
    <div>
      <h3>í•¸ë“¤ëŸ¬ ê²€ì‚¬ê¸°</h3>
      
      <select 
        value={selectedAction} 
        onChange={(e) => setSelectedAction(e.target.value)}
      >
        {Object.keys(allHandlers).map(action => (
          <option key={action} value={action}>{action}</option>
        ))}
      </select>
      
      <div>
        <h4>{selectedAction} í•¸ë“¤ëŸ¬ë“¤:</h4>
        {handlers.map(handler => (
          <div key={handler.id}>
            <strong>{handler.id}</strong> 
            (ìš°ì„ ìˆœìœ„: {handler.priority}, 
             ë¸”ë¡œí‚¹: {handler.blocking ? 'Yes' : 'No'})
          </div>
        ))}
      </div>
    </div>
  );
}
```

### 2. í•¸ë“¤ëŸ¬ íƒœê¹… ì‹œìŠ¤í…œ

```typescript
// íƒœê·¸ ê¸°ë°˜ í•¸ë“¤ëŸ¬ ë¶„ë¥˜
const HandlerTags = {
  BUSINESS_LOGIC: 'business-logic',
  VALIDATION: 'validation',
  AUDIT: 'audit',
  METRICS: 'metrics',
  CACHE: 'cache',
  NOTIFICATION: 'notification'
} as const;

// íƒœê·¸ì™€ í•¨ê»˜ í•¸ë“¤ëŸ¬ ë“±ë¡
register('updateProfile', validationHandler, {
  id: 'profile-validation',
  priority: 200,
  tags: [HandlerTags.VALIDATION, 'user-input'],
  category: 'validation'
});

register('updateProfile', businessHandler, {
  id: 'profile-business',
  priority: 100,
  tags: [HandlerTags.BUSINESS_LOGIC, 'core'],
  category: 'business'
});

register('updateProfile', auditHandler, {
  id: 'profile-audit',
  priority: 50,
  tags: [HandlerTags.AUDIT, 'security'],
  category: 'audit',
  blocking: false
});

// íƒœê·¸ ê¸°ë°˜ ì¿¼ë¦¬
function useHandlersByTag(tag: string) {
  const registry = useUserActionRegister();
  
  return useCallback(() => {
    if (!registry) return [];
    
    return registry.getHandlersByTag(tag);
  }, [registry, tag]);
}
```

### 3. í•¸ë“¤ëŸ¬ ë©”íŠ¸ë¦­ìŠ¤

```typescript
// í•¸ë“¤ëŸ¬ ì„±ëŠ¥ ì¶”ì 
interface HandlerMetrics {
  id: string;
  executionCount: number;
  averageExecutionTime: number;
  errorCount: number;
  lastExecutionTime: number;
}

class HandlerMetricsCollector {
  private metrics = new Map<string, HandlerMetrics>();
  
  recordExecution(handlerId: string, executionTime: number, hasError = false) {
    const existing = this.metrics.get(handlerId) || {
      id: handlerId,
      executionCount: 0,
      averageExecutionTime: 0,
      errorCount: 0,
      lastExecutionTime: 0
    };
    
    existing.executionCount += 1;
    existing.averageExecutionTime = (
      (existing.averageExecutionTime * (existing.executionCount - 1)) + executionTime
    ) / existing.executionCount;
    
    if (hasError) {
      existing.errorCount += 1;
    }
    
    existing.lastExecutionTime = Date.now();
    this.metrics.set(handlerId, existing);
  }
  
  getMetrics(handlerId: string): HandlerMetrics | undefined {
    return this.metrics.get(handlerId);
  }
  
  getAllMetrics(): HandlerMetrics[] {
    return Array.from(this.metrics.values());
  }
}

// ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘ í•¸ë“¤ëŸ¬
const metricsCollector = new HandlerMetricsCollector();

const createMetricsWrapper = (handlerId: string, originalHandler: Function) => {
  return async (payload: any, controller: any) => {
    const startTime = performance.now();
    let hasError = false;
    
    try {
      const result = await originalHandler(payload, controller);
      return result;
    } catch (error) {
      hasError = true;
      throw error;
    } finally {
      const executionTime = performance.now() - startTime;
      metricsCollector.recordExecution(handlerId, executionTime, hasError);
    }
  };
};
```

## ë””ë²„ê¹…ê³¼ ëª¨ë‹ˆí„°ë§

### 1. í•¸ë“¤ëŸ¬ ì‹¤í–‰ ì¶”ì 

```typescript
// í•¸ë“¤ëŸ¬ ì‹¤í–‰ ë¡œê¹…
const createLoggingWrapper = (handlerId: string, originalHandler: Function) => {
  return async (payload: any, controller: any) => {
    console.group(`ğŸ”§ Handler: ${handlerId}`);
    console.log('Payload:', payload);
    console.time(`Handler ${handlerId}`);
    
    try {
      const result = await originalHandler(payload, controller);
      console.log('Result:', result);
      console.log('âœ… Handler completed successfully');
      return result;
    } catch (error) {
      console.error('âŒ Handler failed:', error);
      throw error;
    } finally {
      console.timeEnd(`Handler ${handlerId}`);
      console.groupEnd();
    }
  };
};

// ê°œë°œ í™˜ê²½ì—ì„œ ìë™ ë˜í•‘
const registerWithLogging = (action: string, handler: Function, config: any) => {
  const wrappedHandler = process.env.NODE_ENV === 'development'
    ? createLoggingWrapper(config.id || 'anonymous', handler)
    : handler;
    
  return register(action, wrappedHandler, config);
};
```

### 2. í•¸ë“¤ëŸ¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§

```typescript
// í•¸ë“¤ëŸ¬ ìƒíƒœ ëŒ€ì‹œë³´ë“œ
function HandlerMonitorDashboard() {
  const [metrics, setMetrics] = useState<HandlerMetrics[]>([]);
  
  useEffect(() => {
    const interval = setInterval(() => {
      setMetrics(metricsCollector.getAllMetrics());
    }, 1000);
    
    return () => clearInterval(interval);
  }, []);
  
  return (
    <div style={{ fontFamily: 'monospace', fontSize: '12px' }}>
      <h3>í•¸ë“¤ëŸ¬ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ</h3>
      <table>
        <thead>
          <tr>
            <th>í•¸ë“¤ëŸ¬ ID</th>
            <th>ì‹¤í–‰ íšŸìˆ˜</th>
            <th>í‰ê·  ì‹¤í–‰ ì‹œê°„</th>
            <th>ì˜¤ë¥˜ íšŸìˆ˜</th>
            <th>ë§ˆì§€ë§‰ ì‹¤í–‰</th>
          </tr>
        </thead>
        <tbody>
          {metrics.map(metric => (
            <tr key={metric.id}>
              <td>{metric.id}</td>
              <td>{metric.executionCount}</td>
              <td>{metric.averageExecutionTime.toFixed(2)}ms</td>
              <td style={{ color: metric.errorCount > 0 ? 'red' : 'green' }}>
                {metric.errorCount}
              </td>
              <td>
                {new Date(metric.lastExecutionTime).toLocaleTimeString()}
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ID ì„¤ê³„ ì›ì¹™

```typescript
// âœ… ì¢‹ìŒ: ì„¤ëª…ì ì´ê³  ì¼ê´€ëœ ID
const HANDLER_IDS = {
  // ë„ë©”ì¸-ê¸°ëŠ¥-ì—­í•  íŒ¨í„´
  USER_PROFILE_VALIDATOR: 'user-profile-validator',
  USER_PROFILE_UPDATER: 'user-profile-updater',
  USER_PROFILE_AUDITOR: 'user-profile-auditor',
  
  // ëª…í™•í•œ ì±…ì„ í‘œì‹œ
  CART_ITEM_ADDER: 'cart-item-adder',
  CART_TOTAL_CALCULATOR: 'cart-total-calculator',
  CART_PERSISTENCE_SYNC: 'cart-persistence-sync'
} as const;

// âŒ í”¼í•˜ê¸°: ëª¨í˜¸í•˜ê±°ë‚˜ ì¼ê´€ì„± ì—†ëŠ” ID
const BAD_IDS = {
  HANDLER1: 'handler1',           // ì˜ë¯¸ ì—†ìŒ
  UserStuff: 'UserStuff',         // ì¹´ë©œì¼€ì´ìŠ¤ + ëª¨í˜¸í•¨
  'update-thing': 'update-thing', // ë„ˆë¬´ ì¼ë°˜ì 
  'user_profile_UPDATER': 'user_profile_UPDATER' // ì¼ê´€ì„± ì—†ëŠ” ì¼€ì´ìŠ¤
};
```

### 2. ì¡°ì§í™” íŒ¨í„´

```typescript
// ë„ë©”ì¸ë³„ ID ì¡°ì§í™”
export const UserHandlerIds = {
  Authentication: {
    LOGIN_MAIN: 'user-auth-login-main',
    LOGIN_VALIDATOR: 'user-auth-login-validator',
    LOGOUT_MAIN: 'user-auth-logout-main',
    TOKEN_REFRESH: 'user-auth-token-refresh'
  },
  Profile: {
    UPDATE_MAIN: 'user-profile-update-main',
    UPDATE_VALIDATOR: 'user-profile-update-validator',
    DELETE_MAIN: 'user-profile-delete-main',
    AVATAR_UPLOAD: 'user-profile-avatar-upload'
  }
} as const;

export const CartHandlerIds = {
  Items: {
    ADD_MAIN: 'cart-items-add-main',
    REMOVE_MAIN: 'cart-items-remove-main',
    UPDATE_QUANTITY: 'cart-items-update-quantity'
  },
  Calculation: {
    TOTAL_CALCULATOR: 'cart-calc-total',
    TAX_CALCULATOR: 'cart-calc-tax',
    DISCOUNT_APPLIER: 'cart-calc-discount'
  }
} as const;
```

### 3. ë¬¸ì„œí™” íŒ¨í„´

```typescript
/**
 * ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬
 * 
 * @id user-profile-updater-main
 * @priority 100
 * @blocking true
 * @category business-logic
 * @tags ["user", "profile", "business"]
 * 
 * @description ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ë¥¼ ê²€ì¦í•˜ê³  ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
 * @dependencies user-profile-validator (ìš°ì„ ìˆœìœ„ 200)
 * @affects user-profile-auditor (ìš°ì„ ìˆœìœ„ 50)
 * 
 * @author TeamName
 * @version 1.2.0
 * @since 1.0.0
 */
register('updateProfile', updateProfileHandler, {
  id: UserHandlerIds.Profile.UPDATE_MAIN,
  priority: 100,
  blocking: true,
  category: 'business-logic',
  tags: ['user', 'profile', 'business'],
  version: '1.2.0'
});
```

---

## ìš”ì•½

íš¨ê³¼ì ì¸ í•¸ë“¤ëŸ¬ ID ì „ëµì€ ë‹¤ìŒì„ ì œê³µí•©ë‹ˆë‹¤:

- **ëª…í™•í•œ ì‹ë³„** - ì˜ë¯¸ìˆê³  ì¼ê´€ëœ ëª…ëª… ê·œì¹™
- **ì¡°ì§í™”ëœ êµ¬ì¡°** - ê³„ì¸µì ì´ê³  ë…¼ë¦¬ì ì¸ ID ì²´ê³„
- **ë””ë²„ê¹… ì§€ì›** - ì¶”ì  ê°€ëŠ¥í•˜ê³  ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥í•œ í•¸ë“¤ëŸ¬
- **í™•ì¥ì„±** - ë™ì ì´ê³  ì¡°ê±´ë¶€ í•¸ë“¤ëŸ¬ ê´€ë¦¬
- **ìœ ì§€ë³´ìˆ˜ì„±** - ë¬¸ì„œí™”ë˜ê³  ë²„ì „ ê´€ë¦¬ë˜ëŠ” í•¸ë“¤ëŸ¬

ì˜¬ë°”ë¥¸ ID ì „ëµì„ ë”°ë¥´ë©´ ë³µì¡í•œ í•¸ë“¤ëŸ¬ ì‹œìŠ¤í…œë„ ì‰½ê²Œ ê´€ë¦¬í•˜ê³  ë””ë²„ê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©](./cross-domain-integration) - ë„ë©”ì¸ ê°„ í•¸ë“¤ëŸ¬ í†µì‹ 
- [ì„±ëŠ¥ ìµœì í™”](./performance) - í•¸ë“¤ëŸ¬ ì„±ëŠ¥ ìµœì í™” ê¸°ë²•
- [ëª¨ë²” ì‚¬ë¡€](./best-practices) - í”„ë¡œë•ì…˜ í™˜ê²½ ê¶Œì¥ì‚¬í•­
:::

---


# Guide Mvvm Architecture

**Source**: `guide/mvvm-architecture.md`  
**Priority**: 80 (essential)  

# MVVM ì•„í‚¤í…ì²˜

Context-Action í”„ë ˆì„ì›Œí¬ëŠ” Model-View-ViewModel(MVVM) íŒ¨í„´ì—ì„œ ì˜ê°ì„ ë°›ì•„ React í™˜ê²½ì— ë§ê²Œ ì ì‘ëœ ì•„í‚¤í…ì²˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” MVVM ì›ì¹™ì´ ì–´ë–»ê²Œ êµ¬í˜„ë˜ê³  í™œìš©ë˜ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤.

## MVVM ì•„í‚¤í…ì²˜ ê°œìš”

### ì „í†µì ì¸ MVVM vs Context-Action MVVM

```mermaid
graph TB
    subgraph "Context-Action MVVM"
        V1[View Layer<br/>React Components]
        VM1[ViewModel Layer<br/>Action Handlers]
        M1[Model Layer<br/>Store System]
        
        V1 -->|Actions| VM1
        VM1 -->|State Updates| M1
        M1 -->|Reactive Updates| V1
        
        VM1 -.->|Business Logic| VM1
        M1 -.->|Data Validation| M1
    end
    
    style V1 fill:#e3f2fd
    style VM1 fill:#fff8e1
    style M1 fill:#e8f5e8
```

### ê³„ì¸µë³„ ì±…ì„ ë¶„ë¦¬

| ê³„ì¸µ | ì—­í•  | Context-Action êµ¬í˜„ì²´ |
|------|------|---------------------|
| **View** | UI ë Œë”ë§, ì‚¬ìš©ì ìƒí˜¸ì‘ìš© | React ì»´í¬ë„ŒíŠ¸ |
| **ViewModel** | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìƒíƒœ ë³€í™˜ | ì•¡ì…˜ í•¸ë“¤ëŸ¬ |
| **Model** | ë°ì´í„° ìƒíƒœ, ì˜ì†ì„± | ìŠ¤í† ì–´ ì‹œìŠ¤í…œ |

## Model ê³„ì¸µ (ìŠ¤í† ì–´ ì‹œìŠ¤í…œ)

### 1. ìˆœìˆ˜í•œ ë°ì´í„° ëª¨ë¸

```typescript
// Model Layer - ìˆœìˆ˜í•œ ë°ì´í„° êµ¬ì¡°
interface UserModel {
  // ì—”í‹°í‹° ë°ì´í„°
  profile: {
    id: string;
    name: string;
    email: string;
    avatar?: string;
    createdAt: string;
    updatedAt: string;
  };
  
  // ìƒíƒœ ë°ì´í„°
  session: {
    isLoggedIn: boolean;
    token: string | null;
    expiresAt: number | null;
    lastActivity: number;
  };
  
  // ì„¤ì • ë°ì´í„°
  preferences: {
    theme: 'light' | 'dark';
    language: string;
    notifications: {
      email: boolean;
      push: boolean;
      sms: boolean;
    };
  };
}

// Model Layer êµ¬í˜„
export const {
  Provider: UserModelProvider,
  useStore: useUserModel,
  useStores: useUserModelRegistry
} = createDeclarativeStores<UserModel>('UserModel', {
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: '',
      createdAt: '',
      updatedAt: ''
    },
    strategy: 'deep', // ì¤‘ì²© ê°ì²´ ë³€ê²½ ê°ì§€
    validation: (value) => {
      // ë°ì´í„° ê²€ì¦ ë¡œì§
      if (value.email && !value.email.includes('@')) {
        throw new Error('ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹');
      }
      return true;
    }
  },
  session: {
    initialValue: {
      isLoggedIn: false,
      token: null,
      expiresAt: null,
      lastActivity: Date.now()
    },
    strategy: 'shallow'
  },
  preferences: {
    initialValue: {
      theme: 'light',
      language: 'ko',
      notifications: {
        email: true,
        push: true,
        sms: false
      }
    },
    strategy: 'deep'
  }
});
```

### 2. Model ê³„ì¸µ ê·œì¹™

```typescript
// âœ… Model Layer ëª¨ë²” ì‚¬ë¡€
class UserModelValidator {
  // ìˆœìˆ˜í•œ ê²€ì¦ ë¡œì§
  static validateProfile(profile: UserModel['profile']): ValidationResult {
    const errors: string[] = [];
    
    if (!profile.name.trim()) {
      errors.push('ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤');
    }
    
    if (!profile.email || !profile.email.includes('@')) {
      errors.push('ìœ íš¨í•œ ì´ë©”ì¼ì´ í•„ìš”í•©ë‹ˆë‹¤');
    }
    
    return { isValid: errors.length === 0, errors };
  }
  
  static validateSession(session: UserModel['session']): ValidationResult {
    const errors: string[] = [];
    
    if (session.isLoggedIn && !session.token) {
      errors.push('ë¡œê·¸ì¸ ìƒíƒœì—ëŠ” í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤');
    }
    
    if (session.expiresAt && session.expiresAt < Date.now()) {
      errors.push('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤');
    }
    
    return { isValid: errors.length === 0, errors };
  }
}

// Model ê³„ì¸µì—ì„œ ì‚¬ìš©
const profileStore = useUserModel('profile');
const currentProfile = profileStore.getValue();

// âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Modelì—ì„œ ì œì™¸
// Model ê³„ì¸µì—ì„œëŠ” ìˆœìˆ˜í•œ ë°ì´í„° ì €ì¥/ê²€ì¦ë§Œ ë‹´ë‹¹
```

## ViewModel ê³„ì¸µ (ì•¡ì…˜ í•¸ë“¤ëŸ¬)

### 1. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìº¡ìŠí™”

```typescript
// ViewModel Layer - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ìƒíƒœ ë³€í™˜
interface UserViewModelActions {
  // ì¸ì¦ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  login: { email: string; password: string; rememberMe?: boolean };
  logout: void;
  refreshSession: void;
  
  // í”„ë¡œí•„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  updateProfile: { data: Partial<UserModel['profile']> };
  uploadAvatar: { file: File };
  deleteAccount: { confirmation: string };
  
  // ì„¤ì • ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  updatePreferences: { preferences: Partial<UserModel['preferences']> };
  exportData: void;
  importData: { data: Partial<UserModel> };
}

// ViewModel êµ¬í˜„
function useUserViewModel() {
  const register = useUserActionRegister();
  const modelRegistry = useUserModelRegistry();
  
  // ë¡œê·¸ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  const loginHandler = useCallback(async (
    payload: UserViewModelActions['login'],
    controller: ActionController
  ) => {
    const profileStore = modelRegistry.getStore('profile');
    const sessionStore = modelRegistry.getStore('session');
    
    try {
      // 1. ì…ë ¥ ê²€ì¦ (ViewModel ì±…ì„)
      if (!payload.email || !payload.password) {
        controller.abort('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”');
        return { success: false, error: 'INVALID_INPUT' };
      }
      
      // 2. ì™¸ë¶€ ì„œë¹„ìŠ¤ í˜¸ì¶œ (ViewModel ì±…ì„)
      const authResult = await authService.authenticate({
        email: payload.email,
        password: payload.password
      });
      
      if (!authResult.success) {
        controller.abort('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + authResult.error);
        return { success: false, error: authResult.error };
      }
      
      // 3. ë°ì´í„° ë³€í™˜ (ViewModel ì±…ì„)
      const transformedUser = {
        ...authResult.user,
        updatedAt: new Date().toISOString()
      };
      
      // 4. Model ì—…ë°ì´íŠ¸ (ViewModel â†’ Model)
      profileStore.setValue(transformedUser);
      sessionStore.setValue({
        isLoggedIn: true,
        token: authResult.token,
        expiresAt: Date.now() + (authResult.expiresIn * 1000),
        lastActivity: Date.now()
      });
      
      // 5. ë¶€ìˆ˜ íš¨ê³¼ ì²˜ë¦¬ (ViewModel ì±…ì„)
      if (payload.rememberMe) {
        localStorage.setItem('rememberUser', payload.email);
      }
      
      // 6. ì™¸ë¶€ ì‹œìŠ¤í…œ ì•Œë¦¼ (ViewModel ì±…ì„)
      analyticsService.track('user_login', {
        userId: transformedUser.id,
        timestamp: Date.now()
      });
      
      return { success: true, user: transformedUser };
      
    } catch (error) {
      // 7. ì˜¤ë¥˜ ì²˜ë¦¬ì™€ ë³µêµ¬ (ViewModel ì±…ì„)
      controller.abort('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ', error);
      
      // ì˜¤ë¥˜ ìƒí™©ì—ì„œì˜ Model ìƒíƒœ ë³µêµ¬
      sessionStore.setValue({
        isLoggedIn: false,
        token: null,
        expiresAt: null,
        lastActivity: Date.now()
      });
      
      return { success: false, error: 'NETWORK_ERROR' };
    }
  }, [modelRegistry]);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  const updateProfileHandler = useCallback(async (
    payload: UserViewModelActions['updateProfile'],
    controller: ActionController
  ) => {
    const profileStore = modelRegistry.getStore('profile');
    const sessionStore = modelRegistry.getStore('session');
    
    const currentProfile = profileStore.getValue();
    const session = sessionStore.getValue();
    
    try {
      // 1. ê¶Œí•œ ê²€ì¦ (ViewModel ì±…ì„)
      if (!session.isLoggedIn) {
        controller.abort('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
        return { success: false, error: 'UNAUTHORIZED' };
      }
      
      // 2. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦ (ViewModel ì±…ì„)
      const validation = UserModelValidator.validateProfile({
        ...currentProfile,
        ...payload.data
      });
      
      if (!validation.isValid) {
        controller.abort('ê²€ì¦ ì‹¤íŒ¨: ' + validation.errors.join(', '));
        return { success: false, error: 'VALIDATION_FAILED', details: validation.errors };
      }
      
      // 3. ë‚™ê´€ì  ì—…ë°ì´íŠ¸ (ViewModel ì „ëµ)
      const optimisticProfile = {
        ...currentProfile,
        ...payload.data,
        updatedAt: new Date().toISOString()
      };
      
      profileStore.setValue(optimisticProfile);
      
      // 4. ì„œë²„ ë™ê¸°í™” (ViewModel ì±…ì„)
      const updateResult = await userService.updateProfile(currentProfile.id, payload.data);
      
      if (!updateResult.success) {
        // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
        profileStore.setValue(currentProfile);
        controller.abort('ì„œë²„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
        return { success: false, error: 'SERVER_ERROR' };
      }
      
      // 5. ìµœì¢… ë°ì´í„°ë¡œ Model ì—…ë°ì´íŠ¸
      profileStore.setValue(updateResult.user);
      
      return { success: true, profile: updateResult.user };
      
    } catch (error) {
      // ì˜¤ë¥˜ ì‹œ ë¡¤ë°±
      profileStore.setValue(currentProfile);
      controller.abort('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜', error);
      return { success: false, error: 'UNKNOWN_ERROR' };
    }
  }, [modelRegistry]);
  
  // í•¸ë“¤ëŸ¬ ë“±ë¡
  useEffect(() => {
    if (!register) return;
    
    const unregisterLogin = register('login', loginHandler, {
      id: 'user-viewmodel-login',
      priority: 100,
      blocking: true,
      category: 'authentication'
    });
    
    const unregisterUpdate = register('updateProfile', updateProfileHandler, {
      id: 'user-viewmodel-update-profile',
      priority: 100,
      blocking: true,
      category: 'profile-management'
    });
    
    return () => {
      unregisterLogin();
      unregisterUpdate();
    };
  }, [register, loginHandler, updateProfileHandler]);
}
```

### 2. ViewModel íŒ¨í„´ ì›ì¹™

```typescript
// ViewModel ê³„ì¸µ ì±…ì„ ë¶„ë¦¬
class UserViewModel {
  // âœ… ViewModelì´ ë‹´ë‹¹í•´ì•¼ í•  ê²ƒë“¤
  
  // 1. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  async validateAndLogin(credentials: LoginCredentials) {
    // ë³µì¡í•œ ë¡œê·¸ì¸ ë¡œì§
  }
  
  // 2. ë°ì´í„° ë³€í™˜
  transformUserDataForUI(rawUserData: RawUserData): UIUserData {
    return {
      displayName: rawUserData.firstName + ' ' + rawUserData.lastName,
      memberSince: new Date(rawUserData.createdAt).getFullYear(),
      // ... ê¸°íƒ€ ë³€í™˜ ë¡œì§
    };
  }
  
  // 3. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¡°ìœ¨
  async syncUserData(userId: string) {
    const [profile, preferences, activity] = await Promise.all([
      userService.getProfile(userId),
      preferencesService.getPreferences(userId),
      activityService.getActivity(userId)
    ]);
    
    // Model ì—…ë°ì´íŠ¸
    this.updateModels(profile, preferences, activity);
  }
  
  // 4. ìƒíƒœ ì¡°ìœ¨
  coordinateLogout() {
    // ì—¬ëŸ¬ Modelì˜ ìƒíƒœë¥¼ ì¡°ìœ¨í•˜ì—¬ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
    this.clearUserModel();
    this.clearCartModel();
    this.clearNotificationModel();
  }
  
  // âŒ ViewModelì´ ë‹´ë‹¹í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒë“¤
  
  // UI ë Œë”ë§ (View ê³„ì¸µì˜ ì±…ì„)
  // renderUserProfile() { ... }
  
  // ìˆœìˆ˜í•œ ë°ì´í„° ì €ì¥ (Model ê³„ì¸µì˜ ì±…ì„)
  // storeUserData(data) { ... }
}
```

## View ê³„ì¸µ (React ì»´í¬ë„ŒíŠ¸)

### 1. ìˆœìˆ˜í•œ í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ

```typescript
// View Layer - ìˆœìˆ˜í•œ UI ì»´í¬ë„ŒíŠ¸
interface UserViewProps {
  // ViewëŠ” ë°ì´í„°ë§Œ ë°›ì•„ì„œ ë Œë”ë§
  user: UserModel['profile'];
  session: UserModel['session'];
  preferences: UserModel['preferences'];
  
  // ViewëŠ” ì´ë²¤íŠ¸ë§Œ ë°œìƒ
  onLogin: (credentials: LoginCredentials) => void;
  onLogout: () => void;
  onUpdateProfile: (data: Partial<UserModel['profile']>) => void;
}

// âœ… ìˆœìˆ˜í•œ View ì»´í¬ë„ŒíŠ¸ (í”„ë ˆì  í…Œì´ì…˜ë§Œ ë‹´ë‹¹)
function UserProfileView({ user, session, preferences, onLogin, onLogout, onUpdateProfile }: UserViewProps) {
  // ViewëŠ” ë¡œì»¬ UI ìƒíƒœë§Œ ê´€ë¦¬
  const [isEditing, setIsEditing] = useState(false);
  const [formData, setFormData] = useState(user);
  
  // ViewëŠ” UI ì´ë²¤íŠ¸ë§Œ ì²˜ë¦¬
  const handleSubmit = useCallback((e: React.FormEvent) => {
    e.preventDefault();
    onUpdateProfile(formData); // ViewModelë¡œ ì „ë‹¬
    setIsEditing(false);
  }, [formData, onUpdateProfile]);
  
  // ViewëŠ” ìˆœìˆ˜í•œ ë Œë”ë§ë§Œ ë‹´ë‹¹
  if (!session.isLoggedIn) {
    return <LoginForm onLogin={onLogin} />;
  }
  
  return (
    <div className={`profile-view theme-${preferences.theme}`}>
      <header className="profile-header">
        <img src={user.avatar} alt={`${user.name} í”„ë¡œí•„`} />
        <h1>{user.name}</h1>
        <p>{user.email}</p>
        <button onClick={onLogout}>ë¡œê·¸ì•„ì›ƒ</button>
      </header>
      
      <main className="profile-content">
        {isEditing ? (
          <form onSubmit={handleSubmit}>
            <input
              value={formData.name}
              onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
              placeholder="ì´ë¦„"
            />
            <input
              type="email"
              value={formData.email}
              onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}
              placeholder="ì´ë©”ì¼"
            />
            <button type="submit">ì €ì¥</button>
            <button type="button" onClick={() => setIsEditing(false)}>ì·¨ì†Œ</button>
          </form>
        ) : (
          <div className="profile-display">
            <p><strong>ì´ë¦„:</strong> {user.name}</p>
            <p><strong>ì´ë©”ì¼:</strong> {user.email}</p>
            <p><strong>ê°€ì…ì¼:</strong> {new Date(user.createdAt).toLocaleDateString()}</p>
            <button onClick={() => setIsEditing(true)}>í¸ì§‘</button>
          </div>
        )}
      </main>
    </div>
  );
}

// âœ… View Controller (Viewì™€ ViewModel ì—°ê²°)
function UserProfileContainer() {
  // Model êµ¬ë… (MVVMì˜ ë°ì´í„° ë°”ì¸ë”©)
  const user = useStoreValue(useUserModel('profile'));
  const session = useStoreValue(useUserModel('session'));
  const preferences = useStoreValue(useUserModel('preferences'));
  
  // ViewModel ì•¡ì…˜ ì—°ê²°
  const dispatch = useUserAction();
  
  // View ì´ë²¤íŠ¸ë¥¼ ViewModel ì•¡ì…˜ìœ¼ë¡œ ë³€í™˜
  const handleLogin = useCallback((credentials: LoginCredentials) => {
    dispatch('login', credentials);
  }, [dispatch]);
  
  const handleLogout = useCallback(() => {
    dispatch('logout');
  }, [dispatch]);
  
  const handleUpdateProfile = useCallback((data: Partial<UserModel['profile']>) => {
    dispatch('updateProfile', { data });
  }, [dispatch]);
  
  // Viewì—ê²Œ ë°ì´í„°ì™€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì „ë‹¬
  return (
    <UserProfileView
      user={user}
      session={session}
      preferences={preferences}
      onLogin={handleLogin}
      onLogout={handleLogout}
      onUpdateProfile={handleUpdateProfile}
    />
  );
}
```

### 2. View ê³„ì¸µ íŒ¨í„´

```typescript
// View ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ íŒ¨í„´
interface ViewComponentProps<TData, TActions> {
  // ë°ì´í„° (Modelì—ì„œ ì˜¨ ê²ƒ)
  data: TData;
  
  // ë¡œë”©/ì˜¤ë¥˜ ìƒíƒœ (ViewModelì—ì„œ ê´€ë¦¬)
  loading?: boolean;
  error?: string;
  
  // ì•¡ì…˜ ì½œë°± (ViewModelë¡œ ì „ë‹¬)
  actions: TActions;
  
  // UI ì„¤ì •
  className?: string;
  theme?: 'light' | 'dark';
}

// ì˜ˆì‹œ: ì‚¬ìš©ì ëª©ë¡ View
interface UserListData {
  users: UserModel['profile'][];
  totalCount: number;
  currentPage: number;
}

interface UserListActions {
  onLoadUsers: (page: number) => void;
  onDeleteUser: (userId: string) => void;
  onEditUser: (user: UserModel['profile']) => void;
}

function UserListView({ 
  data, 
  loading, 
  error, 
  actions, 
  className 
}: ViewComponentProps<UserListData, UserListActions>) {
  if (loading) {
    return <div className="loading">ì‚¬ìš©ì ëª©ë¡ ë¡œë”© ì¤‘...</div>;
  }
  
  if (error) {
    return <div className="error">ì˜¤ë¥˜: {error}</div>;
  }
  
  return (
    <div className={`user-list ${className || ''}`}>
      <header>
        <h2>ì‚¬ìš©ì ëª©ë¡ ({data.totalCount}ëª…)</h2>
      </header>
      
      <div className="user-grid">
        {data.users.map(user => (
          <UserCard
            key={user.id}
            user={user}
            onEdit={() => actions.onEditUser(user)}
            onDelete={() => actions.onDeleteUser(user.id)}
          />
        ))}
      </div>
      
      <Pagination
        currentPage={data.currentPage}
        totalPages={Math.ceil(data.totalCount / 10)}
        onPageChange={actions.onLoadUsers}
      />
    </div>
  );
}

// View Controller
function UserListContainer() {
  // Model êµ¬ë…
  const users = useStoreValue(useAdminModel('userList'));
  const pagination = useStoreValue(useAdminModel('pagination'));
  
  // ViewModel ìƒíƒœ
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  // ViewModel ì•¡ì…˜
  const dispatch = useAdminAction();
  
  const actions: UserListActions = {
    onLoadUsers: useCallback(async (page: number) => {
      setLoading(true);
      setError(null);
      try {
        await dispatch('loadUsers', { page });
      } catch (err) {
        setError(err instanceof Error ? err.message : 'ì‚¬ìš©ì ë¡œë“œ ì‹¤íŒ¨');
      } finally {
        setLoading(false);
      }
    }, [dispatch]),
    
    onDeleteUser: useCallback(async (userId: string) => {
      if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        try {
          await dispatch('deleteUser', { userId });
        } catch (err) {
          setError(err instanceof Error ? err.message : 'ì‚¬ìš©ì ì‚­ì œ ì‹¤íŒ¨');
        }
      }
    }, [dispatch]),
    
    onEditUser: useCallback((user: UserModel['profile']) => {
      dispatch('openUserEditor', { user });
    }, [dispatch])
  };
  
  const data: UserListData = {
    users,
    totalCount: pagination.total,
    currentPage: pagination.current
  };
  
  return (
    <UserListView
      data={data}
      loading={loading}
      error={error}
      actions={actions}
    />
  );
}
```

## MVVM í†µí•© íŒ¨í„´

### 1. ë‹¨ë°©í–¥ ë°ì´í„° íë¦„

```mermaid
graph LR
    subgraph "MVVM Data Flow"
        UI[View Layer<br/>React Components]
        VM[ViewModel Layer<br/>Action Handlers]
        M[Model Layer<br/>Store System]
        
        UI -->|User Actions| VM
        VM -->|Business Logic| VM
        VM -->|Update State| M
        M -->|State Changes| UI
        
        VM -.->|External APIs| API[External Services]
        VM -.->|Side Effects| SE[Analytics, Logging]
    end
    
    style UI fill:#e3f2fd
    style VM fill:#fff8e1
    style M fill:#e8f5e8
    style API fill:#ffebee
    style SE fill:#f3e5f5
```

### 2. ì‹¤ì œ êµ¬í˜„ ì˜ˆì‹œ

```typescript
// ì™„ì „í•œ MVVM íŒ¨í„´ êµ¬í˜„ ì˜ˆì‹œ
export function useUserMVVM() {
  // Model Layer
  const userModel = useUserModel('profile');
  const sessionModel = useUserModel('session');
  const preferencesModel = useUserModel('preferences');
  
  // ViewModel Layer
  useUserViewModel(); // í•¸ë“¤ëŸ¬ë“¤ì´ ë“±ë¡ë¨
  
  // View Layer ë°ì´í„° (Model â†’ View)
  const viewData = {
    profile: useStoreValue(userModel),
    session: useStoreValue(sessionModel),
    preferences: useStoreValue(preferencesModel)
  };
  
  // View Layer ì•¡ì…˜ (View â†’ ViewModel)
  const dispatch = useUserAction();
  const viewActions = {
    login: useCallback((credentials: LoginCredentials) => {
      return dispatch('login', credentials);
    }, [dispatch]),
    
    logout: useCallback(() => {
      return dispatch('logout');
    }, [dispatch]),
    
    updateProfile: useCallback((data: Partial<UserModel['profile']>) => {
      return dispatch('updateProfile', { data });
    }, [dispatch]),
    
    updatePreferences: useCallback((preferences: Partial<UserModel['preferences']>) => {
      return dispatch('updatePreferences', { preferences });
    }, [dispatch])
  };
  
  return {
    data: viewData,
    actions: viewActions
  };
}

// ì‚¬ìš©ë²•
function UserApp() {
  const { data, actions } = useUserMVVM();
  
  return (
    <UserModelProvider>
      <UserActionProvider>
        <UserProfileView
          user={data.profile}
          session={data.session}
          preferences={data.preferences}
          onLogin={actions.login}
          onLogout={actions.logout}
          onUpdateProfile={actions.updateProfile}
        />
      </UserActionProvider>
    </UserModelProvider>
  );
}
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ê³„ì¸µë³„ ì±…ì„ ë¶„ë¦¬

```typescript
// âœ… ì˜¬ë°”ë¥¸ ê³„ì¸µë³„ ì±…ì„ ë¶„ë¦¬

// Model: ìˆœìˆ˜í•œ ë°ì´í„°ì™€ ê²€ì¦
interface UserModel {
  profile: UserProfile;
  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ìŒ, ìˆœìˆ˜í•œ ë°ì´í„°ë§Œ
}

// ViewModel: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ìƒíƒœ ì¡°ìœ¨
class UserViewModel {
  async handleLogin(credentials) {
    // ë³µì¡í•œ ë¡œê·¸ì¸ ë¡œì§
    // ì™¸ë¶€ API í˜¸ì¶œ
    // ìƒíƒœ ë³€í™˜
    // Model ì—…ë°ì´íŠ¸
  }
}

// View: ìˆœìˆ˜í•œ UI ë Œë”ë§
function UserView({ data, actions }) {
  // UI ë¡œì§ë§Œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ìŒ
  return <div>{data.name}</div>;
}

// âŒ ì˜ëª»ëœ ì±…ì„ ë¶„ë¦¬

// Modelì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (X)
interface BadUserModel {
  profile: UserProfile;
  loginUser: (credentials) => Promise<void>; // ViewModel ì±…ì„
}

// Viewì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (X)
function BadUserView() {
  const handleLogin = async () => {
    // ë³µì¡í•œ ë¡œê·¸ì¸ ë¡œì§ - ViewModel ì±…ì„
    const result = await fetch('/api/login', ...);
    // ...
  };
  // ...
}
```

### 2. ë°ì´í„° íë¦„ ê´€ë¦¬

```typescript
// âœ… ë‹¨ë°©í–¥ ë°ì´í„° íë¦„ ì¤€ìˆ˜
function ProperDataFlow() {
  // View â†’ ViewModel (ì•¡ì…˜)
  const dispatch = useUserAction();
  
  // Model â†’ View (ìƒíƒœ)
  const user = useStoreValue(useUserModel('profile'));
  
  // ì˜¬ë°”ë¥¸ íë¦„: View â†’ ViewModel â†’ Model â†’ View
  const handleUpdate = (data) => {
    dispatch('updateProfile', { data }); // View â†’ ViewModel
    // ViewModelì´ Model ì—…ë°ì´íŠ¸
    // Modelì´ Viewì— ìë™ ë°˜ì˜
  };
}

// âŒ ì–‘ë°©í–¥ ë°ì´í„° íë¦„ (í”¼í•˜ê¸°)
function ImproperDataFlow() {
  const userStore = useUserModel('profile');
  
  const handleUpdate = (data) => {
    // Viewì—ì„œ ì§ì ‘ Model ì¡°ì‘ (X)
    userStore.setValue(data);
  };
}
```

---

## ìš”ì•½

Context-Actionì˜ MVVM ì•„í‚¤í…ì²˜ëŠ” ë‹¤ìŒ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:

- **ëª…í™•í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬** - ê° ê³„ì¸µì˜ ì±…ì„ì´ ëª…í™•í•¨
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±** - ê° ê³„ì¸µì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
- **ìœ ì§€ë³´ìˆ˜ì„±** - ë³€ê²½ì‚¬í•­ì˜ ì˜í–¥ ë²”ìœ„ê°€ ì œí•œë¨
- **ì¬ì‚¬ìš©ì„±** - Viewì™€ ViewModelì˜ ë…ë¦½ì  ì¬ì‚¬ìš©
- **í™•ì¥ì„±** - ê³„ì¸µë³„ ë…ë¦½ì  í™•ì¥ ê°€ëŠ¥

MVVM íŒ¨í„´ì„ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•˜ë©´ ë³µì¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ë„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [ì„±ëŠ¥ ìµœì í™”](./performance) - MVVM ì•„í‚¤í…ì²˜ ì„±ëŠ¥ ìµœì í™”
- [ëª¨ë²” ì‚¬ë¡€](./best-practices) - ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ ê¶Œì¥ì‚¬í•­
- [ê³µí†µ í•¨ì •](./common-pitfalls) - MVVM êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­
:::

---


# Guide Performance

**Source**: `guide/performance.md`  
**Priority**: 80 (essential)  

# ì„±ëŠ¥ ìµœì í™”

Context-Action í”„ë ˆì„ì›Œí¬ì—ì„œì˜ ì„±ëŠ¥ ìµœì í™”ëŠ” ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬, í•¸ë“¤ëŸ¬ ì‹¤í–‰, ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì˜ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê²€ì¦ëœ ìµœì í™” ê¸°ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

## ê¸°ë³¸ ì„±ëŠ¥ ì›ì¹™

### 1. ì¸¡ì • ê¸°ë°˜ ìµœì í™”

```typescript
// ì„±ëŠ¥ ì¸¡ì • ìœ í‹¸ë¦¬í‹°
class PerformanceProfiler {
  private static measurements = new Map<string, number[]>();
  
  static measure<T>(label: string, fn: () => T): T {
    const start = performance.now();
    const result = fn();
    const end = performance.now();
    
    const measurements = this.measurements.get(label) || [];
    measurements.push(end - start);
    this.measurements.set(label, measurements);
    
    // ìµœê·¼ 100ê°œ ì¸¡ì •ê°’ë§Œ ìœ ì§€
    if (measurements.length > 100) {
      measurements.shift();
    }
    
    return result;
  }
  
  static async measureAsync<T>(label: string, fn: () => Promise<T>): Promise<T> {
    const start = performance.now();
    const result = await fn();
    const end = performance.now();
    
    const measurements = this.measurements.get(label) || [];
    measurements.push(end - start);
    this.measurements.set(label, measurements);
    
    return result;
  }
  
  static getStats(label: string) {
    const measurements = this.measurements.get(label) || [];
    if (measurements.length === 0) return null;
    
    const avg = measurements.reduce((sum, val) => sum + val, 0) / measurements.length;
    const max = Math.max(...measurements);
    const min = Math.min(...measurements);
    
    return { average: avg, max, min, count: measurements.length };
  }
  
  static getAllStats() {
    const stats = {};
    for (const [label, measurements] of this.measurements) {
      stats[label] = this.getStats(label);
    }
    return stats;
  }
}

// ì‚¬ìš©ë²•
const loginHandler = useCallback(async (payload, controller) => {
  return await PerformanceProfiler.measureAsync('user-login', async () => {
    // ë¡œê·¸ì¸ ë¡œì§
    return await performLogin(payload);
  });
}, []);
```

### 2. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

```typescript
// ê°œë°œ í™˜ê²½ ì„±ëŠ¥ ëª¨ë‹ˆí„°
function PerformanceDashboard() {
  const [stats, setStats] = useState({});
  const [isVisible, setIsVisible] = useState(false);
  
  useEffect(() => {
    if (!process.env.NODE_ENV === 'development') return;
    
    const interval = setInterval(() => {
      setStats(PerformanceProfiler.getAllStats());
    }, 1000);
    
    return () => clearInterval(interval);
  }, []);
  
  if (!process.env.NODE_ENV === 'development' || !isVisible) {
    return (
      <button 
        className="perf-toggle"
        onClick={() => setIsVisible(true)}
        style={{
          position: 'fixed',
          bottom: '10px',
          right: '10px',
          zIndex: 9999
        }}
      >
        ğŸ“Š
      </button>
    );
  }
  
  return (
    <div style={{
      position: 'fixed',
      bottom: '10px',
      right: '10px',
      width: '400px',
      maxHeight: '300px',
      backgroundColor: 'rgba(0,0,0,0.9)',
      color: 'white',
      padding: '10px',
      borderRadius: '5px',
      fontSize: '12px',
      fontFamily: 'monospace',
      overflow: 'auto',
      zIndex: 9999
    }}>
      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>
        <h4>ì„±ëŠ¥ í†µê³„</h4>
        <button onClick={() => setIsVisible(false)}>Ã—</button>
      </div>
      
      {Object.entries(stats).map(([label, stat]: [string, any]) => (
        <div key={label} style={{ marginBottom: '8px' }}>
          <div><strong>{label}</strong></div>
          <div>í‰ê· : {stat?.average?.toFixed(2)}ms</div>
          <div>ìµœëŒ€: {stat?.max?.toFixed(2)}ms</div>
          <div>ìµœì†Œ: {stat?.min?.toFixed(2)}ms</div>
          <div>í˜¸ì¶œ: {stat?.count}íšŒ</div>
          <hr style={{ margin: '5px 0', opacity: 0.3 }} />
        </div>
      ))}
    </div>
  );
}
```

## ìŠ¤í† ì–´ ì„±ëŠ¥ ìµœì í™”

### 1. ì„ íƒì  êµ¬ë… íŒ¨í„´

```typescript
// âœ… íš¨ìœ¨ì : í•„ìš”í•œ í•„ë“œë§Œ êµ¬ë…
function OptimizedUserName() {
  const profileStore = useUserStore('profile');
  
  // ì´ë¦„ë§Œ ë³€ê²½ë  ë•Œ ë¦¬ë Œë”ë§
  const name = useStoreValue(profileStore, profile => profile.name);
  
  return <span>{name}</span>;
}

function OptimizedUserEmail() {
  const profileStore = useUserStore('profile');
  
  // ì´ë©”ì¼ë§Œ ë³€ê²½ë  ë•Œ ë¦¬ë Œë”ë§
  const email = useStoreValue(profileStore, profile => profile.email);
  
  return <span>{email}</span>;
}

// âŒ ë¹„íš¨ìœ¨ì : ì „ì²´ í”„ë¡œí•„ êµ¬ë…
function InefficientUserInfo() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore); // ëª¨ë“  ë³€ê²½ì— ë¦¬ë Œë”ë§
  
  return (
    <div>
      <span>{profile.name}</span>
      <span>{profile.email}</span>
    </div>
  );
}

// âœ… ê°œì„ ëœ ë²„ì „: ì¡°í•© ì»´í¬ë„ŒíŠ¸
function EfficientUserInfo() {
  return (
    <div>
      <OptimizedUserName />
      <OptimizedUserEmail />
    </div>
  );
}
```

### 2. ì¡°ê±´ë¶€ êµ¬ë… ìµœì í™”

```typescript
// ì¡°ê±´ì— ë”°ë¥¸ ìŠ¤ë§ˆíŠ¸ êµ¬ë…
function ConditionalUserData({ showDetails, isLoggedIn }: {
  showDetails: boolean;
  isLoggedIn: boolean;
}) {
  const profileStore = useUserStore('profile');
  
  // ë¡œê·¸ì¸ë˜ê³  ìƒì„¸ë³´ê¸°ì¼ ë•Œë§Œ ì „ì²´ ë°ì´í„° êµ¬ë…
  const profileData = useStoreValue(
    profileStore,
    isLoggedIn && showDetails 
      ? (profile) => profile  // ì „ì²´ í”„ë¡œí•„
      : (profile) => ({ name: profile.name }) // ì´ë¦„ë§Œ
  );
  
  if (!isLoggedIn) {
    return <div>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</div>;
  }
  
  if (!showDetails) {
    return <div>ì•ˆë…•í•˜ì„¸ìš”, {profileData.name}ë‹˜</div>;
  }
  
  return (
    <div>
      <h2>{profileData.name}</h2>
      <p>ì´ë©”ì¼: {profileData.email}</p>
      <p>ê°€ì…ì¼: {profileData.createdAt}</p>
      {/* ê¸°íƒ€ ìƒì„¸ ì •ë³´ */}
    </div>
  );
}
```

### 3. ë©”ëª¨í™”ëœ ì„ íƒì

```typescript
// ë³µì¡í•œ ê³„ì‚°ì„ ë©”ëª¨í™”í•˜ëŠ” ì„ íƒì
const createMemoizedSelector = <T, R>(
  selector: (state: T) => R,
  equalityFn?: (a: R, b: R) => boolean
) => {
  let lastInput: T;
  let lastResult: R;
  let hasResult = false;
  
  return (state: T): R => {
    // ì…ë ¥ì´ ê°™ìœ¼ë©´ ìºì‹œëœ ê²°ê³¼ ë°˜í™˜
    if (hasResult && Object.is(state, lastInput)) {
      return lastResult;
    }
    
    const result = selector(state);
    
    // ì»¤ìŠ¤í…€ ë“±ê°€ì„± ê²€ì‚¬ê°€ ìˆê³  ê²°ê³¼ê°€ ê°™ìœ¼ë©´ ìºì‹œ ìœ ì§€
    if (hasResult && equalityFn && equalityFn(result, lastResult)) {
      return lastResult;
    }
    
    lastInput = state;
    lastResult = result;
    hasResult = true;
    
    return result;
  };
};

// ì‚¬ìš©ë²•
function ExpensiveUserStats() {
  const profileStore = useUserStore('profile');
  const activityStore = useUserStore('activity');
  
  // ë³µì¡í•œ ê³„ì‚°ì„ ë©”ëª¨í™”
  const expensiveSelector = useMemo(() => 
    createMemoizedSelector((profile: UserProfile) => {
      // ë¬´ê±°ìš´ ê³„ì‚°
      return PerformanceProfiler.measure('user-stats-calculation', () => {
        const accountAge = Date.now() - new Date(profile.createdAt).getTime();
        const ageDays = Math.floor(accountAge / (24 * 60 * 60 * 1000));
        
        return {
          accountAgeDays: ageDays,
          accountAgeCategory: ageDays > 365 ? 'veteran' : ageDays > 30 ? 'regular' : 'new',
          completionScore: calculateProfileCompleteness(profile)
        };
      });
    })
  , []);
  
  const profile = useStoreValue(profileStore);
  const userStats = expensiveSelector(profile);
  
  return (
    <div>
      <p>ê³„ì • ì‚¬ìš©ì¼: {userStats.accountAgeDays}ì¼</p>
      <p>ì‚¬ìš©ì ë“±ê¸‰: {userStats.accountAgeCategory}</p>
      <p>í”„ë¡œí•„ ì™„ì„±ë„: {userStats.completionScore}%</p>
    </div>
  );
}
```

## í•¸ë“¤ëŸ¬ ì„±ëŠ¥ ìµœì í™”

### 1. í•¸ë“¤ëŸ¬ ë°°ì¹˜ ì²˜ë¦¬

```typescript
// ë°°ì¹˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹°
class BatchProcessor<T> {
  private queue: T[] = [];
  private timeoutId: NodeJS.Timeout | null = null;
  private readonly batchSize: number;
  private readonly delay: number;
  
  constructor(
    private processor: (items: T[]) => Promise<void>,
    batchSize = 10,
    delay = 100
  ) {
    this.batchSize = batchSize;
    this.delay = delay;
  }
  
  add(item: T) {
    this.queue.push(item);
    
    // ë°°ì¹˜ í¬ê¸°ì— ë„ë‹¬í•˜ë©´ ì¦‰ì‹œ ì²˜ë¦¬
    if (this.queue.length >= this.batchSize) {
      this.processBatch();
      return;
    }
    
    // íƒ€ì´ë¨¸ ì„¤ì • (ì§€ì—° ì²˜ë¦¬)
    if (this.timeoutId) {
      clearTimeout(this.timeoutId);
    }
    
    this.timeoutId = setTimeout(() => {
      this.processBatch();
    }, this.delay);
  }
  
  private async processBatch() {
    if (this.queue.length === 0) return;
    
    const batch = [...this.queue];
    this.queue = [];
    
    if (this.timeoutId) {
      clearTimeout(this.timeoutId);
      this.timeoutId = null;
    }
    
    try {
      await this.processor(batch);
    } catch (error) {
      console.error('ë°°ì¹˜ ì²˜ë¦¬ ì‹¤íŒ¨:', error);
    }
  }
  
  flush() {
    if (this.queue.length > 0) {
      this.processBatch();
    }
  }
}

// ë°°ì¹˜ ì²˜ë¦¬ í•¸ë“¤ëŸ¬ ì˜ˆì‹œ
function useBatchedAnalytics() {
  const register = useUserActionRegister();
  
  // ë¶„ì„ ì´ë²¤íŠ¸ ë°°ì¹˜ ì²˜ë¦¬ê¸°
  const analyticsProcessor = useMemo(
    () => new BatchProcessor(
      async (events: AnalyticsEvent[]) => {
        await PerformanceProfiler.measureAsync('analytics-batch', async () => {
          await fetch('/api/analytics/batch', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ events })
          });
        });
      },
      20, // ë°°ì¹˜ í¬ê¸°
      500 // ì§€ì—° ì‹œê°„ (ms)
    ),
    []
  );
  
  const trackingHandler = useCallback(async (payload, controller) => {
    // ì¦‰ì‹œ ë°°ì¹˜ì— ì¶”ê°€ (ë…¼ë¸”ë¡œí‚¹)
    analyticsProcessor.add({
      userId: payload.userId,
      action: payload.action,
      timestamp: Date.now(),
      metadata: payload.metadata
    });
    
    return { success: true, queued: true };
  }, [analyticsProcessor]);
  
  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ë‚¨ì€ ë°°ì¹˜ ì²˜ë¦¬
  useEffect(() => {
    return () => {
      analyticsProcessor.flush();
    };
  }, [analyticsProcessor]);
  
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('trackEvent', trackingHandler, {
      id: 'batched-analytics',
      priority: 50,
      blocking: false // ë…¼ë¸”ë¡œí‚¹ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ 
    });
    
    return unregister;
  }, [register, trackingHandler]);
}
```

### 2. ë””ë°”ìš´ì‹±ê³¼ ì“°ë¡œí‹€ë§

```typescript
// ë””ë°”ìš´ìŠ¤ í›…
function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);
  
  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);
    
    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);
  
  return debouncedValue;
}

// ì“°ë¡œí‹€ í›…
function useThrottle<T extends (...args: any[]) => any>(
  callback: T,
  delay: number
): T {
  const lastCall = useRef<number>(0);
  const timeoutRef = useRef<NodeJS.Timeout>();
  
  return useCallback((...args: Parameters<T>) => {
    const now = Date.now();
    
    if (now - lastCall.current >= delay) {
      lastCall.current = now;
      return callback(...args);
    } else {
      // ë§ˆì§€ë§‰ í˜¸ì¶œì„ ì˜ˆì•½
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
      
      timeoutRef.current = setTimeout(() => {
        lastCall.current = Date.now();
        callback(...args);
      }, delay - (now - lastCall.current));
    }
  }, [callback, delay]) as T;
}

// ë””ë°”ìš´ìŠ¤ëœ ê²€ìƒ‰ í•¸ë“¤ëŸ¬
function useOptimizedSearch() {
  const register = useUserActionRegister();
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearchTerm = useDebounce(searchTerm, 300);
  
  const searchHandler = useCallback(async (payload, controller) => {
    return await PerformanceProfiler.measureAsync('user-search', async () => {
      const response = await fetch(`/api/search?q=${encodeURIComponent(payload.term)}`);
      return await response.json();
    });
  }, []);
  
  const throttledSearchHandler = useThrottle(searchHandler, 1000);
  
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('search', throttledSearchHandler, {
      id: 'optimized-search',
      priority: 100,
      blocking: true
    });
    
    return unregister;
  }, [register, throttledSearchHandler]);
  
  // ë””ë°”ìš´ìŠ¤ëœ ê²€ìƒ‰ì–´ ë³€ê²½ì— ìë™ ë°˜ì‘
  useEffect(() => {
    if (debouncedSearchTerm.length > 2) {
      throttledSearchHandler({ term: debouncedSearchTerm });
    }
  }, [debouncedSearchTerm, throttledSearchHandler]);
  
  return { searchTerm, setSearchTerm };
}
```

### 3. ìš°ì„ ìˆœìœ„ ê¸°ë°˜ í•¸ë“¤ëŸ¬ ìµœì í™”

```typescript
// í•¸ë“¤ëŸ¬ ìš°ì„ ìˆœìœ„ ìµœì í™”
function useOptimizedUserHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  // í¬ë¦¬í‹°ì»¬ í•¸ë“¤ëŸ¬ (ë†’ì€ ìš°ì„ ìˆœìœ„, ë¸”ë¡œí‚¹)
  const criticalLoginHandler = useCallback(async (payload, controller) => {
    return await PerformanceProfiler.measureAsync('critical-login', async () => {
      // í•„ìˆ˜ ë¡œê·¸ì¸ ë¡œì§ë§Œ
      const result = await authenticateUser(payload);
      
      if (result.success) {
        // ì¦‰ì‹œ í•„ìš”í•œ ìƒíƒœë§Œ ì—…ë°ì´íŠ¸
        const sessionStore = registry.getStore('session');
        sessionStore.setValue({
          isLoggedIn: true,
          token: result.token,
          expiresAt: result.expiresAt,
          lastActivity: Date.now()
        });
      }
      
      return result;
    });
  }, [registry]);
  
  // ë³´ì¡° í•¸ë“¤ëŸ¬ (ë‚®ì€ ìš°ì„ ìˆœìœ„, ë…¼ë¸”ë¡œí‚¹)
  const auxiliaryLoginHandler = useCallback(async (payload, controller) => {
    // ë¶€ê°€ì ì¸ ì‘ì—…ë“¤ (ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬)
    setTimeout(async () => {
      try {
        await Promise.all([
          updateLoginAnalytics(payload.userId),
          preloadUserPreferences(payload.userId),
          syncUserActivity(payload.userId)
        ]);
      } catch (error) {
        console.warn('ë³´ì¡° ë¡œê·¸ì¸ ì‘ì—… ì‹¤íŒ¨:', error);
      }
    }, 0);
    
    return { success: true, auxiliary: true };
  }, []);
  
  useEffect(() => {
    if (!register) return;
    
    // í¬ë¦¬í‹°ì»¬ í•¸ë“¤ëŸ¬ ë¨¼ì € ë“±ë¡
    const unregisterCritical = register('login', criticalLoginHandler, {
      id: 'login-critical',
      priority: 200, // ë†’ì€ ìš°ì„ ìˆœìœ„
      blocking: true // ì™„ë£Œ ëŒ€ê¸°
    });
    
    // ë³´ì¡° í•¸ë“¤ëŸ¬ëŠ” ë‚˜ì¤‘ì—, ë…¼ë¸”ë¡œí‚¹ìœ¼ë¡œ
    const unregisterAuxiliary = register('login', auxiliaryLoginHandler, {
      id: 'login-auxiliary',
      priority: 50,  // ë‚®ì€ ìš°ì„ ìˆœìœ„
      blocking: false // ë¹„ë™ê¸° ì²˜ë¦¬
    });
    
    return () => {
      unregisterCritical();
      unregisterAuxiliary();
    };
  }, [register, criticalLoginHandler, auxiliaryLoginHandler]);
}
```

## ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ìµœì í™”

### 1. React.memoì™€ ì»¤ìŠ¤í…€ ë¹„êµ í•¨ìˆ˜

```typescript
// íš¨ìœ¨ì ì¸ ë©”ëª¨í™” ì»´í¬ë„ŒíŠ¸
interface UserCardProps {
  user: UserProfile;
  onEdit: (userId: string) => void;
  onDelete: (userId: string) => void;
}

const UserCard = React.memo<UserCardProps>(({ user, onEdit, onDelete }) => {
  console.log(`UserCard ë Œë”ë§: ${user.name}`); // ê°œë°œ ì¤‘ ë Œë”ë§ ì¶”ì 
  
  return (
    <div className="user-card">
      <img src={user.avatar} alt={`${user.name} í”„ë¡œí•„`} />
      <h3>{user.name}</h3>
      <p>{user.email}</p>
      <div>
        <button onClick={() => onEdit(user.id)}>í¸ì§‘</button>
        <button onClick={() => onDelete(user.id)}>ì‚­ì œ</button>
      </div>
    </div>
  );
}, (prevProps, nextProps) => {
  // ì»¤ìŠ¤í…€ ë¹„êµ í•¨ìˆ˜ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
  return (
    prevProps.user.id === nextProps.user.id &&
    prevProps.user.name === nextProps.user.name &&
    prevProps.user.email === nextProps.user.email &&
    prevProps.user.avatar === nextProps.user.avatar &&
    prevProps.onEdit === nextProps.onEdit &&
    prevProps.onDelete === nextProps.onDelete
  );
});

// ì•ˆì •ëœ ì½œë°± ì‚¬ìš©
function UserList() {
  const users = useStoreValue(useUserStore('userList'));
  const dispatch = useUserAction();
  
  // ì½œë°± ë©”ëª¨í™”ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
  const handleEdit = useCallback((userId: string) => {
    dispatch('editUser', { userId });
  }, [dispatch]);
  
  const handleDelete = useCallback((userId: string) => {
    if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      dispatch('deleteUser', { userId });
    }
  }, [dispatch]);
  
  return (
    <div className="user-list">
      {users.map(user => (
        <UserCard
          key={user.id}
          user={user}
          onEdit={handleEdit}
          onDelete={handleDelete}
        />
      ))}
    </div>
  );
}
```

### 2. ê°€ìƒí™” (Virtualization)

```typescript
// ëŒ€ìš©ëŸ‰ ë¦¬ìŠ¤íŠ¸ ê°€ìƒí™”
import { FixedSizeList as List } from 'react-window';

interface VirtualizedUserListProps {
  users: UserProfile[];
  onEdit: (userId: string) => void;
  onDelete: (userId: string) => void;
}

// ê°€ìƒí™”ëœ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸
const VirtualizedUserItem = React.memo<{
  index: number;
  style: React.CSSProperties;
  data: {
    users: UserProfile[];
    onEdit: (userId: string) => void;
    onDelete: (userId: string) => void;
  };
}>(({ index, style, data }) => {
  const user = data.users[index];
  
  return (
    <div style={style}>
      <UserCard
        user={user}
        onEdit={data.onEdit}
        onDelete={data.onDelete}
      />
    </div>
  );
});

function VirtualizedUserList({ users, onEdit, onDelete }: VirtualizedUserListProps) {
  const itemData = useMemo(() => ({
    users,
    onEdit,
    onDelete
  }), [users, onEdit, onDelete]);
  
  return (
    <div style={{ height: '600px' }}>
      <List
        height={600}
        itemCount={users.length}
        itemSize={120} // ê° ì•„ì´í…œì˜ ë†’ì´
        itemData={itemData}
        overscanCount={5} // ë¯¸ë¦¬ ë Œë”ë§í•  ì•„ì´í…œ ìˆ˜
      >
        {VirtualizedUserItem}
      </List>
    </div>
  );
}

// ì‚¬ìš©ë²•
function OptimizedUserList() {
  const users = useStoreValue(useUserStore('userList'));
  const dispatch = useUserAction();
  
  const handleEdit = useCallback((userId: string) => {
    dispatch('editUser', { userId });
  }, [dispatch]);
  
  const handleDelete = useCallback((userId: string) => {
    dispatch('deleteUser', { userId });
  }, [dispatch]);
  
  // ì‚¬ìš©ìê°€ ë§ì„ ë•Œ ê°€ìƒí™” ì‚¬ìš©
  if (users.length > 100) {
    return (
      <VirtualizedUserList
        users={users}
        onEdit={handleEdit}
        onDelete={handleDelete}
      />
    );
  }
  
  // ì ì€ ìˆ˜ì˜ ì‚¬ìš©ìëŠ” ì¼ë°˜ ë Œë”ë§
  return (
    <div className="user-list">
      {users.map(user => (
        <UserCard
          key={user.id}
          user={user}
          onEdit={handleEdit}
          onDelete={handleDelete}
        />
      ))}
    </div>
  );
}
```

### 3. ì§€ì—° ë¡œë”©ê³¼ ì½”ë“œ ë¶„í• 

```typescript
// ì§€ì—° ë¡œë”© ì»´í¬ë„ŒíŠ¸
const LazyUserEditor = React.lazy(() => 
  import('./UserEditor').then(module => ({
    default: module.UserEditor
  }))
);

const LazyUserAnalytics = React.lazy(() => 
  import('./UserAnalytics').then(module => ({
    default: module.UserAnalytics
  }))
);

// ì¡°ê±´ë¶€ ì§€ì—° ë¡œë”©
function OptimizedUserDashboard() {
  const [activeTab, setActiveTab] = useState<'profile' | 'editor' | 'analytics'>('profile');
  const userRole = useStoreValue(useUserStore('session'), session => session.role);
  
  return (
    <div className="user-dashboard">
      <nav className="dashboard-nav">
        <button 
          onClick={() => setActiveTab('profile')}
          className={activeTab === 'profile' ? 'active' : ''}
        >
          í”„ë¡œí•„
        </button>
        <button 
          onClick={() => setActiveTab('editor')}
          className={activeTab === 'editor' ? 'active' : ''}
        >
          í¸ì§‘
        </button>
        {userRole === 'admin' && (
          <button 
            onClick={() => setActiveTab('analytics')}
            className={activeTab === 'analytics' ? 'active' : ''}
          >
            ë¶„ì„
          </button>
        )}
      </nav>
      
      <div className="dashboard-content">
        {activeTab === 'profile' && <UserProfile />}
        
        {activeTab === 'editor' && (
          <Suspense fallback={<div>í¸ì§‘ê¸° ë¡œë”© ì¤‘...</div>}>
            <LazyUserEditor />
          </Suspense>
        )}
        
        {activeTab === 'analytics' && userRole === 'admin' && (
          <Suspense fallback={<div>ë¶„ì„ ë„êµ¬ ë¡œë”© ì¤‘...</div>}>
            <LazyUserAnalytics />
          </Suspense>
        )}
      </div>
    </div>
  );
}
```

## ë„¤íŠ¸ì›Œí¬ ìµœì í™”

### 1. ìš”ì²­ ìµœì í™”

```typescript
// ìš”ì²­ ì¤‘ë³µ ì œê±°ì™€ ìºì‹±
class RequestCache {
  private cache = new Map<string, Promise<any>>();
  private results = new Map<string, { data: any; timestamp: number }>();
  private readonly ttl: number;
  
  constructor(ttl = 60000) { // ê¸°ë³¸ 1ë¶„ TTL
    this.ttl = ttl;
  }
  
  async fetch<T>(key: string, fetcher: () => Promise<T>): Promise<T> {
    // ìºì‹œëœ ê²°ê³¼ê°€ ìœ íš¨í•œì§€ í™•ì¸
    const cached = this.results.get(key);
    if (cached && Date.now() - cached.timestamp < this.ttl) {
      return cached.data;
    }
    
    // ì§„í–‰ ì¤‘ì¸ ìš”ì²­ì´ ìˆìœ¼ë©´ ì¬ì‚¬ìš©
    if (this.cache.has(key)) {
      return this.cache.get(key);
    }
    
    // ìƒˆ ìš”ì²­ ìƒì„±
    const promise = fetcher().then(data => {
      this.results.set(key, { data, timestamp: Date.now() });
      this.cache.delete(key);
      return data;
    }).catch(error => {
      this.cache.delete(key);
      throw error;
    });
    
    this.cache.set(key, promise);
    return promise;
  }
  
  invalidate(key: string) {
    this.cache.delete(key);
    this.results.delete(key);
  }
  
  clear() {
    this.cache.clear();
    this.results.clear();
  }
}

// ì „ì—­ ìš”ì²­ ìºì‹œ
const requestCache = new RequestCache();

// ìµœì í™”ëœ ì‚¬ìš©ì ë°ì´í„° í•¸ë“¤ëŸ¬
function useOptimizedUserDataHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  const loadUserDataHandler = useCallback(async (payload, controller) => {
    const cacheKey = `user-data-${payload.userId}`;
    
    return await requestCache.fetch(cacheKey, async () => {
      return await PerformanceProfiler.measureAsync('user-data-fetch', async () => {
        const response = await fetch(`/api/users/${payload.userId}`);
        if (!response.ok) {
          throw new Error('ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
        }
        
        const userData = await response.json();
        
        // ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
        const profileStore = registry.getStore('profile');
        profileStore.setValue(userData.profile);
        
        return userData;
      });
    });
  }, [registry]);
  
  // ì‚¬ìš©ì ë°ì´í„° ë¬´íš¨í™” í•¸ë“¤ëŸ¬
  const invalidateUserDataHandler = useCallback(async (payload, controller) => {
    const cacheKey = `user-data-${payload.userId}`;
    requestCache.invalidate(cacheKey);
    
    return { success: true, invalidated: true };
  }, []);
  
  useEffect(() => {
    if (!register) return;
    
    const unregisterLoad = register('loadUserData', loadUserDataHandler, {
      id: 'optimized-user-data-loader',
      priority: 100
    });
    
    const unregisterInvalidate = register('invalidateUserData', invalidateUserDataHandler, {
      id: 'user-data-cache-invalidator',
      priority: 100
    });
    
    return () => {
      unregisterLoad();
      unregisterInvalidate();
    };
  }, [register, loadUserDataHandler, invalidateUserDataHandler]);
}
```

### 2. í”„ë¦¬í˜ì¹­ê³¼ ë°±ê·¸ë¼ìš´ë“œ ë¡œë”©

```typescript
// ë°±ê·¸ë¼ìš´ë“œ í”„ë¦¬í˜ì¹­
function useBackgroundPreloading() {
  const dispatch = useUserAction();
  
  // ì‚¬ìš©ìê°€ hoverí•  ë•Œ ë°ì´í„° í”„ë¦¬í˜ì¹˜
  const preloadUserData = useCallback((userId: string) => {
    // ë°±ê·¸ë¼ìš´ë“œì—ì„œ í”„ë¦¬í˜ì¹˜ (ë…¼ë¸”ë¡œí‚¹)
    setTimeout(() => {
      dispatch('loadUserData', { userId }).catch(error => {
        console.warn('í”„ë¦¬í˜ì¹˜ ì‹¤íŒ¨:', error);
      });
    }, 0);
  }, [dispatch]);
  
  // ì˜ˆìƒë˜ëŠ” ë„¤ë¹„ê²Œì´ì…˜ì„ ìœ„í•œ í”„ë¦¬í˜ì¹˜
  const preloadNextPage = useCallback(() => {
    const currentPage = parseInt(location.pathname.split('/').pop() || '1');
    const nextPage = currentPage + 1;
    
    // ë‹¤ìŒ í˜ì´ì§€ ë°ì´í„° ë¯¸ë¦¬ ë¡œë“œ
    setTimeout(() => {
      dispatch('loadUserList', { page: nextPage }).catch(error => {
        console.warn('ë‹¤ìŒ í˜ì´ì§€ í”„ë¦¬í˜ì¹˜ ì‹¤íŒ¨:', error);
      });
    }, 1000); // 1ì´ˆ í›„ ë°±ê·¸ë¼ìš´ë“œ ë¡œë”©
  }, [dispatch]);
  
  return { preloadUserData, preloadNextPage };
}

// ìŠ¤ë§ˆíŠ¸ í”„ë¦¬í˜ì¹­ì´ ì ìš©ëœ ì‚¬ìš©ì ì¹´ë“œ
function SmartUserCard({ user }: { user: UserProfile }) {
  const { preloadUserData } = useBackgroundPreloading();
  const [isHovered, setIsHovered] = useState(false);
  
  const handleMouseEnter = useCallback(() => {
    setIsHovered(true);
    preloadUserData(user.id); // hover ì‹œ í”„ë¦¬í˜ì¹˜
  }, [user.id, preloadUserData]);
  
  return (
    <div 
      className="user-card"
      onMouseEnter={handleMouseEnter}
      onMouseLeave={() => setIsHovered(false)}
    >
      <img src={user.avatar} alt={`${user.name} í”„ë¡œí•„`} />
      <h3>{user.name}</h3>
      <p>{user.email}</p>
      
      {isHovered && (
        <div className="hover-actions">
          <Link to={`/users/${user.id}`}>ìƒì„¸ë³´ê¸°</Link>
        </div>
      )}
    </div>
  );
}
```

## ë©”ëª¨ë¦¬ ê´€ë¦¬

### 1. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

```typescript
// ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¶”ì 
class MemoryMonitor {
  private static instance: MemoryMonitor;
  private measurements: Array<{ timestamp: number; used: number }> = [];
  
  static getInstance() {
    if (!this.instance) {
      this.instance = new MemoryMonitor();
    }
    return this.instance;
  }
  
  measure() {
    if (typeof window !== 'undefined' && 'memory' in performance) {
      const memory = (performance as any).memory;
      const measurement = {
        timestamp: Date.now(),
        used: memory.usedJSHeapSize / 1024 / 1024 // MB ë‹¨ìœ„
      };
      
      this.measurements.push(measurement);
      
      // ìµœê·¼ 100ê°œ ì¸¡ì •ê°’ë§Œ ìœ ì§€
      if (this.measurements.length > 100) {
        this.measurements.shift();
      }
      
      return measurement;
    }
    return null;
  }
  
  getStats() {
    if (this.measurements.length === 0) return null;
    
    const latest = this.measurements[this.measurements.length - 1];
    const first = this.measurements[0];
    const average = this.measurements.reduce((sum, m) => sum + m.used, 0) / this.measurements.length;
    const peak = Math.max(...this.measurements.map(m => m.used));
    
    return {
      current: latest.used,
      average,
      peak,
      trend: latest.used - first.used
    };
  }
}

// ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ í›…
function useMemoryMonitoring(interval = 5000) {
  const [memoryStats, setMemoryStats] = useState(null);
  
  useEffect(() => {
    if (process.env.NODE_ENV !== 'development') return;
    
    const monitor = MemoryMonitor.getInstance();
    
    const measureInterval = setInterval(() => {
      monitor.measure();
      setMemoryStats(monitor.getStats());
    }, interval);
    
    return () => clearInterval(measureInterval);
  }, [interval]);
  
  return memoryStats;
}
```

### 2. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

```typescript
// ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ íŒ¨í„´
function useMemorySafeHandlers() {
  const register = useUserActionRegister();
  const registry = useUserStores();
  
  // WeakMapì„ ì‚¬ìš©í•œ ë©”ëª¨ë¦¬ ì•ˆì „í•œ ìºì‹œ
  const handlerCache = useMemo(() => new WeakMap(), []);
  
  const optimizedHandler = useCallback(async (payload, controller) => {
    // WeakMap ìºì‹œ í™•ì¸
    if (handlerCache.has(payload)) {
      return handlerCache.get(payload);
    }
    
    const result = await performExpensiveOperation(payload);
    
    // WeakMapì— ê²°ê³¼ ìºì‹œ (ìë™ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜)
    handlerCache.set(payload, result);
    
    return result;
  }, [handlerCache]);
  
  useEffect(() => {
    if (!register) return;
    
    const unregister = register('expensiveOperation', optimizedHandler, {
      id: 'memory-safe-handler',
      priority: 100
    });
    
    return () => {
      unregister();
      // WeakMapì€ ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ë¯€ë¡œ ì¶”ê°€ ì •ë¦¬ ë¶ˆí•„ìš”
    };
  }, [register, optimizedHandler]);
}

// ìë™ ì •ë¦¬ê°€ ì ìš©ëœ êµ¬ë…
function useAutoCleanupSubscription() {
  const abortController = useMemo(() => new AbortController(), []);
  
  useEffect(() => {
    // AbortControllerë¥¼ ì‚¬ìš©í•œ ìë™ ì •ë¦¬
    const subscription = someExternalService.subscribe(
      data => {
        // ë°ì´í„° ì²˜ë¦¬
      },
      { signal: abortController.signal }
    );
    
    return () => {
      abortController.abort(); // ëª¨ë“  ê´€ë ¨ ì‘ì—… ì·¨ì†Œ
    };
  }, [abortController]);
}
```

## ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ê³¼ í”„ë¡œíŒŒì¼ë§

### 1. ì‹¤ì‹œê°„ ì„±ëŠ¥ ëŒ€ì‹œë³´ë“œ

```typescript
// í†µí•© ì„±ëŠ¥ ëª¨ë‹ˆí„°
function usePerformanceMonitor() {
  const [performanceData, setPerformanceData] = useState({
    handlers: {},
    memory: null,
    renders: 0,
    storeUpdates: 0
  });
  
  // ë Œë”ë§ íšŸìˆ˜ ì¶”ì 
  const renderCount = useRef(0);
  useEffect(() => {
    renderCount.current += 1;
    setPerformanceData(prev => ({ ...prev, renders: renderCount.current }));
  });
  
  // ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸ ì¶”ì 
  const updateCount = useRef(0);
  const profileStore = useUserStore('profile');
  
  useEffect(() => {
    const unsubscribe = profileStore.subscribe(() => {
      updateCount.current += 1;
      setPerformanceData(prev => ({ ...prev, storeUpdates: updateCount.current }));
    });
    
    return unsubscribe;
  }, [profileStore]);
  
  // ì£¼ê¸°ì  ì„±ëŠ¥ ë°ì´í„° ìˆ˜ì§‘
  useEffect(() => {
    const interval = setInterval(() => {
      const handlerStats = PerformanceProfiler.getAllStats();
      const memoryStats = MemoryMonitor.getInstance().getStats();
      
      setPerformanceData(prev => ({
        ...prev,
        handlers: handlerStats,
        memory: memoryStats
      }));
    }, 1000);
    
    return () => clearInterval(interval);
  }, []);
  
  return performanceData;
}

// ì„±ëŠ¥ ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
function PerformanceMonitorDashboard() {
  const performanceData = usePerformanceMonitor();
  
  if (process.env.NODE_ENV !== 'development') {
    return null;
  }
  
  return (
    <div style={{
      position: 'fixed',
      top: '10px',
      left: '10px',
      width: '300px',
      backgroundColor: 'rgba(0,0,0,0.9)',
      color: 'white',
      padding: '10px',
      borderRadius: '5px',
      fontSize: '11px',
      fontFamily: 'monospace',
      zIndex: 10000
    }}>
      <h4>ì„±ëŠ¥ ëª¨ë‹ˆí„°</h4>
      
      <div>
        <strong>ë Œë”ë§:</strong> {performanceData.renders}íšŒ
      </div>
      
      <div>
        <strong>ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸:</strong> {performanceData.storeUpdates}íšŒ
      </div>
      
      {performanceData.memory && (
        <div>
          <strong>ë©”ëª¨ë¦¬:</strong> {performanceData.memory.current.toFixed(1)}MB
          (í‰ê· : {performanceData.memory.average.toFixed(1)}MB)
        </div>
      )}
      
      <div style={{ marginTop: '10px' }}>
        <strong>í•¸ë“¤ëŸ¬ ì„±ëŠ¥:</strong>
        {Object.entries(performanceData.handlers).map(([name, stats]: [string, any]) => (
          <div key={name} style={{ marginLeft: '10px', fontSize: '10px' }}>
            {name}: {stats.average?.toFixed(1)}ms (Ã—{stats.count})
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## ëª¨ë²” ì‚¬ë¡€ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ìŠ¤í† ì–´ ìµœì í™”
- [ ] ì„ íƒì  êµ¬ë… ì‚¬ìš©
- [ ] ì¡°ê±´ë¶€ êµ¬ë… êµ¬í˜„
- [ ] ë³µì¡í•œ ê³„ì‚° ë©”ëª¨í™”
- [ ] ì ì ˆí•œ ë³€ê²½ ê°ì§€ ì „ëµ ì„ íƒ

### âœ… í•¸ë“¤ëŸ¬ ìµœì í™”
- [ ] ë°°ì¹˜ ì²˜ë¦¬ êµ¬í˜„
- [ ] ë””ë°”ìš´ì‹±/ì“°ë¡œí‹€ë§ ì ìš©
- [ ] ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìµœì í™”
- [ ] ë…¼ë¸”ë¡œí‚¹ í•¸ë“¤ëŸ¬ í™œìš©

### âœ… ì»´í¬ë„ŒíŠ¸ ìµœì í™”
- [ ] React.memo ì ì ˆíˆ ì‚¬ìš©
- [ ] ì½œë°± ë©”ëª¨í™”
- [ ] ê°€ìƒí™” ì ìš© (ëŒ€ìš©ëŸ‰ ë¦¬ìŠ¤íŠ¸)
- [ ] ì§€ì—° ë¡œë”© êµ¬í˜„

### âœ… ë„¤íŠ¸ì›Œí¬ ìµœì í™”
- [ ] ìš”ì²­ ì¤‘ë³µ ì œê±°
- [ ] ìºì‹± ì „ëµ êµ¬í˜„
- [ ] í”„ë¦¬í˜ì¹­ ì ìš©
- [ ] ë°±ê·¸ë¼ìš´ë“œ ë¡œë”©

### âœ… ë©”ëª¨ë¦¬ ê´€ë¦¬
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- [ ] ìë™ ì •ë¦¬ êµ¬í˜„
- [ ] WeakMap í™œìš©
- [ ] êµ¬ë… í•´ì œ ë³´ì¥

### âœ… ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] í•¸ë“¤ëŸ¬ ì„±ëŠ¥ ì¶”ì 
- [ ] ë Œë”ë§ ìµœì í™” ê²€ì¦
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°ì§€
- [ ] ì‚¬ìš©ì ê²½í—˜ ë©”íŠ¸ë¦­

---

## ìš”ì•½

Context-Action í”„ë ˆì„ì›Œí¬ì˜ ì„±ëŠ¥ ìµœì í™”ëŠ” ë‹¤ìŒ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

- **ì¸¡ì • ê¸°ë°˜** - ì‹¤ì œ ë°ì´í„°ë¡œ ìµœì í™” ê²°ì •
- **ë‹¨ê³„ì  ìµœì í™”** - ê°€ì¥ í° ë³‘ëª©ë¶€í„° í•´ê²°
- **ì‚¬ìš©ì ê²½í—˜ ìš°ì„ ** - ì¸ì§€ ê°€ëŠ¥í•œ ì„±ëŠ¥ ê°œì„  ì§‘ì¤‘
- **ë©”ëª¨ë¦¬ ì•ˆì „ì„±** - ìë™ ì •ë¦¬ì™€ ëˆ„ìˆ˜ ë°©ì§€
- **ëª¨ë‹ˆí„°ë§ í•„ìˆ˜** - ì§€ì†ì ì¸ ì„±ëŠ¥ ì¶”ì 

ì˜¬ë°”ë¥¸ ìµœì í™” ê¸°ë²•ì„ ì ìš©í•˜ë©´ ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œë„ ìš°ìˆ˜í•œ ì„±ëŠ¥ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [ì˜¤ë¥˜ ì²˜ë¦¬](./error-handling) - ì„±ëŠ¥ì— ì˜í–¥ì„ ì£¼ëŠ” ì˜¤ë¥˜ ì²˜ë¦¬ ìµœì í™”
- [ëª¨ë²” ì‚¬ë¡€](./best-practices) - í”„ë¡œë•ì…˜ í™˜ê²½ ì„±ëŠ¥ ê¶Œì¥ì‚¬í•­
- [ê³µí†µ í•¨ì •](./common-pitfalls) - ì„±ëŠ¥ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ëŠ” ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ë“¤
:::

---


# Guide Philosophy

**Source**: `guide/philosophy.md`  
**Priority**: 80 (essential)  

# ì„¤ê³„ ì² í•™

Context-Action í”„ë ˆì„ì›Œí¬ëŠ” ëª¨ë“  ì•„í‚¤í…ì²˜ ê²°ì •ê³¼ êµ¬í˜„ íŒ¨í„´ì„ ì•ˆë‚´í•˜ëŠ” ê¸°ë³¸ ì›ì¹™ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì›ì¹™ì„ ì´í•´í•˜ëŠ” ê²ƒì€ íš¨ê³¼ì ì¸ ì‚¬ìš©ì„ ìœ„í•´ í•„ìˆ˜ì ì…ë‹ˆë‹¤.

## í•µì‹¬ ì² í•™

**"íƒ€ì… ì•ˆì „í•œ ë„ë©”ì¸ ê²©ë¦¬ë¥¼ í†µí•œ ì¦ê±° ê¸°ë°˜ ì•„í‚¤í…ì²˜"**

í”„ë ˆì„ì›Œí¬ëŠ” MVVMì—ì„œ ì˜ê°ì„ ë°›ì€ íŒ¨í„´ì„ í†µí•´ ê¹”ë”í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤:

- **ì•¡ì…˜**ì´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ (ViewModel ê³„ì¸µ)
- **ì»¨í…ìŠ¤íŠ¸ ìŠ¤í† ì–´ íŒ¨í„´**ì´ ë„ë©”ì¸ ê²©ë¦¬ì™€ í•¨ê»˜ ìƒíƒœ ê´€ë¦¬ (Model ê³„ì¸µ)  
- **ì»´í¬ë„ŒíŠ¸**ê°€ UI ë Œë”ë§ (View ê³„ì¸µ)
- **ì»¨í…ìŠ¤íŠ¸ ê²½ê³„**ê°€ ê¸°ëŠ¥ ë„ë©”ì¸ ê²©ë¦¬
- ë„ë©”ì¸ë³„ í›…ì„ í†µí•œ **íƒ€ì… ì•ˆì „ í†µí•©**

## ê¸°ë³¸ ì›ì¹™

### 1. ë„ë©”ì¸ ê²©ë¦¬ ìš°ì„ 

ê° ê¸°ëŠ¥ ë„ë©”ì¸ì€ ì»¨í…ìŠ¤íŠ¸ ê²½ê³„ë¥¼ í†µí•´ ì™„ì „í•œ ë…ë¦½ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤:

```typescript
// ê° ë„ë©”ì¸ì´ ê³ ìœ í•œ ê²©ë¦¬ëœ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°€ì§
const UserDomain = createContextStorePattern('User');
const CartDomain = createContextStorePattern('Cart');
const OrderDomain = createContextStorePattern('Order');
```

**ì¥ì :**
- ë„ë©”ì¸ ê°„ ìš°ë°œì ì¸ ìƒíƒœ ê²°í•© ë°©ì§€
- íŒ€ì´ ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—… ê°€ëŠ¥
- ì‰¬ìš´ í…ŒìŠ¤íŒ…ê³¼ ë””ë²„ê¹…
- ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜

### 2. ëª¨ë“  ê³„ì¸µì—ì„œ íƒ€ì… ì•ˆì „ì„±

ì™„ì „í•œ TypeScript í†µí•©ìœ¼ë¡œ ì»´íŒŒì¼ ì‹œ ì•ˆì „ì„± ë³´ì¥:

```typescript
// ë„ë©”ì¸ë³„ ì¸í„°í˜ì´ìŠ¤
interface UserData {
  profile: { id: string; name: string; email: string };
  preferences: { theme: 'light' | 'dark' };
}

interface UserActions {
  updateProfile: { data: Partial<UserData['profile']> };
  toggleTheme: void;
}

// íƒ€ì… ì•ˆì „í•œ í›… ìë™ ì¶”ë¡ 
const profileStore = useUserStore('profile'); // Store<UserData['profile']>ë¡œ íƒ€ì…ë¨
const dispatch = useUserAction(); // UserActionsì— ëŒ€í•œ íƒ€ì… ì•ˆì „ ë””ìŠ¤íŒ¨ì¹˜
```

### 3. ì„ ì–¸ì  ì•¡ì…˜ íŒŒì´í”„ë¼ì¸

ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ì„ ì–¸ì  íŒŒì´í”„ë¼ì¸ ì‹œìŠ¤í…œì„ í†µí•´ íë¦…ë‹ˆë‹¤:

```typescript
// ì–´ë–»ê²Œê°€ ì•„ë‹Œ ë¬´ì—‡ì„ ì„ ì–¸
dispatch('updateProfile', { data: { name: 'ìƒˆ ì´ë¦„' } });

// í”„ë ˆì„ì›Œí¬ê°€ "ì–´ë–»ê²Œ"ë¥¼ ì²˜ë¦¬:
// 1. ì•¡ì…˜ ê²€ì¦
// 2. ìš°ì„ ìˆœìœ„ë³„ í•¸ë“¤ëŸ¬ ì‹¤í–‰
// 3. ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
// 4. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
```

### 4. ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬

ì»´í¬ë„ŒíŠ¸ê°€ ê´€ë ¨ ìƒíƒœ ë³€ê²½ì— ìë™ìœ¼ë¡œ ë°˜ì‘:

```typescript
function UserProfile() {
  const profile = useStoreValue(useUserStore('profile'));
  // â†‘ í”„ë¡œí•„ì´ ë³€ê²½ë  ë•Œë§Œ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë¨
  
  return <div>í™˜ì˜í•©ë‹ˆë‹¤, {profile.name}ë‹˜!</div>;
}
```

## ì•„í‚¤í…ì²˜ íŒ¨í„´

### MVVMì—ì„œ ì˜ê°ë°›ì€ ë¶„ë¦¬

```mermaid
graph TD
    V[View ê³„ì¸µ<br/>React ì»´í¬ë„ŒíŠ¸] --> VM[ViewModel ê³„ì¸µ<br/>ì•¡ì…˜ í•¸ë“¤ëŸ¬]
    VM --> M[Model ê³„ì¸µ<br/>ìŠ¤í† ì–´ ì‹œìŠ¤í…œ]
    M --> V
    
    subgraph "ë„ë©”ì¸ ê²½ê³„"
        VM
        M
    end
```

### ì»¨í…ìŠ¤íŠ¸ ìŠ¤í† ì–´ íŒ¨í„´

ë„ë©”ì¸ ê²©ë¦¬ë¥¼ ìœ„í•œ í•µì‹¬ íŒ¨í„´:

```typescript
// 1. ë„ë©”ì¸ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
const UserStores = createContextStorePattern('User');

// 2. ì»¨í…ìŠ¤íŠ¸ ê²½ê³„ ì œê³µ
<UserStores.Provider registryId="user-app">
  <UserComponents />
</UserStores.Provider>

// 3. ê²½ê³„ ë‚´ì—ì„œ ì‚¬ìš©
const userStore = UserStores.useStore('profile', initialData);
```

## ì„¤ê³„ ê²°ì •

### ì™œ ë„ë©”ì¸ë³„ í›…ì¸ê°€?

**ì „í†µì ì¸ ì ‘ê·¼ë²• (ì œë„¤ë¦­):**
```typescript
const store = useStore('user-profile'); // íƒ€ì… ì •ë³´ ì—†ìŒ
const dispatch = useDispatch(); // ì•¡ì…˜ íƒ€ì… ì•ˆì „ì„± ì—†ìŒ
```

**Context-Action ì ‘ê·¼ë²• (ë„ë©”ì¸ë³„):**
```typescript
const store = useUserStore('profile'); // ì™„ì „íˆ íƒ€ì…ë¨
const dispatch = useUserAction(); // íƒ€ì… ì•ˆì „í•œ ì•¡ì…˜
```

**ì¥ì :**
- ì™„ì „í•œ TypeScript ì¶”ë¡ 
- ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„
- ë¦¬íŒ©í† ë§ ì•ˆì „ì„±
- ë” ë‚˜ì€ ê°œë°œì ê²½í—˜

### ì™œ ì§ì ‘ ìƒíƒœ ì—…ë°ì´íŠ¸ ëŒ€ì‹  ì•¡ì…˜ íŒŒì´í”„ë¼ì¸ì¸ê°€?

**ì§ì ‘ ì—…ë°ì´íŠ¸ (ì•ˆí‹°íŒ¨í„´):**
```typescript
// ë¶„ì‚°ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
function updateUser() {
  setUser(prev => ({ ...prev, name: 'ìƒˆ ì´ë¦„' }));
  logActivity('user_updated');
  validateUser();
  syncToServer();
}
```

**ì•¡ì…˜ íŒŒì´í”„ë¼ì¸ (ê¶Œì¥):**
```typescript
// ì¤‘ì•™í™”ë˜ê³  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
dispatch('updateUser', { name: 'ìƒˆ ì´ë¦„' });

// í•¸ë“¤ëŸ¬ê°€ ë³µì¡ì„± ê´€ë¦¬:
register('updateUser', async (payload, controller) => {
  const userStore = registry.getStore('user');
  // ì—…ë°ì´íŠ¸, ë¡œê·¸, ê²€ì¦, ë™ê¸°í™” - í•œ ê³³ì—ì„œ
});
```

**ì¥ì :**
- ì¤‘ì•™í™”ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ í•¸ë“¤ëŸ¬
- ì¼ê´€ëœ ì˜¤ë¥˜ ì²˜ë¦¬
- ê°ì‚¬ ê°€ëŠ¥í•œ ì•¡ì…˜ íë¦„

## ì„±ëŠ¥ ì² í•™

### ìµœì†Œí•œì˜ ë¦¬ë Œë”ë§

ë³€ê²½ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë§Œ ë¦¬ë Œë”ë§:

```typescript
// ì»´í¬ë„ŒíŠ¸ AëŠ” í”„ë¡œí•„ ì‚¬ìš©
const profile = useStoreValue(useUserStore('profile'));

// ì»´í¬ë„ŒíŠ¸ BëŠ” í™˜ê²½ì„¤ì • ì‚¬ìš©  
const prefs = useStoreValue(useUserStore('preferences'));

// í”„ë¡œí•„ ì—…ë°ì´íŠ¸í•´ë„ ì»´í¬ë„ŒíŠ¸ BëŠ” ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ
dispatch('updateProfile', { name: 'ìƒˆ ì´ë¦„' });
```

### í•¸ë“¤ëŸ¬ì—ì„œ ì§€ì—° í‰ê°€

ì§€ì—° ìŠ¤í† ì–´ ì ‘ê·¼ìœ¼ë¡œ ì˜¤ë˜ëœ í´ë¡œì € ë°©ì§€:

```typescript
const handler = async (payload, controller) => {
  // âŒ ì˜¤ë˜ë¨: ë“±ë¡ ì‹œì ì— ìº¡ì²˜ë¨
  const oldValue = profileStore.getValue();
  
  // âœ… ìµœì‹ : ì‹¤í–‰ ì‹œì ì— í‰ê°€ë¨
  const currentValue = registry.getStore('profile').getValue();
};
```

## ê°œë°œì ê²½í—˜ ìš°ì„ ìˆœìœ„

### 1. í˜•ì‹ ì—†ëŠ” íƒ€ì… ì•ˆì „ì„±

```typescript
// ìë™ ì¶”ë¡ , ìˆ˜ë™ íƒ€ì´í•‘ ë¶ˆí•„ìš”
const store = useUserStore('profile'); // Store<UserProfile>
const profile = useStoreValue(store); // UserProfile
```

### 2. ì§ê´€ì ì¸ API ì„¤ê³„

```typescript
// ìì—°ìŠ¤ëŸ½ê³  Reactê°™ì€ íŒ¨í„´
const dispatch = useUserAction();
dispatch('updateProfile', { name: 'ìƒˆ ì´ë¦„' });
```

### 3. ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€

```typescript
// ì»´íŒŒì¼ ì‹œ ì˜¤ë¥˜ê°€ ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•ì„ ì•ˆë‚´
dispatch('invalidAction', { data: 'wrong' }); 
// TS ì˜¤ë¥˜: 'invalidAction'ì€ UserActionsì— ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
```

### 4. ìœ ì—°í•œ í†µí•©

```typescript
// ê¸°ì¡´ React íŒ¨í„´ê³¼ í•¨ê»˜ ì‘ë™
function useUserProfile() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore);
  const dispatch = useUserAction();
  
  // ë‹¤ë¥¸ í›…ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì¡°í•©
  const memoizedData = useMemo(() => 
    processProfile(profile), [profile]
  );
  
  return { profile, memoizedData, dispatch };
}
```

## ì•„í‚¤í…ì²˜ ì¥ì 

### í™•ì¥ì„±

- **ìˆ˜í‰ì :** ê¸°ì¡´ ë„ë©”ì¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ìƒˆ ë„ë©”ì¸ ì¶”ê°€
- **ìˆ˜ì§ì :** ë„ë©”ì¸ ê°„ ì˜¤ì—¼ ì—†ì´ ë„ë©”ì¸ ë‚´ ê¸°ëŠ¥ ì¶”ê°€
- **íŒ€:** ì—¬ëŸ¬ íŒ€ì´ ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—… ê°€ëŠ¥

### ìœ ì§€ë³´ìˆ˜ì„±

- **ëª…í™•í•œ ê²½ê³„:** ë„ë©”ì¸ ê²©ë¦¬ê°€ ì˜ˆê¸°ì¹˜ ì•Šì€ ì˜ì¡´ì„± ë°©ì§€
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±:** í•¸ë“¤ëŸ¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‰½ê²Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- **ë””ë²„ê·¸ ê°€ëŠ¥ì„±:** ì•¡ì…˜ íë¦„ì´ ê°ì‚¬ ê°€ëŠ¥í•˜ê³  ì¶”ì  ê°€ëŠ¥

### ì„±ëŠ¥

- **ì„ íƒì  ë¦¬ë Œë”ë§:** ì˜í–¥ë°›ì€ ì»´í¬ë„ŒíŠ¸ë§Œ ì—…ë°ì´íŠ¸
- **ì§€ì—° ë¡œë”©:** ë„ë©”ì¸ì„ ìš”ì²­ ì‹œ ë¡œë“œ ê°€ëŠ¥
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±:** ì»¨í…ìŠ¤íŠ¸ ê²½ê³„ê°€ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

---

## ìš”ì•½

Context-Action í”„ë ˆì„ì›Œí¬ì˜ ì² í•™ì€ **ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬**ì™€ í•¨ê»˜ **íƒ€ì… ì•ˆì „í•œ ë„ë©”ì¸ ê²©ë¦¬**ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•©ë‹ˆë‹¤. MVVMì—ì„œ ì˜ê°ë°›ì€ íŒ¨í„´ê³¼ ì„ ì–¸ì  ì•¡ì…˜ íŒŒì´í”„ë¼ì¸ì„ ë”°ë¥´ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë” ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰½ê³ , í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰½ê³ , í™•ì¥ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

í”„ë ˆì„ì›Œí¬ëŠ” ìë™ íƒ€ì… ì¶”ë¡ , ì§ê´€ì ì¸ API, ê·¸ë¦¬ê³  ì˜¬ë°”ë¥¸ ì‚¬ìš© íŒ¨í„´ì„ ì•ˆë‚´í•˜ëŠ” ëª…í™•í•œ ì•„í‚¤í…ì²˜ ê²½ê³„ë¥¼ í†µí•´ ê°œë°œì ê²½í—˜ì„ ìš°ì„ ì‹œí•©ë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
ì´ì œ ì² í•™ì„ ì´í•´í–ˆìœ¼ë‹ˆ, [í•µì‹¬ ê°œë…](./concepts)ì„ íƒìƒ‰í•˜ì—¬ ì´ëŸ¬í•œ ì›ì¹™ì´ ì‹¤ìš©ì ì¸ êµ¬í˜„ íŒ¨í„´ìœ¼ë¡œ ì–´ë–»ê²Œ ë³€í™˜ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.
:::

---


# Guide Provider Composition

**Source**: `guide/provider-composition.md`  
**Priority**: 80 (essential)  

# í”„ë¡œë°”ì´ë” êµ¬ì„±

í”„ë¡œë°”ì´ë” êµ¬ì„±ì€ Context-Action í”„ë ˆì„ì›Œí¬ì—ì„œ ë„ë©”ì¸ ê²½ê³„ë¥¼ ì •ì˜í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì„±í•˜ëŠ” í•µì‹¬ íŒ¨í„´ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” íš¨ê³¼ì ì¸ í”„ë¡œë°”ì´ë” ì¡°í•© ì „ëµì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ê¸°ë³¸ í”„ë¡œë°”ì´ë” êµ¬ì¡°

### ë‹¨ì¼ ë„ë©”ì¸ í”„ë¡œë°”ì´ë”

```typescript
// providers/UserProvider.tsx
import React from 'react';
import { UserStoreProvider, UserActionProvider } from '@/stores/user';
import { useUserHandlers } from '@/hooks/handlers/useUserHandlers';

// í•¸ë“¤ëŸ¬ ì„¤ì • ì»´í¬ë„ŒíŠ¸
function UserHandlersSetup() {
  useUserHandlers(); // ëª¨ë“  ì‚¬ìš©ì í•¸ë“¤ëŸ¬ ë“±ë¡
  return null;
}

// í†µí•© ì‚¬ìš©ì í”„ë¡œë°”ì´ë”
export function UserProvider({ children }: { children: React.ReactNode }) {
  return (
    <UserStoreProvider>
      <UserActionProvider>
        <UserHandlersSetup />
        {children}
      </UserActionProvider>
    </UserStoreProvider>
  );
}

// ì‚¬ìš©ë²•
function UserSection() {
  return (
    <UserProvider>
      <UserProfile />
      <UserSettings />
    </UserProvider>
  );
}
```

### ë‹¤ì¤‘ ë„ë©”ì¸ í”„ë¡œë°”ì´ë”

```typescript
// providers/AppProvider.tsx
import React from 'react';
import { UserProvider } from './UserProvider';
import { CartProvider } from './CartProvider';
import { OrderProvider } from './OrderProvider';
import { NotificationProvider } from './NotificationProvider';

// ê³„ì¸µì  í”„ë¡œë°”ì´ë” êµ¬ì„±
export function AppProvider({ children }: { children: React.ReactNode }) {
  return (
    <UserProvider>          {/* ìµœìƒìœ„: ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ */}
      <NotificationProvider> {/* ì•Œë¦¼ ì‹œìŠ¤í…œ */}
        <CartProvider>       {/* ì¥ë°”êµ¬ë‹ˆ ë„ë©”ì¸ */}
          <OrderProvider>    {/* ì£¼ë¬¸ ë„ë©”ì¸ */}
            {children}
          </OrderProvider>
        </CartProvider>
      </NotificationProvider>
    </UserProvider>
  );
}
```

## í”„ë¡œë°”ì´ë” êµ¬ì„± íŒ¨í„´

### 1. ê³„ì¸µì  êµ¬ì„±

```typescript
// ì˜ì¡´ì„± ìˆœì„œì— ë”°ë¥¸ ê³„ì¸µ êµ¬ì„±
function HierarchicalProviders({ children }: { children: React.ReactNode }) {
  return (
    // Level 1: ê¸°ë°˜ ì„œë¹„ìŠ¤ (ì¸ì¦, ì„¤ì •)
    <AuthProvider>
      <ConfigProvider>
        
        {/* Level 2: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ */}
        <UserProvider>
          <ProductProvider>
            
            {/* Level 3: ìƒìœ„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ */}
            <CartProvider>
              <OrderProvider>
                
                {/* Level 4: UI/UX ë„ë©”ì¸ */}
                <NotificationProvider>
                  <ThemeProvider>
                    {children}
                  </ThemeProvider>
                </NotificationProvider>
                
              </OrderProvider>
            </CartProvider>
            
          </ProductProvider>
        </UserProvider>
        
      </ConfigProvider>
    </AuthProvider>
  );
}
```

### 2. ë³‘ë ¬ êµ¬ì„±

```typescript
// ë…ë¦½ì ì¸ ë„ë©”ì¸ë“¤ì˜ ë³‘ë ¬ êµ¬ì„±
function ParallelProviders({ children }: { children: React.ReactNode }) {
  return (
    <div>
      {/* ê° ë„ë©”ì¸ì´ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™ */}
      <UserProvider>
        <UserSection />
      </UserProvider>
      
      <CartProvider>
        <ShoppingSection />
      </CartProvider>
      
      <OrderProvider>
        <OrderHistorySection />
      </OrderProvider>
      
      {/* ê³µí†µ ì˜ì—­ì€ ì—¬ëŸ¬ í”„ë¡œë°”ì´ë”ë¡œ ë˜í•‘ */}
      <UserProvider>
        <CartProvider>
          <CheckoutSection />
        </CartProvider>
      </UserProvider>
    </div>
  );
}
```

### 3. ì¡°ê±´ë¶€ êµ¬ì„±

```typescript
// ì‚¬ìš©ì ì—­í• ì— ë”°ë¥¸ ì¡°ê±´ë¶€ í”„ë¡œë°”ì´ë”
interface ConditionalProvidersProps {
  children: React.ReactNode;
  userRole: 'guest' | 'user' | 'admin';
}

export function ConditionalProviders({ children, userRole }: ConditionalProvidersProps) {
  // ê¸°ë³¸ í”„ë¡œë°”ì´ë” (ëª¨ë“  ì—­í• )
  let providers = (
    <UserProvider>
      <ProductProvider>
        {children}
      </ProductProvider>
    </UserProvider>
  );
  
  // ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ìš©
  if (userRole !== 'guest') {
    providers = (
      <UserProvider>
        <ProductProvider>
          <CartProvider>
            <OrderProvider>
              {children}
            </OrderProvider>
          </CartProvider>
        </ProductProvider>
      </UserProvider>
    );
  }
  
  // ê´€ë¦¬ì ì „ìš©
  if (userRole === 'admin') {
    providers = (
      <UserProvider>
        <ProductProvider>
          <CartProvider>
            <OrderProvider>
              <AdminProvider>
                <AnalyticsProvider>
                  {children}
                </AnalyticsProvider>
              </AdminProvider>
            </OrderProvider>
          </CartProvider>
        </ProductProvider>
      </UserProvider>
    );
  }
  
  return providers;
}
```

### 4. ë™ì  êµ¬ì„±

```typescript
// ëŸ°íƒ€ì„ì— í”„ë¡œë°”ì´ë” ë™ì  êµ¬ì„±
interface DynamicProvidersProps {
  children: React.ReactNode;
  enabledFeatures: string[];
}

export function DynamicProviders({ children, enabledFeatures }: DynamicProvidersProps) {
  const [providers, setProviders] = useState<React.ComponentType<any>[]>([]);
  
  useEffect(() => {
    const providersList = [UserProvider]; // ê¸°ë³¸ í”„ë¡œë°”ì´ë”
    
    // ê¸°ëŠ¥ë³„ í”„ë¡œë°”ì´ë” ì¶”ê°€
    if (enabledFeatures.includes('cart')) {
      providersList.push(CartProvider);
    }
    
    if (enabledFeatures.includes('notifications')) {
      providersList.push(NotificationProvider);
    }
    
    if (enabledFeatures.includes('analytics')) {
      providersList.push(AnalyticsProvider);
    }
    
    setProviders(providersList);
  }, [enabledFeatures]);
  
  // í”„ë¡œë°”ì´ë”ë“¤ì„ ì¤‘ì²©ìœ¼ë¡œ êµ¬ì„±
  const renderProviders = (providers: React.ComponentType<any>[], index = 0): React.ReactNode => {
    if (index >= providers.length) {
      return children;
    }
    
    const Provider = providers[index];
    return (
      <Provider>
        {renderProviders(providers, index + 1)}
      </Provider>
    );
  };
  
  return <>{renderProviders(providers)}</>;
}
```

## ê³ ê¸‰ êµ¬ì„± íŒ¨í„´

### 1. íŒ©í† ë¦¬ íŒ¨í„´

```typescript
// í”„ë¡œë°”ì´ë” íŒ©í† ë¦¬
interface ProviderConfig {
  user: boolean;
  cart: boolean;
  orders: boolean;
  admin?: boolean;
  analytics?: boolean;
}

export function createProviderStack(config: ProviderConfig) {
  return function ProviderStack({ children }: { children: React.ReactNode }) {
    let stack = children;
    
    // ì—­ìˆœìœ¼ë¡œ í”„ë¡œë°”ì´ë” ì ìš© (ê°€ì¥ ì•ˆìª½ë¶€í„°)
    if (config.analytics) {
      stack = <AnalyticsProvider>{stack}</AnalyticsProvider>;
    }
    
    if (config.admin) {
      stack = <AdminProvider>{stack}</AdminProvider>;
    }
    
    if (config.orders) {
      stack = <OrderProvider>{stack}</OrderProvider>;
    }
    
    if (config.cart) {
      stack = <CartProvider>{stack}</CartProvider>;
    }
    
    if (config.user) {
      stack = <UserProvider>{stack}</UserProvider>;
    }
    
    return <>{stack}</>;
  };
}

// ì‚¬ìš©ë²•
const UserAppProviders = createProviderStack({
  user: true,
  cart: true,
  orders: false,
  admin: false
});

const AdminAppProviders = createProviderStack({
  user: true,
  cart: true,
  orders: true,
  admin: true,
  analytics: true
});

function UserApp() {
  return (
    <UserAppProviders>
      <UserDashboard />
    </UserAppProviders>
  );
}
```

### 2. ì»¨í…ìŠ¤íŠ¸ ì „ë‹¬ íŒ¨í„´

```typescript
// ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì—ì„œ í•˜ìœ„ ì»¨í…ìŠ¤íŠ¸ë¡œ ë°ì´í„° ì „ë‹¬
interface CartProviderProps {
  children: React.ReactNode;
  userId?: string; // ìƒìœ„ì—ì„œ ì „ë‹¬ë°›ì€ ì‚¬ìš©ì ID
}

export function EnhancedCartProvider({ children, userId }: CartProviderProps) {
  return (
    <CartStoreProvider>
      <CartActionProvider>
        <CartHandlersSetup userId={userId} />
        {children}
      </CartActionProvider>
    </CartStoreProvider>
  );
}

function CartHandlersSetup({ userId }: { userId?: string }) {
  useCartHandlers(userId); // ì‚¬ìš©ì IDë¥¼ í•¸ë“¤ëŸ¬ì— ì „ë‹¬
  return null;
}

// í†µí•© ì‚¬ìš©ë²•
function IntegratedProviders({ children }: { children: React.ReactNode }) {
  const [currentUserId, setCurrentUserId] = useState<string>();
  
  return (
    <UserProvider>
      {/* ì‚¬ìš©ì ID íšë“ì„ ìœ„í•œ ì»´í¬ë„ŒíŠ¸ */}
      <UserIdCapture onUserIdChange={setCurrentUserId} />
      
      {/* ì‚¬ìš©ì IDë¥¼ ì¥ë°”êµ¬ë‹ˆ í”„ë¡œë°”ì´ë”ì— ì „ë‹¬ */}
      <EnhancedCartProvider userId={currentUserId}>
        {children}
      </EnhancedCartProvider>
    </UserProvider>
  );
}
```

### 3. ì§€ì—° ë¡œë”© í”„ë¡œë°”ì´ë”

```typescript
// ì½”ë“œ ë¶„í• ì„ í™œìš©í•œ ì§€ì—° ë¡œë”©
const LazyCartProvider = React.lazy(() => import('./CartProvider'));
const LazyOrderProvider = React.lazy(() => import('./OrderProvider'));
const LazyAdminProvider = React.lazy(() => import('./AdminProvider'));

interface LazyProvidersProps {
  children: React.ReactNode;
  features: {
    cart?: boolean;
    orders?: boolean;
    admin?: boolean;
  };
}

export function LazyProviders({ children, features }: LazyProvidersProps) {
  return (
    <UserProvider>
      <Suspense fallback={<div>ê¸°ë³¸ ê¸°ëŠ¥ ë¡œë”© ì¤‘...</div>}>
        {features.cart ? (
          <LazyCartProvider>
            <Suspense fallback={<div>ì£¼ë¬¸ ê¸°ëŠ¥ ë¡œë”© ì¤‘...</div>}>
              {features.orders ? (
                <LazyOrderProvider>
                  <Suspense fallback={<div>ê´€ë¦¬ì ê¸°ëŠ¥ ë¡œë”© ì¤‘...</div>}>
                    {features.admin ? (
                      <LazyAdminProvider>
                        {children}
                      </LazyAdminProvider>
                    ) : children}
                  </Suspense>
                </LazyOrderProvider>
              ) : children}
            </Suspense>
          </LazyCartProvider>
        ) : children}
      </Suspense>
    </UserProvider>
  );
}
```

## í”„ë¡œë°”ì´ë” ìµœì í™”

### 1. ë©”ëª¨í™”ëœ í”„ë¡œë°”ì´ë”

```typescript
// ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
const MemoizedUserProvider = React.memo<{
  children: React.ReactNode;
  config?: UserProviderConfig;
}>(({ children, config }) => {
  return (
    <UserStoreProvider config={config}>
      <UserActionProvider>
        <UserHandlersSetup />
        {children}
      </UserActionProvider>
    </UserStoreProvider>
  );
});

// ì„¤ì •ì´ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§
function OptimizedApp() {
  const [userConfig] = useState({ debug: false, logLevel: 'warn' });
  
  return (
    <MemoizedUserProvider config={userConfig}>
      <AppContent />
    </MemoizedUserProvider>
  );
}
```

### 2. ì¡°ê±´ë¶€ ë Œë”ë§ ìµœì í™”

```typescript
// ì¡°ê±´ë¶€ í”„ë¡œë°”ì´ë” ìµœì í™”
function ConditionalOptimizedProviders({ 
  children, 
  userRole 
}: { 
  children: React.ReactNode; 
  userRole: string;
}) {
  // ì—­í• ë³„ í”„ë¡œë°”ì´ë” êµ¬ì„± ë©”ëª¨í™”
  const ProviderComponent = useMemo(() => {
    switch (userRole) {
      case 'admin':
        return ({ children }) => (
          <UserProvider>
            <CartProvider>
              <OrderProvider>
                <AdminProvider>
                  {children}
                </AdminProvider>
              </OrderProvider>
            </CartProvider>
          </UserProvider>
        );
      
      case 'user':
        return ({ children }) => (
          <UserProvider>
            <CartProvider>
              <OrderProvider>
                {children}
              </OrderProvider>
            </CartProvider>
          </UserProvider>
        );
      
      default:
        return ({ children }) => (
          <UserProvider>
            {children}
          </UserProvider>
        );
    }
  }, [userRole]);
  
  return <ProviderComponent>{children}</ProviderComponent>;
}
```

### 3. í”„ë¡œë°”ì´ë” ë¶„í• 

```typescript
// ê¸°ëŠ¥ë³„ í”„ë¡œë°”ì´ë” ë¶„í• 
function CoreProviders({ children }: { children: React.ReactNode }) {
  return (
    <ErrorBoundary>
      <UserProvider>
        <ConfigProvider>
          {children}
        </ConfigProvider>
      </UserProvider>
    </ErrorBoundary>
  );
}

function BusinessProviders({ children }: { children: React.ReactNode }) {
  return (
    <CartProvider>
      <OrderProvider>
        <PaymentProvider>
          {children}
        </PaymentProvider>
      </OrderProvider>
    </CartProvider>
  );
}

function UIProviders({ children }: { children: React.ReactNode }) {
  return (
    <ThemeProvider>
      <NotificationProvider>
        <ModalProvider>
          {children}
        </ModalProvider>
      </NotificationProvider>
    </ThemeProvider>
  );
}

// ì¡°í•©ëœ ì• í”Œë¦¬ì¼€ì´ì…˜
function App() {
  return (
    <CoreProviders>
      <BusinessProviders>
        <UIProviders>
          <Router>
            <Routes />
          </Router>
        </UIProviders>
      </BusinessProviders>
    </CoreProviders>
  );
}
```

## í”„ë¡œë°”ì´ë” í…ŒìŠ¤íŒ…

### 1. í…ŒìŠ¤íŠ¸ í”„ë¡œë°”ì´ë”

```typescript
// í…ŒìŠ¤íŠ¸ìš© í”„ë¡œë°”ì´ë” ë˜í¼
export function TestProviders({ 
  children,
  initialStores = {}
}: {
  children: React.ReactNode;
  initialStores?: Record<string, any>;
}) {
  return (
    <UserProvider>
      <CartProvider>
        <TestStoreInitializer initialStores={initialStores}>
          {children}
        </TestStoreInitializer>
      </CartProvider>
    </UserProvider>
  );
}

// í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
export const renderWithProviders = (
  ui: React.ReactElement,
  options: {
    initialStores?: Record<string, any>;
    providerProps?: any;
  } = {}
) => {
  const { initialStores, providerProps } = options;
  
  const Wrapper = ({ children }) => (
    <TestProviders initialStores={initialStores} {...providerProps}>
      {children}
    </TestProviders>
  );
  
  return render(ui, { wrapper: Wrapper });
};

// ì‚¬ìš©ë²•
describe('UserProfile', () => {
  it('ì´ˆê¸° ì‚¬ìš©ì ë°ì´í„°ë¡œ ë Œë”ë§', () => {
    const initialStores = {
      'user.profile': { name: 'Test User', email: 'test@example.com' }
    };
    
    renderWithProviders(<UserProfile />, { initialStores });
    
    expect(screen.getByText('Test User')).toBeInTheDocument();
  });
});
```

### 2. í”„ë¡œë°”ì´ë” ê²©ë¦¬ í…ŒìŠ¤íŠ¸

```typescript
// íŠ¹ì • ë„ë©”ì¸ë§Œ í…ŒìŠ¤íŠ¸
function renderWithUserProvider(ui: React.ReactElement) {
  return render(
    <UserProvider>
      {ui}
    </UserProvider>
  );
}

function renderWithCartProvider(ui: React.ReactElement) {
  return render(
    <CartProvider>
      {ui}
    </CartProvider>
  );
}

// í¬ë¡œìŠ¤ ë„ë©”ì¸ í…ŒìŠ¤íŠ¸
function renderWithMultipleProviders(ui: React.ReactElement) {
  return render(
    <UserProvider>
      <CartProvider>
        {ui}
      </CartProvider>
    </UserProvider>
  );
}
```

## ë””ë²„ê¹…ê³¼ ê°œë°œ ë„êµ¬

### 1. ê°œë°œ ëª¨ë“œ ë¡œê¹…

```typescript
// ê°œë°œ í™˜ê²½ì—ì„œ í”„ë¡œë°”ì´ë” ë¡œê¹…
function DebuggableProvider({ children, name }: { 
  children: React.ReactNode; 
  name: string;
}) {
  useEffect(() => {
    if (process.env.NODE_ENV === 'development') {
      console.log(`${name} Provider mounted`);
      return () => console.log(`${name} Provider unmounted`);
    }
  }, [name]);
  
  return <>{children}</>;
}

// ì‚¬ìš©ë²•
export function UserProvider({ children }: { children: React.ReactNode }) {
  return (
    <DebuggableProvider name="User">
      <UserStoreProvider>
        <UserActionProvider>
          <UserHandlersSetup />
          {children}
        </UserActionProvider>
      </UserStoreProvider>
    </DebuggableProvider>
  );
}
```

### 2. í”„ë¡œë°”ì´ë” íŠ¸ë¦¬ ì‹œê°í™”

```typescript
// ê°œë°œ ë„êµ¬ìš© í”„ë¡œë°”ì´ë” íŠ¸ë¦¬ í‘œì‹œ
function ProviderTreeDebugger() {
  if (process.env.NODE_ENV !== 'development') {
    return null;
  }
  
  return (
    <div style={{ 
      position: 'fixed', 
      top: 0, 
      right: 0, 
      background: 'rgba(0,0,0,0.8)',
      color: 'white',
      padding: '10px',
      fontSize: '12px'
    }}>
      <h4>Provider Tree</h4>
      <div>â”” App</div>
      <div>&nbsp;&nbsp;â”” UserProvider</div>
      <div>&nbsp;&nbsp;&nbsp;&nbsp;â”” CartProvider</div>
      <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â”” OrderProvider</div>
    </div>
  );
}
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ì˜ì¡´ì„± ìˆœì„œ

```typescript
// âœ… ì¢‹ìŒ: ì˜ì¡´ì„± ìˆœì„œì— ë”°ë¥¸ êµ¬ì„±
function ProperDependencyOrder({ children }: { children: React.ReactNode }) {
  return (
    <AuthProvider>      {/* ê¸°ë°˜ ì¸ì¦ */}
      <UserProvider>    {/* ì‚¬ìš©ì ì •ë³´ (ì¸ì¦ ì˜ì¡´) */}
        <CartProvider>  {/* ì¥ë°”êµ¬ë‹ˆ (ì‚¬ìš©ì ì˜ì¡´) */}
          <OrderProvider> {/* ì£¼ë¬¸ (ì‚¬ìš©ì + ì¥ë°”êµ¬ë‹ˆ ì˜ì¡´) */}
            {children}
          </OrderProvider>
        </CartProvider>
      </UserProvider>
    </AuthProvider>
  );
}

// âŒ í”¼í•˜ê¸°: ì˜ëª»ëœ ì˜ì¡´ì„± ìˆœì„œ
function WrongDependencyOrder({ children }: { children: React.ReactNode }) {
  return (
    <OrderProvider>     {/* ì£¼ë¬¸ì´ ìµœìƒìœ„? */}
      <CartProvider>    {/* ì¥ë°”êµ¬ë‹ˆê°€ ì‚¬ìš©ìë³´ë‹¤ ìœ„? */}
        <UserProvider>  {/* ì‚¬ìš©ì ì •ë³´ê°€ ë§ˆì§€ë§‰? */}
          <AuthProvider> {/* ì¸ì¦ì´ ê°€ì¥ ì•ˆìª½? */}
            {children}
          </AuthProvider>
        </UserProvider>
      </CartProvider>
    </OrderProvider>
  );
}
```

### 2. ì ì ˆí•œ ê²½ê³„ ì„¤ì •

```typescript
// âœ… ì¢‹ìŒ: ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„
function App() {
  return (
    <div>
      {/* ì‚¬ìš©ì ê´€ë ¨ ì„¹ì…˜ */}
      <UserProvider>
        <Header />
        <UserDashboard />
      </UserProvider>
      
      {/* ì‡¼í•‘ ê´€ë ¨ ì„¹ì…˜ */}
      <UserProvider>
        <CartProvider>
          <ShoppingArea />
          <Checkout />
        </CartProvider>
      </UserProvider>
      
      {/* ê´€ë¦¬ì ì „ìš© ì„¹ì…˜ */}
      <AdminProvider>
        <AdminPanel />
      </AdminProvider>
    </div>
  );
}
```

### 3. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

```typescript
// âœ… ì¢‹ìŒ: í•„ìš”í•œ ê³³ì—ë§Œ í”„ë¡œë°”ì´ë” ì ìš©
function OptimizedLayout() {
  return (
    <div>
      <Header /> {/* í”„ë¡œë°”ì´ë” ì—†ìŒ - ì •ì  í—¤ë” */}
      
      <main>
        <UserProvider>
          <UserContent /> {/* ì‚¬ìš©ì ë°ì´í„°ê°€ í•„ìš”í•œ ë¶€ë¶„ë§Œ */}
        </UserProvider>
      </main>
      
      <Footer /> {/* í”„ë¡œë°”ì´ë” ì—†ìŒ - ì •ì  í‘¸í„° */}
    </div>
  );
}

// âŒ í”¼í•˜ê¸°: ë¶ˆí•„ìš”í•œ ì „ì—­ í”„ë¡œë°”ì´ë”
function InefficientLayout() {
  return (
    <UserProvider> {/* ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ë˜í•‘ */}
      <Header />   {/* ì‚¬ìš©ì ë°ì´í„° ë¶ˆí•„ìš” */}
      <main>
        <UserContent />
      </main>
      <Footer />   {/* ì‚¬ìš©ì ë°ì´í„° ë¶ˆí•„ìš” */}
    </UserProvider>
  );
}
```

---

## ìš”ì•½

íš¨ê³¼ì ì¸ í”„ë¡œë°”ì´ë” êµ¬ì„±ì€ ë‹¤ìŒ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

- **ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„** - ì±…ì„ê³¼ ì˜ì¡´ì„±ì— ë”°ë¥¸ ë¶„ë¦¬
- **ì ì ˆí•œ ê³„ì¸µ êµ¬ì¡°** - ì˜ì¡´ì„± ìˆœì„œì— ë”°ë¥¸ ì¤‘ì²©
- **ì„±ëŠ¥ ìµœì í™”** - í•„ìš”í•œ ê³³ì—ë§Œ í”„ë¡œë°”ì´ë” ì ìš©
- **ìœ ì—°í•œ êµ¬ì„±** - ì¡°ê±´ë¶€ ë° ë™ì  í”„ë¡œë°”ì´ë” ì§€ì›
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±** - ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ êµ¬ì¡°

ì˜¬ë°”ë¥¸ í”„ë¡œë°”ì´ë” êµ¬ì„±ì„ í†µí•´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [í•¸ë“¤ëŸ¬ ID ì „ëµ](./handler-id-strategies) - í•¸ë“¤ëŸ¬ ì‹ë³„ê³¼ ê´€ë¦¬
- [í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©](./cross-domain-integration) - ë„ë©”ì¸ ê°„ í†µì‹  íŒ¨í„´
- [ì„±ëŠ¥ ìµœì í™”](./performance) - í”„ë¡œë°”ì´ë” ì„±ëŠ¥ ìµœì í™”
:::

---


# Guide React Integration

**Source**: `guide/react-integration.md`  
**Priority**: 80 (essential)  

# React í†µí•©

Context-Action í”„ë ˆì„ì›Œí¬ëŠ” Reactì˜ Context APIì™€ í›… ì‹œìŠ¤í…œì„ ì™„ì „íˆ í™œìš©í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ React ê°œë°œ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” íš¨ê³¼ì ì¸ React í†µí•© íŒ¨í„´ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ê¸°ë³¸ í†µí•© íŒ¨í„´

### ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ìƒíƒœ êµ¬ë…

```typescript
// ë°˜ì‘í˜• ìƒíƒœ êµ¬ë…
function UserProfile() {
  // ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ ì ‘ê·¼
  const profileStore = useUserStore('profile');
  const settingsStore = useUserStore('settings');
  
  // ìë™ êµ¬ë…ê³¼ ë¦¬ë Œë”ë§
  const profile = useStoreValue(profileStore);
  const settings = useStoreValue(settingsStore);
  
  return (
    <div className={`profile theme-${settings.theme}`}>
      <img src={profile.avatar} alt={`${profile.name}ì˜ ì•„ë°”íƒ€`} />
      <h1>{profile.name}</h1>
      <p>{profile.email}</p>
    </div>
  );
}
```

### ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜

```typescript
function UserEditor() {
  const dispatch = useUserAction();
  const [formData, setFormData] = useState({
    name: '',
    email: ''
  });
  
  const handleSubmit = useCallback(async (e: React.FormEvent) => {
    e.preventDefault();
    
    // íƒ€ì… ì•ˆì „í•œ ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
    await dispatch('updateProfile', {
      data: formData
    });
    
    // í¼ ì´ˆê¸°í™”
    setFormData({ name: '', email: '' });
  }, [dispatch, formData]);
  
  return (
    <form onSubmit={handleSubmit}>
      <input
        value={formData.name}
        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
        placeholder="ì´ë¦„"
      />
      <input
        type="email"
        value={formData.email}
        onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}
        placeholder="ì´ë©”ì¼"
      />
      <button type="submit">ì €ì¥</button>
    </form>
  );
}
```

## ê³ ê¸‰ í†µí•© íŒ¨í„´

### 1. ì„ íƒì  êµ¬ë…

```typescript
function OptimizedUserDisplay() {
  const profileStore = useUserStore('profile');
  
  // íŠ¹ì • í•„ë“œë§Œ êµ¬ë…í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
  const userName = useStoreValue(profileStore, profile => profile.name);
  const userEmail = useStoreValue(profileStore, profile => profile.email);
  
  // status ë³€ê²½ ì‹œì—ëŠ” ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠìŒ
  return (
    <div>
      <h2>{userName}</h2>
      <p>{userEmail}</p>
    </div>
  );
}
```

### 2. ì¡°ê±´ë¶€ êµ¬ë…

```typescript
function ConditionalUserData({ showDetails }: { showDetails: boolean }) {
  const profileStore = useUserStore('profile');
  
  // showDetailsê°€ trueì¼ ë•Œë§Œ í”„ë¡œí•„ ë°ì´í„° êµ¬ë…
  const profile = useStoreValue(profileStore, 
    showDetails 
      ? (profile) => profile  // ì „ì²´ í”„ë¡œí•„ êµ¬ë…
      : () => null           // êµ¬ë… ì•ˆí•¨
  );
  
  if (!showDetails) {
    return <div>ê¸°ë³¸ ì •ë³´ë§Œ í‘œì‹œ</div>;
  }
  
  return (
    <div>
      <h2>{profile?.name}</h2>
      <p>ì´ë©”ì¼: {profile?.email}</p>
      <p>ê°€ì…ì¼: {profile?.joinDate}</p>
    </div>
  );
}
```

### 3. íŒŒìƒ ìƒíƒœ íŒ¨í„´

```typescript
function UserStatsDisplay() {
  const profileStore = useUserStore('profile');
  const activityStore = useUserStore('activity');
  
  const profile = useStoreValue(profileStore);
  const activity = useStoreValue(activityStore);
  
  // íŒŒìƒ ìƒíƒœ ê³„ì‚°
  const stats = useMemo(() => {
    const accountAge = Date.now() - new Date(profile.joinDate).getTime();
    const avgDailyActivity = activity.totalActions / (accountAge / (24 * 60 * 60 * 1000));
    
    return {
      accountAgeDays: Math.floor(accountAge / (24 * 60 * 60 * 1000)),
      averageDailyActivity: Math.round(avgDailyActivity * 100) / 100,
      activityLevel: avgDailyActivity > 10 ? 'high' : avgDailyActivity > 5 ? 'medium' : 'low'
    };
  }, [profile.joinDate, activity.totalActions]);
  
  return (
    <div>
      <h3>ì‚¬ìš©ì í†µê³„</h3>
      <p>ê³„ì • ì‚¬ìš© ì¼ìˆ˜: {stats.accountAgeDays}ì¼</p>
      <p>ì¼í‰ê·  í™œë™: {stats.averageDailyActivity}</p>
      <p>í™œë™ ìˆ˜ì¤€: {stats.activityLevel}</p>
    </div>
  );
}
```

### 4. ì‚¬ìš©ì ì •ì˜ í›… ì¡°í•©

```typescript
// ë³µí•© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í›…
function useUserProfile() {
  const profileStore = useUserStore('profile');
  const sessionStore = useUserStore('session');
  const dispatch = useUserAction();
  
  const profile = useStoreValue(profileStore);
  const session = useStoreValue(sessionStore);
  
  const [isUpdating, setIsUpdating] = useState(false);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ë¡œì§
  const updateProfile = useCallback(async (data: Partial<UserProfile>) => {
    setIsUpdating(true);
    try {
      await dispatch('updateProfile', { data });
    } finally {
      setIsUpdating(false);
    }
  }, [dispatch]);
  
  // ì¸ì¦ ìƒíƒœ í™•ì¸
  const isAuthenticated = useMemo(() => {
    return session.isLoggedIn && 
           session.token && 
           (!session.expiresAt || session.expiresAt > Date.now());
  }, [session]);
  
  // í”„ë¡œí•„ ì™„ì„±ë„
  const completionRate = useMemo(() => {
    const fields = ['name', 'email', 'avatar', 'bio', 'location'];
    const completed = fields.filter(field => profile[field]).length;
    return Math.round((completed / fields.length) * 100);
  }, [profile]);
  
  return {
    profile,
    session,
    isUpdating,
    isAuthenticated,
    completionRate,
    updateProfile
  };
}

// ì‚¬ìš©ë²•
function UserProfileCard() {
  const { 
    profile, 
    isUpdating, 
    isAuthenticated, 
    completionRate, 
    updateProfile 
  } = useUserProfile();
  
  if (!isAuthenticated) {
    return <LoginPrompt />;
  }
  
  return (
    <div className="profile-card">
      <div className="profile-header">
        <img src={profile.avatar} alt="í”„ë¡œí•„ ì‚¬ì§„" />
        <h2>{profile.name}</h2>
        <div className="completion-badge">
          í”„ë¡œí•„ ì™„ì„±ë„: {completionRate}%
        </div>
      </div>
      
      <ProfileEditForm 
        profile={profile}
        onUpdate={updateProfile}
        isLoading={isUpdating}
      />
    </div>
  );
}
```

### 5. í¼ ìƒíƒœ í†µí•©

```typescript
// í¼ê³¼ ê¸€ë¡œë²Œ ìƒíƒœì˜ í†µí•©
function UserSettingsForm() {
  const settingsStore = useUserStore('settings');
  const settings = useStoreValue(settingsStore);
  const dispatch = useUserAction();
  
  // ë¡œì»¬ í¼ ìƒíƒœ (ì„ì‹œ í¸ì§‘ ìƒíƒœ)
  const [localSettings, setLocalSettings] = useState(settings);
  const [hasChanges, setHasChanges] = useState(false);
  
  // ê¸€ë¡œë²Œ ìƒíƒœ ë³€ê²½ ì‹œ ë¡œì»¬ ìƒíƒœ ë™ê¸°í™”
  useEffect(() => {
    setLocalSettings(settings);
    setHasChanges(false);
  }, [settings]);
  
  // í¼ ë³€ê²½ ê°ì§€
  const handleFieldChange = useCallback((field: string, value: any) => {
    setLocalSettings(prev => {
      const updated = { ...prev, [field]: value };
      setHasChanges(JSON.stringify(updated) !== JSON.stringify(settings));
      return updated;
    });
  }, [settings]);
  
  // ì €ì¥
  const handleSave = useCallback(async () => {
    if (hasChanges) {
      await dispatch('updateSettings', { settings: localSettings });
    }
  }, [dispatch, localSettings, hasChanges]);
  
  // ì·¨ì†Œ
  const handleCancel = useCallback(() => {
    setLocalSettings(settings);
    setHasChanges(false);
  }, [settings]);
  
  return (
    <form>
      <div>
        <label>í…Œë§ˆ</label>
        <select
          value={localSettings.theme}
          onChange={(e) => handleFieldChange('theme', e.target.value)}
        >
          <option value="light">ë¼ì´íŠ¸</option>
          <option value="dark">ë‹¤í¬</option>
        </select>
      </div>
      
      <div>
        <label>ì–¸ì–´</label>
        <select
          value={localSettings.language}
          onChange={(e) => handleFieldChange('language', e.target.value)}
        >
          <option value="ko">í•œêµ­ì–´</option>
          <option value="en">English</option>
        </select>
      </div>
      
      <div>
        <label>
          <input
            type="checkbox"
            checked={localSettings.notifications}
            onChange={(e) => handleFieldChange('notifications', e.target.checked)}
          />
          ì•Œë¦¼ ë°›ê¸°
        </label>
      </div>
      
      <div className="form-actions">
        <button 
          type="button" 
          onClick={handleSave}
          disabled={!hasChanges}
        >
          ì €ì¥
        </button>
        <button 
          type="button" 
          onClick={handleCancel}
          disabled={!hasChanges}
        >
          ì·¨ì†Œ
        </button>
      </div>
    </form>
  );
}
```

## ì„±ëŠ¥ ìµœì í™” íŒ¨í„´

### 1. ì»´í¬ë„ŒíŠ¸ ë¶„í• 

```typescript
// âŒ ë¹„íš¨ìœ¨ì : í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ëª¨ë“  ìƒíƒœ êµ¬ë…
function LargeUserComponent() {
  const profile = useStoreValue(useUserStore('profile'));
  const settings = useStoreValue(useUserStore('settings'));
  const activity = useStoreValue(useUserStore('activity'));
  const notifications = useStoreValue(useUserStore('notifications'));
  
  // ëª¨ë“  ìƒíƒœ ë³€ê²½ ì‹œ ì „ì²´ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
  return (
    <div>
      <UserHeader profile={profile} />
      <UserSettings settings={settings} />
      <UserActivity activity={activity} />
      <UserNotifications notifications={notifications} />
    </div>
  );
}

// âœ… íš¨ìœ¨ì : ì±…ì„ë³„ë¡œ ì»´í¬ë„ŒíŠ¸ ë¶„í• 
function OptimizedUserDashboard() {
  return (
    <div>
      <UserHeader />      {/* profile ë³€ê²½ ì‹œë§Œ ë¦¬ë Œë”ë§ */}
      <UserSettings />    {/* settings ë³€ê²½ ì‹œë§Œ ë¦¬ë Œë”ë§ */}
      <UserActivity />    {/* activity ë³€ê²½ ì‹œë§Œ ë¦¬ë Œë”ë§ */}
      <UserNotifications /> {/* notifications ë³€ê²½ ì‹œë§Œ ë¦¬ë Œë”ë§ */}
    </div>
  );
}

function UserHeader() {
  const profile = useStoreValue(useUserStore('profile'));
  return (
    <header>
      <h1>{profile.name}</h1>
      <img src={profile.avatar} alt="í”„ë¡œí•„" />
    </header>
  );
}

function UserSettings() {
  const settings = useStoreValue(useUserStore('settings'));
  return (
    <div className={`settings theme-${settings.theme}`}>
      <h2>ì„¤ì •</h2>
      {/* ì„¤ì • UI */}
    </div>
  );
}
```

### 2. React.memo í™œìš©

```typescript
// ë©”ëª¨í™”ëœ ì»´í¬ë„ŒíŠ¸
const UserCard = React.memo<{
  user: UserProfile;
  onEdit: (id: string) => void;
}>(({ user, onEdit }) => {
  return (
    <div className="user-card">
      <img src={user.avatar} alt={user.name} />
      <h3>{user.name}</h3>
      <p>{user.email}</p>
      <button onClick={() => onEdit(user.id)}>í¸ì§‘</button>
    </div>
  );
});

// ë©”ëª¨í™”ëœ ì•¡ì…˜ í•¸ë“¤ëŸ¬
function UserList() {
  const usersStore = useUserStore('userList');
  const users = useStoreValue(usersStore);
  const dispatch = useUserAction();
  
  // ë©”ëª¨í™”ëœ ì½œë°±
  const handleEdit = useCallback((userId: string) => {
    dispatch('openUserEditor', { userId });
  }, [dispatch]);
  
  return (
    <div className="user-list">
      {users.map(user => (
        <UserCard 
          key={user.id}
          user={user}
          onEdit={handleEdit} // ë©”ëª¨í™”ë˜ì–´ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
        />
      ))}
    </div>
  );
}
```

### 3. ì§€ì—° ë¡œë”©

```typescript
// ì¡°ê±´ë¶€ ì»´í¬ë„ŒíŠ¸ ë¡œë”©
function UserDashboard() {
  const [activeTab, setActiveTab] = useState<'profile' | 'settings' | 'activity'>('profile');
  
  return (
    <div>
      <nav>
        <button 
          onClick={() => setActiveTab('profile')}
          className={activeTab === 'profile' ? 'active' : ''}
        >
          í”„ë¡œí•„
        </button>
        <button 
          onClick={() => setActiveTab('settings')}
          className={activeTab === 'settings' ? 'active' : ''}
        >
          ì„¤ì •
        </button>
        <button 
          onClick={() => setActiveTab('activity')}
          className={activeTab === 'activity' ? 'active' : ''}
        >
          í™œë™
        </button>
      </nav>
      
      <div className="tab-content">
        {activeTab === 'profile' && <UserProfile />}
        {activeTab === 'settings' && <UserSettings />}
        {activeTab === 'activity' && <UserActivity />}
      </div>
    </div>
  );
}

// React.lazyë¡œ ì½”ë“œ ë¶„í• 
const UserActivity = React.lazy(() => import('./UserActivity'));
const UserSettings = React.lazy(() => import('./UserSettings'));

function LazyUserDashboard() {
  const [activeTab, setActiveTab] = useState<'profile' | 'settings' | 'activity'>('profile');
  
  return (
    <div>
      <nav>{/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}</nav>
      
      <Suspense fallback={<div>ë¡œë”© ì¤‘...</div>}>
        <div className="tab-content">
          {activeTab === 'profile' && <UserProfile />}
          {activeTab === 'settings' && <UserSettings />}
          {activeTab === 'activity' && <UserActivity />}
        </div>
      </Suspense>
    </div>
  );
}
```

## ì—ëŸ¬ ê²½ê³„ í†µí•©

### 1. ë„ë©”ì¸ë³„ ì—ëŸ¬ ê²½ê³„

```typescript
// ì‚¬ìš©ì ë„ë©”ì¸ ì—ëŸ¬ ê²½ê³„
class UserErrorBoundary extends React.Component<
  { children: React.ReactNode },
  { hasError: boolean; error?: Error }
> {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }
  
  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }
  
  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    // ì‚¬ìš©ì ë„ë©”ì¸ ì˜¤ë¥˜ ë¡œê¹…
    console.error('User domain error:', error, errorInfo);
    
    // ì˜¤ë¥˜ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ì— ì „ì†¡
    reportError('user-domain', error, errorInfo);
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <div className="error-boundary">
          <h2>ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
          <button onClick={() => this.setState({ hasError: false })}>
            ë‹¤ì‹œ ì‹œë„
          </button>
        </div>
      );
    }
    
    return this.props.children;
  }
}

// ì‚¬ìš©ë²•
function App() {
  return (
    <UserProvider>
      <UserErrorBoundary>
        <UserDashboard />
      </UserErrorBoundary>
    </UserProvider>
  );
}
```

### 2. ì•¡ì…˜ ì—ëŸ¬ ì²˜ë¦¬

```typescript
function UserActionComponent() {
  const dispatch = useUserAction();
  const [error, setError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  
  const handleRiskyAction = useCallback(async () => {
    setIsLoading(true);
    setError(null);
    
    try {
      const result = await dispatch('riskyUserAction', { /* payload */ });
      
      if (!result.success) {
        setError(result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜');
    } finally {
      setIsLoading(false);
    }
  }, [dispatch]);
  
  return (
    <div>
      {error && (
        <div className="error-message">
          ì˜¤ë¥˜: {error}
          <button onClick={() => setError(null)}>Ã—</button>
        </div>
      )}
      
      <button 
        onClick={handleRiskyAction}
        disabled={isLoading}
      >
        {isLoading ? 'ì²˜ë¦¬ ì¤‘...' : 'ìœ„í—˜í•œ ì•¡ì…˜ ì‹¤í–‰'}
      </button>
    </div>
  );
}
```

## í…ŒìŠ¤íŒ… í†µí•©

### 1. ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

```typescript
// __tests__/components/UserProfile.test.tsx
import { render, screen } from '@testing-library/react';
import { UserProvider } from '@/providers/UserProvider';
import { UserProfile } from '@/components/UserProfile';

// í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
const renderWithUserProvider = (ui: React.ReactElement) => {
  return render(
    <UserProvider>
      {ui}
    </UserProvider>
  );
};

describe('UserProfile', () => {
  it('ì‚¬ìš©ì ì •ë³´ë¥¼ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ', async () => {
    renderWithUserProvider(<UserProfile />);
    
    // ê¸°ë³¸ í”„ë¡œí•„ ì •ë³´ í™•ì¸
    expect(screen.getByText('Guest User')).toBeInTheDocument();
    expect(screen.getByText('guest@example.com')).toBeInTheDocument();
  });
  
  it('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ í›„ ë³€ê²½ëœ ì •ë³´ í‘œì‹œ', async () => {
    const { container } = renderWithUserProvider(
      <div>
        <UserProfile />
        <UserEditor />
      </div>
    );
    
    // í”„ë¡œí•„ í¸ì§‘
    const nameInput = screen.getByPlaceholderText('ì´ë¦„');
    const saveButton = screen.getByText('ì €ì¥');
    
    fireEvent.change(nameInput, { target: { value: 'ìƒˆ ì´ë¦„' } });
    fireEvent.click(saveButton);
    
    // ì—…ë°ì´íŠ¸ëœ ì •ë³´ í™•ì¸
    await waitFor(() => {
      expect(screen.getByText('ìƒˆ ì´ë¦„')).toBeInTheDocument();
    });
  });
});
```

### 2. í›… í…ŒìŠ¤íŠ¸

```typescript
// __tests__/hooks/useUserProfile.test.ts
import { renderHook, act } from '@testing-library/react-hooks';
import { UserProvider } from '@/providers/UserProvider';
import { useUserProfile } from '@/hooks/useUserProfile';

const wrapper = ({ children }) => (
  <UserProvider>{children}</UserProvider>
);

describe('useUserProfile', () => {
  it('ì´ˆê¸° í”„ë¡œí•„ ë°ì´í„° ë°˜í™˜', () => {
    const { result } = renderHook(() => useUserProfile(), { wrapper });
    
    expect(result.current.profile).toEqual({
      id: '',
      name: '',
      email: '',
      avatar: null
    });
    expect(result.current.isAuthenticated).toBe(false);
  });
  
  it('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ë™ì‘', async () => {
    const { result } = renderHook(() => useUserProfile(), { wrapper });
    
    await act(async () => {
      await result.current.updateProfile({ name: 'í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì' });
    });
    
    expect(result.current.profile.name).toBe('í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì');
  });
});
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ ì›ì¹™

```typescript
// âœ… ì¢‹ìŒ: ë‹¨ì¼ ì±…ì„ ì»´í¬ë„ŒíŠ¸
function UserAvatar({ size = 'medium' }: { size?: 'small' | 'medium' | 'large' }) {
  const profile = useStoreValue(useUserStore('profile'));
  
  return (
    <img 
      className={`avatar avatar-${size}`}
      src={profile.avatar || '/default-avatar.png'}
      alt={`${profile.name}ì˜ ì•„ë°”íƒ€`}
    />
  );
}

function UserName({ showEmail = false }: { showEmail?: boolean }) {
  const profile = useStoreValue(useUserStore('profile'));
  
  return (
    <div>
      <h2>{profile.name || 'ì´ë¦„ ì—†ìŒ'}</h2>
      {showEmail && <p>{profile.email}</p>}
    </div>
  );
}

// ì¡°í•©ì„ í†µí•œ ë³µí•© ì»´í¬ë„ŒíŠ¸
function UserCard() {
  return (
    <div className="user-card">
      <UserAvatar size="large" />
      <UserName showEmail={true} />
    </div>
  );
}
```

### 2. ìƒíƒœì™€ UIì˜ ë¶„ë¦¬

```typescript
// âœ… ì¢‹ìŒ: í”„ë ˆì  í…Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
interface UserProfileViewProps {
  profile: UserProfile;
  isEditing: boolean;
  onEdit: () => void;
  onSave: (data: Partial<UserProfile>) => void;
  onCancel: () => void;
}

function UserProfileView({ 
  profile, 
  isEditing, 
  onEdit, 
  onSave, 
  onCancel 
}: UserProfileViewProps) {
  // ìˆœìˆ˜í•œ UI ë Œë”ë§ë§Œ ë‹´ë‹¹
  if (isEditing) {
    return <UserEditForm profile={profile} onSave={onSave} onCancel={onCancel} />;
  }
  
  return (
    <div>
      <h1>{profile.name}</h1>
      <p>{profile.email}</p>
      <button onClick={onEdit}>í¸ì§‘</button>
    </div>
  );
}

// ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ ê´€ë¦¬
function UserProfileContainer() {
  const profile = useStoreValue(useUserStore('profile'));
  const dispatch = useUserAction();
  const [isEditing, setIsEditing] = useState(false);
  
  const handleEdit = useCallback(() => setIsEditing(true), []);
  const handleSave = useCallback(async (data: Partial<UserProfile>) => {
    await dispatch('updateProfile', { data });
    setIsEditing(false);
  }, [dispatch]);
  const handleCancel = useCallback(() => setIsEditing(false), []);
  
  return (
    <UserProfileView
      profile={profile}
      isEditing={isEditing}
      onEdit={handleEdit}
      onSave={handleSave}
      onCancel={handleCancel}
    />
  );
}
```

### 3. ì¼ê´€ëœ ë„¤ì´ë°

```typescript
// ì¼ê´€ëœ ëª…ëª… ê·œì¹™
export const useUserProfile = () => { /* ì‚¬ìš©ì í”„ë¡œí•„ ë¡œì§ */ };
export const useUserSettings = () => { /* ì‚¬ìš©ì ì„¤ì • ë¡œì§ */ };
export const useUserActivity = () => { /* ì‚¬ìš©ì í™œë™ ë¡œì§ */ };

// ì»´í¬ë„ŒíŠ¸
export const UserProfile = () => { /* í”„ë¡œí•„ ì»´í¬ë„ŒíŠ¸ */ };
export const UserSettings = () => { /* ì„¤ì • ì»´í¬ë„ŒíŠ¸ */ };
export const UserActivity = () => { /* í™œë™ ì»´í¬ë„ŒíŠ¸ */ };

// í”„ë¡œë°”ì´ë”
export const UserProvider = ({ children }) => { /* ì‚¬ìš©ì í”„ë¡œë°”ì´ë” */ };
```

---

## ìš”ì•½

Context-Actionê³¼ Reactì˜ í†µí•©ì€ ë‹¤ìŒ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:

- **ìì—°ìŠ¤ëŸ¬ìš´ React íŒ¨í„´** - í›…ê³¼ ì»¨í…ìŠ¤íŠ¸ API í™œìš©
- **íƒ€ì… ì•ˆì „í•œ ìƒíƒœ ê´€ë¦¬** - ì™„ì „í•œ TypeScript ì§€ì›
- **ìµœì í™”ëœ ë¦¬ë Œë”ë§** - ì„ íƒì  êµ¬ë…ê³¼ ë©”ëª¨í™”
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°** - ë¶„ë¦¬ëœ ë¡œì§ê³¼ UI
- **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜** - ì»´í¬ë„ŒíŠ¸ ì¡°í•©ê³¼ ì½”ë“œ ë¶„í• 

ì´ëŸ¬í•œ íŒ¨í„´ì„ ë”°ë¥´ë©´ ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ React ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [í”„ë¡œë°”ì´ë” êµ¬ì„±](./provider-composition) - ë„ë©”ì¸ ê²½ê³„ì™€ í”„ë¡œë°”ì´ë” íŒ¨í„´
- [ì„±ëŠ¥ ìµœì í™”](./performance) - React ì„±ëŠ¥ ìµœì í™” ê³ ê¸‰ ê¸°ë²•
- [ëª¨ë²” ì‚¬ë¡€](./best-practices) - í”„ë¡œë•ì…˜ í™˜ê²½ ê¶Œì¥ì‚¬í•­
:::

---


# Guide Setup Usage

**Source**: `guide/setup-usage.md`  
**Priority**: 80 (essential)  

# ì„¤ì • ë° ì‚¬ìš©ë²•

Context-Action í”„ë ˆì„ì›Œí¬ì˜ ìƒì„¸í•œ ì„¤ì • ë°©ë²•ê³¼ ì‹¤ì œ ì‚¬ìš©ë²•ì„ ë°°ì›Œë³´ì„¸ìš”. ì´ ê°€ì´ë“œëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²¬ê³ í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

## ì„¤ì¹˜ ë° ì´ˆê¸° ì„¤ì •

### íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# í•µì‹¬ íŒ¨í‚¤ì§€
npm install @context-action/core @context-action/react

# ì„ íƒì  íŒ¨í‚¤ì§€
npm install @context-action/logger  # ë¡œê¹… ìœ í‹¸ë¦¬í‹°
npm install @context-action/jotai   # Jotai í†µí•© (ì„ íƒ)
```

### TypeScript ì„¤ì •

```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "jsx": "react-jsx",
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true
  }
}
```

## í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •

### ê¶Œì¥ í´ë” êµ¬ì¡°

```
src/
â”œâ”€â”€ stores/          # ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ì™€ ì•¡ì…˜
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ user.store.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ cart/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ hooks/           # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í›…
â”‚   â”œâ”€â”€ handlers/    # ì•¡ì…˜ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ useUserHandlers.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ logic/       # ë³µí•© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ components/      # UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ providers/       # í”„ë¡œë°”ì´ë” êµ¬ì„±
â””â”€â”€ types/          # ê³µí†µ íƒ€ì… ì •ì˜
```

## ë„ë©”ì¸ë³„ ìŠ¤í† ì–´ ì„¤ì •

### 1. ê¸°ë³¸ ìŠ¤í† ì–´ ìƒì„±

```typescript
// stores/user/user.store.ts
import { createDeclarativeStores, createActionContext } from '@context-action/react';

// íƒ€ì… ì •ì˜
export interface UserData {
  profile: {
    id: string;
    name: string;
    email: string;
    role: 'admin' | 'user' | 'guest';
  };
  preferences: {
    theme: 'light' | 'dark';
    language: string;
    notifications: boolean;
  };
  session: {
    isLoggedIn: boolean;
    token: string | null;
    expiresAt: number | null;
  };
}

export interface UserActions {
  // ì¸ì¦ ì•¡ì…˜
  login: { email: string; password: string };
  logout: void;
  refreshToken: void;
  
  // í”„ë¡œí•„ ì•¡ì…˜
  updateProfile: { data: Partial<UserData['profile']> };
  deleteProfile: { confirmation: string };
  
  // ì„¤ì • ì•¡ì…˜
  updatePreferences: { preferences: Partial<UserData['preferences']> };
}

// ìŠ¤í† ì–´ ìƒì„±
export const {
  Provider: UserStoreProvider,
  useStore: useUserStore,
  useStores: useUserStores,
  useCreateStore: useCreateUserStore
} = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: '',
      role: 'guest'
    },
    strategy: 'deep',  // ê¹Šì€ ë¹„êµ
    description: 'ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´'
  },
  preferences: {
    initialValue: {
      theme: 'light',
      language: 'ko',
      notifications: true
    },
    strategy: 'shallow', // ì–•ì€ ë¹„êµ
    description: 'ì‚¬ìš©ì í™˜ê²½ì„¤ì •'
  },
  session: {
    initialValue: {
      isLoggedIn: false,
      token: null,
      expiresAt: null
    },
    strategy: 'reference', // ì°¸ì¡° ë¹„êµ (ê¸°ë³¸ê°’)
    description: 'ì„¸ì…˜ ì •ë³´'
  }
});

// ì•¡ì…˜ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
export const {
  Provider: UserActionProvider,
  useAction: useUserAction,
  useActionHandler: useUserActionHandler,
  useActionDispatchWithResult: useUserActionWithResult
} = createActionContext<UserActions>({
  name: 'UserAction',
  debug: process.env.NODE_ENV === 'development'
});
```

### 2. ì¸ë±ìŠ¤ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°

```typescript
// stores/user/index.ts
export * from './user.store';

// stores/index.ts
export * from './user';
export * from './cart';
export * from './order';
```

## í•¸ë“¤ëŸ¬ êµ¬í˜„

### 1. ê¸°ë³¸ í•¸ë“¤ëŸ¬ íŒ¨í„´

```typescript
// hooks/handlers/useUserHandlers.ts
import { useCallback, useEffect } from 'react';
import { useUserActionHandler, useUserStores, UserActions } from '@/stores/user';

export function useUserHandlers() {
  const addHandler = useUserActionHandler();
  const stores = useUserStores();
  
  // ë¡œê·¸ì¸ í•¸ë“¤ëŸ¬
  const loginHandler = useCallback(async (
    payload: UserActions['login'],
    controller
  ) => {
    const sessionStore = stores.getStore('session');
    const profileStore = stores.getStore('profile');
    
    try {
      // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
      const response = await fetch('/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      
      if (!response.ok) {
        controller.abort('ë¡œê·¸ì¸ ì‹¤íŒ¨: ì˜ëª»ëœ ìê²©ì¦ëª…');
        return { success: false, error: 'INVALID_CREDENTIALS' };
      }
      
      const data = await response.json();
      
      // ì„¸ì…˜ ì—…ë°ì´íŠ¸
      sessionStore.setValue({
        isLoggedIn: true,
        token: data.token,
        expiresAt: Date.now() + (data.expiresIn * 1000)
      });
      
      // í”„ë¡œí•„ ì—…ë°ì´íŠ¸
      profileStore.setValue(data.user);
      
      return { success: true, user: data.user };
      
    } catch (error) {
      controller.abort('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ', error);
      return { success: false, error: 'NETWORK_ERROR' };
    }
  }, [stores]);
  
  // ë¡œê·¸ì•„ì›ƒ í•¸ë“¤ëŸ¬
  const logoutHandler = useCallback(async (payload, controller) => {
    const sessionStore = stores.getStore('session');
    const profileStore = stores.getStore('profile');
    
    try {
      // í† í° ë¬´íš¨í™” (ì„œë²„)
      const session = sessionStore.getValue();
      if (session.token) {
        await fetch('/api/auth/logout', {
          method: 'POST',
          headers: { 
            'Authorization': `Bearer ${session.token}`,
            'Content-Type': 'application/json'
          }
        });
      }
    } catch (error) {
      // ì„œë²„ ì˜¤ë¥˜ì—¬ë„ ë¡œì»¬ ìƒíƒœëŠ” ì •ë¦¬
      console.warn('ì„œë²„ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:', error);
    } finally {
      // ë¡œì»¬ ìƒíƒœ ì •ë¦¬
      sessionStore.setValue({
        isLoggedIn: false,
        token: null,
        expiresAt: null
      });
      
      profileStore.setValue({
        id: '',
        name: '',
        email: '',
        role: 'guest'
      });
    }
    
    return { success: true };
  }, [stores]);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬
  const updateProfileHandler = useCallback(async (
    payload: UserActions['updateProfile'],
    controller
  ) => {
    const profileStore = stores.getStore('profile');
    const sessionStore = stores.getStore('session');
    
    const currentProfile = profileStore.getValue();
    const session = sessionStore.getValue();
    
    // ì¸ì¦ í™•ì¸
    if (!session.isLoggedIn || !session.token) {
      controller.abort('ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤');
      return { success: false, error: 'UNAUTHORIZED' };
    }
    
    // ë°ì´í„° ê²€ì¦
    if (payload.data.email && !payload.data.email.includes('@')) {
      controller.abort('ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹');
      return { success: false, error: 'INVALID_EMAIL' };
    }
    
    try {
      const response = await fetch('/api/user/profile', {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${session.token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload.data)
      });
      
      if (!response.ok) {
        const error = await response.json();
        controller.abort('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨', error);
        return { success: false, error: error.code };
      }
      
      const updatedProfile = await response.json();
      
      // ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸
      profileStore.setValue({
        ...currentProfile,
        ...updatedProfile
      });
      
      return { success: true, profile: updatedProfile };
      
    } catch (error) {
      controller.abort('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜', error);
      return { success: false, error: 'NETWORK_ERROR' };
    }
  }, [stores]);
  
  // í™˜ê²½ì„¤ì • ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬
  const updatePreferencesHandler = useCallback(async (
    payload: UserActions['updatePreferences'],
    controller
  ) => {
    const preferencesStore = stores.getStore('preferences');
    const currentPreferences = preferencesStore.getValue();
    
    // ì¦‰ì‹œ ë¡œì»¬ ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)
    const newPreferences = { ...currentPreferences, ...payload.preferences };
    preferencesStore.setValue(newPreferences);
    
    // ì„œë²„ì— ë™ê¸°í™” (ë°±ê·¸ë¼ìš´ë“œ)
    try {
      const sessionStore = stores.getStore('session');
      const session = sessionStore.getValue();
      
      if (session.isLoggedIn && session.token) {
        await fetch('/api/user/preferences', {
          method: 'PUT',
          headers: {
            'Authorization': `Bearer ${session.token}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload.preferences)
        });
      }
    } catch (error) {
      console.warn('í™˜ê²½ì„¤ì • ë™ê¸°í™” ì‹¤íŒ¨:', error);
      // ì‹¤íŒ¨í•´ë„ ë¡œì»¬ ë³€ê²½ì‚¬í•­ ìœ ì§€
    }
    
    return { success: true, preferences: newPreferences };
  }, [stores]);
  
  // í•¸ë“¤ëŸ¬ ë“±ë¡
  useEffect(() => {
    if (!addHandler) return;
    
    const unregisterLogin = addHandler('login', loginHandler, {
      priority: 100,
      blocking: true,
      id: 'user-login',
      tags: ['auth', 'critical']
    });
    
    const unregisterLogout = addHandler('logout', logoutHandler, {
      priority: 100,
      blocking: true,
      id: 'user-logout',
      tags: ['auth']
    });
    
    const unregisterUpdateProfile = addHandler('updateProfile', updateProfileHandler, {
      priority: 90,
      blocking: true,
      id: 'profile-update',
      tags: ['profile', 'api']
    });
    
    const unregisterUpdatePreferences = addHandler('updatePreferences', updatePreferencesHandler, {
      priority: 80,
      blocking: false, // ë…¼ë¸”ë¡œí‚¹ - ë¹ ë¥¸ UI ë°˜ì‘
      id: 'preferences-update',
      tags: ['preferences']
    });
    
    return () => {
      unregisterLogin();
      unregisterLogout();
      unregisterUpdateProfile();
      unregisterUpdatePreferences();
    };
  }, [addHandler, loginHandler, logoutHandler, updateProfileHandler, updatePreferencesHandler]);
}
```

### 2. ì˜¤ë¥˜ ì²˜ë¦¬ ë° ë¡œê¹…

```typescript
// hooks/handlers/useUserHandlers.ts (ì˜¤ë¥˜ ì²˜ë¦¬ ì˜ˆì œ)
import { createLogger } from '@context-action/logger';

const logger = createLogger('UserHandlers');

export function useUserHandlers() {
  // ... ê¸°ì¡´ ì½”ë“œ
  
  const loginHandler = useCallback(async (payload, controller) => {
    logger.info('ë¡œê·¸ì¸ ì‹œë„', { email: payload.email });
    
    try {
      // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
      const result = await performLogin(payload);
      
      logger.info('ë¡œê·¸ì¸ ì„±ê³µ', { userId: result.user.id });
      return { success: true, user: result.user };
      
    } catch (error) {
      logger.error('ë¡œê·¸ì¸ ì‹¤íŒ¨', {
        email: payload.email,
        error: error.message,
        stack: error.stack
      });
      
      controller.abort('ë¡œê·¸ì¸ ì‹¤íŒ¨', {
        operation: 'login',
        payload: { email: payload.email }, // ë¯¼ê°í•œ ì •ë³´ ì œì™¸
        timestamp: Date.now(),
        error: error.message
      });
      
      return { success: false, error: categorizeError(error) };
    }
  }, [stores]);
  
  // ì˜¤ë¥˜ ë¶„ë¥˜ í•¨ìˆ˜
  function categorizeError(error: any): string {
    if (error.status === 401) return 'UNAUTHORIZED';
    if (error.status === 403) return 'FORBIDDEN';
    if (error.status >= 500) return 'SERVER_ERROR';
    if (error.name === 'NetworkError') return 'NETWORK_ERROR';
    return 'UNKNOWN_ERROR';
  }
}
```

## í”„ë¡œë°”ì´ë” êµ¬ì„±

### 1. ë‹¨ì¼ ë„ë©”ì¸ í”„ë¡œë°”ì´ë”

```typescript
// providers/UserProvider.tsx
import React from 'react';
import { UserStoreProvider, UserActionProvider } from '@/stores/user';
import { useUserHandlers } from '@/hooks/handlers/useUserHandlers';

function UserHandlersSetup() {
  useUserHandlers();
  return null;
}

export function UserProvider({ children }: { children: React.ReactNode }) {
  return (
    <UserStoreProvider>
      <UserActionProvider>
        <UserHandlersSetup />
        {children}
      </UserActionProvider>
    </UserStoreProvider>
  );
}
```

### 2. ë‹¤ì¤‘ ë„ë©”ì¸ í”„ë¡œë°”ì´ë”

```typescript
// providers/AppProvider.tsx
import React from 'react';
import { UserProvider } from './UserProvider';
import { CartProvider } from './CartProvider';
import { OrderProvider } from './OrderProvider';

export function AppProvider({ children }: { children: React.ReactNode }) {
  return (
    <UserProvider>
      <CartProvider>
        <OrderProvider>
          {children}
        </OrderProvider>
      </CartProvider>
    </UserProvider>
  );
}
```

### 3. ì¡°ê±´ë¶€ í”„ë¡œë°”ì´ë”

```typescript
// providers/ConditionalProvider.tsx
import React from 'react';
import { UserProvider } from './UserProvider';
import { AdminProvider } from './AdminProvider';

interface ConditionalProviderProps {
  children: React.ReactNode;
  userRole?: 'admin' | 'user' | 'guest';
}

export function ConditionalProvider({ 
  children, 
  userRole = 'guest' 
}: ConditionalProviderProps) {
  return (
    <UserProvider>
      {userRole === 'admin' ? (
        <AdminProvider>
          {children}
        </AdminProvider>
      ) : (
        children
      )}
    </UserProvider>
  );
}
```

## ê³ ê¸‰ íŒ¨í„´

### 1. ì§€ì†ì„± ìŠ¤í† ì–´

```typescript
// hooks/usePersistedUserStore.ts
import { useCallback, useEffect } from 'react';
import { useUserStores } from '@/stores/user';

export function usePersistedUserPreferences() {
  const stores = useUserStores();
  
  // í™˜ê²½ì„¤ì • ë¡œë“œ
  useEffect(() => {
    const preferencesStore = stores.getStore('preferences');
    
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¡œë“œ
    const savedPreferences = localStorage.getItem('user-preferences');
    if (savedPreferences) {
      try {
        const parsed = JSON.parse(savedPreferences);
        preferencesStore.setValue(parsed);
      } catch (error) {
        console.warn('í™˜ê²½ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', error);
      }
    }
  }, [stores]);
  
  // í™˜ê²½ì„¤ì • ë³€ê²½ ê°ì§€ ë° ì €ì¥
  useEffect(() => {
    const preferencesStore = stores.getStore('preferences');
    
    const unsubscribe = preferencesStore.subscribe((newPreferences) => {
      try {
        localStorage.setItem('user-preferences', JSON.stringify(newPreferences));
      } catch (error) {
        console.warn('í™˜ê²½ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', error);
      }
    });
    
    return unsubscribe;
  }, [stores]);
}
```

### 2. í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µí•©

```typescript
// hooks/logic/useUserCartIntegration.ts
import { useCallback } from 'react';
import { useStoreValue } from '@context-action/react';
import { useUserStore, useUserAction } from '@/stores/user';
import { useCartStore, useCartAction } from '@/stores/cart';

export function useUserCartIntegration() {
  // ë‹¤ì¤‘ ë„ë©”ì¸ ì ‘ê·¼
  const profileStore = useUserStore('profile');
  const cartItemsStore = useCartStore('items');
  
  const profile = useStoreValue(profileStore);
  const cartItems = useStoreValue(cartItemsStore);
  
  const userAction = useUserAction();
  const cartAction = useCartAction();
  
  // í¬ë¡œìŠ¤ ë„ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  const processCheckout = useCallback(async () => {
    // ì‚¬ìš©ì ê²€ì¦
    if (!profile.id) {
      await userAction('login', { /* ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ */ });
      return { success: false, reason: 'LOGIN_REQUIRED' };
    }
    
    // ì¥ë°”êµ¬ë‹ˆ ê²€ì¦
    if (cartItems.length === 0) {
      return { success: false, reason: 'EMPTY_CART' };
    }
    
    // ê²°ì œ ì²˜ë¦¬
    const result = await cartAction('processCheckout', {
      userId: profile.id,
      items: cartItems
    });
    
    return result;
  }, [profile.id, cartItems, userAction, cartAction]);
  
  // ë¡œê·¸ì¸ ì‹œ ì¥ë°”êµ¬ë‹ˆ ë™ê¸°í™”
  const syncCartOnLogin = useCallback(async () => {
    if (profile.id) {
      await cartAction('syncWithServer', { userId: profile.id });
    }
  }, [profile.id, cartAction]);
  
  return {
    processCheckout,
    syncCartOnLogin,
    canCheckout: profile.id && cartItems.length > 0
  };
}
```

### 3. ì»¤ìŠ¤í…€ í›… ì¡°í•©

```typescript
// hooks/logic/useUserProfile.ts
import { useState, useCallback } from 'react';
import { useStoreValue } from '@context-action/react';
import { useUserStore, useUserAction } from '@/stores/user';

export function useUserProfile() {
  const profileStore = useUserStore('profile');
  const sessionStore = useUserStore('session');
  
  const profile = useStoreValue(profileStore);
  const session = useStoreValue(sessionStore);
  const dispatch = useUserAction();
  
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  // í”„ë¡œí•„ ì—…ë°ì´íŠ¸
  const updateProfile = useCallback(async (data: Partial<typeof profile>) => {
    setIsLoading(true);
    setError(null);
    
    try {
      const result = await dispatch('updateProfile', { data });
      if (!result?.success) {
        setError(result?.error || 'ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
      }
      return result;
    } catch (error) {
      setError('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜');
      throw error;
    } finally {
      setIsLoading(false);
    }
  }, [dispatch]);
  
  // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
  const isAuthenticated = useCallback(() => {
    return session.isLoggedIn && session.token && 
           (session.expiresAt ? session.expiresAt > Date.now() : true);
  }, [session]);
  
  return {
    profile,
    session,
    isLoading,
    error,
    updateProfile,
    isAuthenticated: isAuthenticated(),
    clearError: () => setError(null)
  };
}
```

## í…ŒìŠ¤íŒ… ì„¤ì •

### 1. í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°

```typescript
// test-utils/providers.tsx
import React from 'react';
import { render, RenderOptions } from '@testing-library/react';
import { UserProvider } from '@/providers/UserProvider';

const AllTheProviders = ({ children }: { children: React.ReactNode }) => {
  return (
    <UserProvider>
      {children}
    </UserProvider>
  );
};

const customRender = (
  ui: React.ReactElement,
  options?: Omit<RenderOptions, 'wrapper'>
) => render(ui, { wrapper: AllTheProviders, ...options });

export * from '@testing-library/react';
export { customRender as render };
```

### 2. í•¸ë“¤ëŸ¬ í…ŒìŠ¤íŠ¸

```typescript
// __tests__/handlers/userHandlers.test.ts
import { renderHook } from '@testing-library/react-hooks';
import { useUserHandlers } from '@/hooks/handlers/useUserHandlers';
import { createMockStores, createMockController } from '@/test-utils';

describe('User Handlers', () => {
  let mockStores;
  let mockController;
  
  beforeEach(() => {
    mockStores = createMockStores();
    mockController = createMockController();
  });
  
  it('ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í”„ë¡œí•„ê³¼ ì„¸ì…˜ ì—…ë°ì´íŠ¸', async () => {
    const { result } = renderHook(() => useUserHandlers());
    
    // Mock API ì‘ë‹µ
    global.fetch = jest.fn().mockResolvedValueOnce({
      ok: true,
      json: () => Promise.resolve({
        token: 'fake-token',
        expiresIn: 3600,
        user: { id: '1', name: 'í…ŒìŠ¤íŠ¸', email: 'test@example.com' }
      })
    });
    
    // í•¸ë“¤ëŸ¬ ì‹¤í–‰
    await result.current.loginHandler(
      { email: 'test@example.com', password: 'password' },
      mockController
    );
    
    // ê²€ì¦
    expect(mockStores.getStore('session').setValue).toHaveBeenCalledWith({
      isLoggedIn: true,
      token: 'fake-token',
      expiresAt: expect.any(Number)
    });
    
    expect(mockStores.getStore('profile').setValue).toHaveBeenCalledWith({
      id: '1',
      name: 'í…ŒìŠ¤íŠ¸',
      email: 'test@example.com'
    });
  });
});
```

---

## ìš”ì•½

ì´ ì„¤ì • ê°€ì´ë“œëŠ” Context-Action í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•œ ê²¬ê³ í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•ì˜ ê¸°ì´ˆë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì£¼ìš” í¬ì¸íŠ¸:

- **ì²´ê³„ì ì¸ í”„ë¡œì íŠ¸ êµ¬ì¡°**ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í™•ë³´
- **íƒ€ì… ì•ˆì „í•œ ë„ë©”ì¸ ì •ì˜**ë¡œ ê°œë°œì ê²½í—˜ í–¥ìƒ
- **ê²¬ê³ í•œ ì˜¤ë¥˜ ì²˜ë¦¬**ë¡œ ì•ˆì •ì„± í™•ë³´
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**ë¡œ í’ˆì§ˆ ë³´ì¥

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [ë„ë©”ì¸ í›… íŒ¨í„´](./domain-hooks-pattern) - ë„ë©”ì¸ë³„ í›…ì˜ ê³ ê¸‰ ì‚¬ìš©ë²•
- [ì•¡ì…˜ í•¸ë“¤ëŸ¬](./action-handlers) - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ ì‹¬í™”
- [ìµœì„ ì˜ ì‹¤ìŠµ](./best-practices) - í”„ë¡œë•ì…˜ í™˜ê²½ ëª¨ë²” ì‚¬ë¡€
:::

---


# Guide Store Management

**Source**: `guide/store-management.md`  
**Priority**: 80 (essential)  

# ìŠ¤í† ì–´ ê´€ë¦¬

Context-Action í”„ë ˆì„ì›Œí¬ì˜ ìŠ¤í† ì–´ ì‹œìŠ¤í…œì€ í”„ë¡œë°”ì´ë” ê²½ê³„ ë‚´ì—ì„œ ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” íš¨ìœ¨ì ì´ê³  ì•ˆì „í•œ ìŠ¤í† ì–´ ê´€ë¦¬ íŒ¨í„´ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ìŠ¤í† ì–´ ìƒëª…ì£¼ê¸°

### ìƒì„±ê³¼ ì´ˆê¸°í™”

ìŠ¤í† ì–´ëŠ” í”„ë¡œë°”ì´ë” ë‚´ì—ì„œ ì²˜ìŒ ì ‘ê·¼ë  ë•Œ ìƒì„±ë˜ê³  ì´ˆê¸°í™”ë©ë‹ˆë‹¤:

```typescript
// ìŠ¤í† ì–´ ì •ì˜
export const {
  Provider: UserStoreProvider,
  useStore: useUserStore,
  useStores: useUserStores
} = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: '',
      status: 'offline'
    },
    strategy: 'deep' // ë³€ê²½ ê°ì§€ ì „ëµ
  },
  settings: {
    initialValue: {
      theme: 'light',
      language: 'ko',
      notifications: true
    },
    strategy: 'shallow'
  }
});

// ì‚¬ìš©ë²•
function UserComponent() {
  // ì²« ë²ˆì§¸ ì ‘ê·¼ ì‹œ ìŠ¤í† ì–´ê°€ ìƒì„±ë˜ê³  ì´ˆê¸°í™”ë¨
  const profileStore = useUserStore('profile');
  const settingsStore = useUserStore('settings');
  
  // ë™ì¼í•œ ì´ë¦„ì˜ ìŠ¤í† ì–´ëŠ” ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜ (ì‹±ê¸€í†¤)
  const sameProfileStore = useUserStore('profile'); // profileStoreì™€ ë™ì¼
}
```

### ë³€ê²½ ê°ì§€ ì „ëµ

ìŠ¤í† ì–´ëŠ” ì„¸ ê°€ì§€ ë³€ê²½ ê°ì§€ ì „ëµì„ ì œê³µí•©ë‹ˆë‹¤:

```typescript
// 1. ì°¸ì¡° ë¹„êµ (ê¸°ë³¸ê°’) - ë¹ ë¦„, ì›ì‹œê°’ê³¼ ë¶ˆë³€ ê°ì²´ì— ì í•©
{
  strategy: 'reference' // Object.is() ì‚¬ìš©
}

// 2. ì–•ì€ ë¹„êµ - ê°ì²´ì˜ ìµœìƒìœ„ ì†ì„±ë§Œ ë¹„êµ
{
  strategy: 'shallow' // ê° ì†ì„±ì„ ê°œë³„ì ìœ¼ë¡œ ë¹„êµ
}

// 3. ê¹Šì€ ë¹„êµ - ì¤‘ì²©ëœ ê°ì²´ê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ ë¹„êµ
{
  strategy: 'deep' // ëª¨ë“  ì¤‘ì²© ìˆ˜ì¤€ì—ì„œ ë¹„êµ
}
```

**ì „ëµ ì„ íƒ ê°€ì´ë“œ:**

```typescript
// ì›ì‹œê°’ ë˜ëŠ” ë¶ˆë³€ ê°ì²´ - reference (ê¸°ë³¸ê°’)
counter: {
  initialValue: 0,
  strategy: 'reference'
}

// í‰ë©´ ê°ì²´ - shallow
userPreferences: {
  initialValue: { theme: 'light', lang: 'ko' },
  strategy: 'shallow'
}

// ì¤‘ì²© ê°ì²´ - deep (ì„±ëŠ¥ ë¹„ìš© ê³ ë ¤)
complexUserData: {
  initialValue: {
    profile: { name: '', settings: { privacy: true } },
    metadata: { lastLogin: null }
  },
  strategy: 'deep'
}
```

## ìŠ¤í† ì–´ ì ‘ê·¼ íŒ¨í„´

### 1. ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ë°˜ì‘í˜• ì ‘ê·¼

```typescript
function UserProfile() {
  // ë°˜ì‘í˜• ìŠ¤í† ì–´ ì ‘ê·¼
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore);
  
  // ìƒíƒœ ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ìë™ ë¦¬ë Œë”ë§
  return (
    <div>
      <h2>{profile.name}</h2>
      <p>ìƒíƒœ: {profile.status}</p>
    </div>
  );
}

// ì—¬ëŸ¬ ìŠ¤í† ì–´ êµ¬ë…
function UserDashboard() {
  const profile = useStoreValue(useUserStore('profile'));
  const settings = useStoreValue(useUserStore('settings'));
  
  // ê°ê° ë…ë¦½ì ìœ¼ë¡œ êµ¬ë…ë¨
  return (
    <div className={`theme-${settings.theme}`}>
      <h1>í™˜ì˜í•©ë‹ˆë‹¤, {profile.name}ë‹˜</h1>
      <p>ì–¸ì–´: {settings.language}</p>
    </div>
  );
}
```

### 2. í•¸ë“¤ëŸ¬ì—ì„œì˜ ì§€ì—° í‰ê°€ ì ‘ê·¼

```typescript
function useUserHandlers() {
  const registry = useUserStores();
  
  const updateProfileHandler = useCallback(async (payload, controller) => {
    // ì§€ì—° í‰ê°€ - ì‹¤í–‰ ì‹œì ì˜ ìµœì‹  ê°’
    const profileStore = registry.getStore('profile');
    const currentProfile = profileStore.getValue(); // í˜„ì¬ ê°’ íšë“
    
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    const updatedProfile = {
      ...currentProfile,
      ...payload.data,
      lastModified: Date.now()
    };
    
    // ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
    profileStore.setValue(updatedProfile);
    
    return { success: true, profile: updatedProfile };
  }, [registry]);
}
```

### 3. ì§ì ‘ ìŠ¤í† ì–´ ì¡°ì‘

```typescript
function UserEditor() {
  const profileStore = useUserStore('profile');
  const profile = useStoreValue(profileStore);
  
  // ì§ì ‘ ì—…ë°ì´íŠ¸ (ê°„ë‹¨í•œ ê²½ìš°)
  const updateName = useCallback((newName: string) => {
    profileStore.setValue({
      ...profile,
      name: newName,
      lastModified: Date.now()
    });
  }, [profileStore, profile]);
  
  // ë¶€ë¶„ ì—…ë°ì´íŠ¸ í—¬í¼
  const updateProfile = useCallback((updates: Partial<UserProfile>) => {
    profileStore.update(current => ({
      ...current,
      ...updates,
      lastModified: Date.now()
    }));
  }, [profileStore]);
  
  return (
    <div>
      <input 
        value={profile.name}
        onChange={(e) => updateName(e.target.value)}
      />
      <button onClick={() => updateProfile({ status: 'online' })}>
        ì˜¨ë¼ì¸ ìƒíƒœë¡œ ë³€ê²½
      </button>
    </div>
  );
}
```

## ê³ ê¸‰ ìŠ¤í† ì–´ íŒ¨í„´

### 1. ë™ì  ìŠ¤í† ì–´ ìƒì„±

```typescript
function UserCacheManager() {
  const createStore = useCreateUserStore();
  
  // ì‚¬ìš©ìë³„ ìºì‹œ ìŠ¤í† ì–´ ë™ì  ìƒì„±
  const createUserCache = useCallback((userId: string) => {
    return createStore(`cache-${userId}`, {
      data: null,
      lastFetched: null,
      isLoading: false
    });
  }, [createStore]);
  
  return { createUserCache };
}

// ì‚¬ìš©ë²•
function UserDataComponent({ userId }: { userId: string }) {
  const { createUserCache } = useUserCacheManager();
  const userCache = createUserCache(userId);
  const cacheData = useStoreValue(userCache);
  
  return <div>ì‚¬ìš©ì {userId} ìºì‹œ: {cacheData.data?.name}</div>;
}
```

### 2. ìŠ¤í† ì–´ êµ¬ë… ìµœì í™”

```typescript
// ì„ íƒì  í•„ë“œ êµ¬ë…
function OptimizedUserDisplay() {
  const profileStore = useUserStore('profile');
  
  // ì´ë¦„ ë³€ê²½ ì‹œë§Œ ë¦¬ë Œë”ë§
  const userName = useStoreValue(profileStore, profile => profile.name);
  
  // ìƒíƒœ ë³€ê²½ ì‹œë§Œ ë¦¬ë Œë”ë§
  const userStatus = useStoreValue(profileStore, profile => profile.status);
  
  return (
    <div>
      <span>ì´ë¦„: {userName}</span>
      <span>ìƒíƒœ: {userStatus}</span>
    </div>
  );
}

// ì¡°ê±´ë¶€ êµ¬ë…
function ConditionalSubscription({ showDetails }: { showDetails: boolean }) {
  const profileStore = useUserStore('profile');
  
  // showDetailsê°€ trueì¼ ë•Œë§Œ êµ¬ë…
  const profile = useStoreValue(profileStore, 
    showDetails ? undefined : () => null
  );
  
  if (!showDetails || !profile) {
    return <div>ê°„ë‹¨í•œ ë·°</div>;
  }
  
  return <div>ìƒì„¸ ì •ë³´: {profile.email}</div>;
}
```

### 3. ìŠ¤í† ì–´ ë™ê¸°í™” íŒ¨í„´

```typescript
// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì™€ ë™ê¸°í™”
function usePersistedStore() {
  const settingsStore = useUserStore('settings');
  const settings = useStoreValue(settingsStore);
  
  // ì´ˆê¸° ë¡œë“œ
  useEffect(() => {
    const savedSettings = localStorage.getItem('user-settings');
    if (savedSettings) {
      try {
        const parsed = JSON.parse(savedSettings);
        settingsStore.setValue(parsed);
      } catch (error) {
        console.warn('ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', error);
      }
    }
  }, [settingsStore]);
  
  // ë³€ê²½ì‚¬í•­ ì €ì¥
  useEffect(() => {
    const unsubscribe = settingsStore.subscribe((newSettings) => {
      try {
        localStorage.setItem('user-settings', JSON.stringify(newSettings));
      } catch (error) {
        console.warn('ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', error);
      }
    });
    
    return unsubscribe;
  }, [settingsStore]);
  
  return { settings };
}

// ì„œë²„ì™€ ë™ê¸°í™”
function useServerSync() {
  const profileStore = useUserStore('profile');
  const [lastSync, setLastSync] = useState<number>(0);
  
  // ì„œë²„ì—ì„œ ë°ì´í„° ë¡œë“œ
  const loadFromServer = useCallback(async () => {
    try {
      const response = await fetch('/api/user/profile');
      const serverProfile = await response.json();
      profileStore.setValue(serverProfile);
      setLastSync(Date.now());
    } catch (error) {
      console.error('ì„œë²„ ë™ê¸°í™” ì‹¤íŒ¨:', error);
    }
  }, [profileStore]);
  
  // ì„œë²„ì— ë°ì´í„° ì €ì¥
  const syncToServer = useCallback(async (profile: UserProfile) => {
    try {
      await fetch('/api/user/profile', {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(profile)
      });
      setLastSync(Date.now());
    } catch (error) {
      console.error('ì„œë²„ ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
    }
  }, []);
  
  return { loadFromServer, syncToServer, lastSync };
}
```

## ë©”ëª¨ë¦¬ ê´€ë¦¬

### 1. ìŠ¤í† ì–´ ì •ë¦¬

```typescript
// í”„ë¡œë°”ì´ë” ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ ì •ë¦¬
function App() {
  const [showUser, setShowUser] = useState(true);
  
  return (
    <div>
      {showUser ? (
        <UserStoreProvider>
          <UserComponents />
        </UserStoreProvider>
      ) : (
        <div>ì‚¬ìš©ì ì„¹ì…˜ ìˆ¨ê¹€</div>
      )}
      <button onClick={() => setShowUser(!showUser)}>
        {showUser ? 'ìˆ¨ê¸°ê¸°' : 'ë³´ì´ê¸°'}
      </button>
    </div>
  );
}
// UserStoreProviderê°€ ì–¸ë§ˆìš´íŠ¸ë˜ë©´ ëª¨ë“  User ìŠ¤í† ì–´ê°€ ì •ë¦¬ë¨
```

### 2. êµ¬ë… í•´ì œ

```typescript
function ManualSubscription() {
  const profileStore = useUserStore('profile');
  const [manualData, setManualData] = useState(null);
  
  useEffect(() => {
    // ìˆ˜ë™ êµ¬ë…
    const unsubscribe = profileStore.subscribe((newProfile) => {
      setManualData(processProfile(newProfile));
    });
    
    // ì •ë¦¬ í•¨ìˆ˜ì—ì„œ êµ¬ë… í•´ì œ
    return unsubscribe;
  }, [profileStore]);
  
  return <div>ìˆ˜ë™ ì²˜ë¦¬ëœ ë°ì´í„°: {manualData}</div>;
}
```

### 3. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

```typescript
// âŒ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜
function BadPattern() {
  const profileStore = useUserStore('profile');
  
  useEffect(() => {
    const subscription = profileStore.subscribe((profile) => {
      // ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ë“±ë¡
      externalService.updateProfile(profile);
    });
    // ì •ë¦¬ í•¨ìˆ˜ ì—†ìŒ - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!
  }, [profileStore]);
}

// âœ… ì ì ˆí•œ ì •ë¦¬
function GoodPattern() {
  const profileStore = useUserStore('profile');
  
  useEffect(() => {
    const subscription = profileStore.subscribe((profile) => {
      externalService.updateProfile(profile);
    });
    
    // ì ì ˆí•œ ì •ë¦¬
    return () => {
      subscription(); // êµ¬ë… í•´ì œ
      externalService.cleanup(); // ì™¸ë¶€ ì„œë¹„ìŠ¤ ì •ë¦¬
    };
  }, [profileStore]);
}
```

## ì„±ëŠ¥ ìµœì í™”

### 1. ë°°ì¹˜ ì—…ë°ì´íŠ¸

```typescript
function BatchUpdates() {
  const profileStore = useUserStore('profile');
  const settingsStore = useUserStore('settings');
  
  const updateMultiple = useCallback(() => {
    // Reactì˜ ë°°ì¹˜ ì—…ë°ì´íŠ¸ë¥¼ í™œìš©
    profileStore.setValue(prevProfile => ({
      ...prevProfile,
      name: 'ìƒˆ ì´ë¦„',
      lastModified: Date.now()
    }));
    
    settingsStore.setValue(prevSettings => ({
      ...prevSettings,
      theme: 'dark'
    }));
    
    // ë‘ ì—…ë°ì´íŠ¸ê°€ í•˜ë‚˜ì˜ ë Œë”ë§ ì‚¬ì´í´ì—ì„œ ë°°ì¹˜ë¨
  }, [profileStore, settingsStore]);
}
```

### 2. ì§€ì—° ì´ˆê¸°í™”

```typescript
// ë¬´ê±°ìš´ ê³„ì‚°ì„ ì§€ì—° ì´ˆê¸°í™”
export const expensiveDataStore = createDeclarativeStores<ExpensiveData>('Expensive', {
  computedData: {
    initialValue: () => {
      // ì²« ì ‘ê·¼ ì‹œì—ë§Œ ì‹¤í–‰ë˜ëŠ” ë¬´ê±°ìš´ ê³„ì‚°
      return computeExpensiveInitialValue();
    },
    strategy: 'deep'
  }
});
```

### 3. ì„ íƒì  ë¦¬ë Œë”ë§

```typescript
function OptimizedComponent() {
  const profileStore = useUserStore('profile');
  
  // ì´ë¦„ì´ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§
  const name = useStoreValue(profileStore, profile => profile.name);
  
  // ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§  
  const status = useStoreValue(profileStore, profile => profile.status);
  
  return (
    <div>
      <UserName name={name} />
      <UserStatus status={status} />
    </div>
  );
}

// ë©”ëª¨í™”ë¡œ ì¶”ê°€ ìµœì í™”
const UserName = React.memo(({ name }: { name: string }) => (
  <h2>{name}</h2>
));

const UserStatus = React.memo(({ status }: { status: string }) => (
  <span className={`status-${status}`}>{status}</span>
));
```

## ë””ë²„ê¹…ê³¼ ê°œë°œ ë„êµ¬

### 1. ê°œë°œ ëª¨ë“œ ë¡œê¹…

```typescript
// ê°œë°œ í™˜ê²½ì—ì„œ ìƒíƒœ ë³€ê²½ ë¡œê¹…
export const {
  Provider: UserStoreProvider,
  useStore: useUserStore,
  useStores: useUserStores
} = createDeclarativeStores<UserData>('User', {
  profile: {
    initialValue: defaultProfile,
    strategy: 'deep',
    // ê°œë°œ ëª¨ë“œì—ì„œë§Œ ë¡œê¹…
    onChange: process.env.NODE_ENV === 'development' 
      ? (newValue, oldValue) => {
          console.log('Profile ë³€ê²½:', { from: oldValue, to: newValue });
        }
      : undefined
  }
});
```

### 2. ìŠ¤í† ì–´ ìƒíƒœ ê²€ì‚¬

```typescript
function DebugPanel() {
  const registry = useUserStores();
  const [storeStates, setStoreStates] = useState({});
  
  const captureStoreStates = useCallback(() => {
    const states = {
      profile: registry.getStore('profile').getValue(),
      settings: registry.getStore('settings').getValue()
    };
    setStoreStates(states);
  }, [registry]);
  
  return (
    <div>
      <button onClick={captureStoreStates}>ìŠ¤í† ì–´ ìƒíƒœ ìº¡ì²˜</button>
      <pre>{JSON.stringify(storeStates, null, 2)}</pre>
    </div>
  );
}
```

### 3. ì‹œê°„ ì—¬í–‰ ë””ë²„ê¹…

```typescript
// ìƒíƒœ ë³€ê²½ íˆìŠ¤í† ë¦¬ ì¶”ì 
function useStoreHistory<T>(store: Store<T>) {
  const [history, setHistory] = useState<T[]>([]);
  
  useEffect(() => {
    const unsubscribe = store.subscribe((newValue) => {
      setHistory(prev => [...prev.slice(-9), newValue]); // ìµœê·¼ 10ê°œ ìœ ì§€
    });
    
    return unsubscribe;
  }, [store]);
  
  return history;
}

// ì‚¬ìš©ë²•
function DebugComponent() {
  const profileStore = useUserStore('profile');
  const profileHistory = useStoreHistory(profileStore);
  
  return (
    <div>
      <h3>í”„ë¡œí•„ ë³€ê²½ íˆìŠ¤í† ë¦¬</h3>
      {profileHistory.map((profile, index) => (
        <div key={index}>
          {index}: {profile.name} ({profile.lastModified})
        </div>
      ))}
    </div>
  );
}
```

## ëª¨ë²” ì‚¬ë¡€

### 1. ì ì ˆí•œ ì´ˆê¸°ê°’ ì„¤ì •

```typescript
// âœ… ì¢‹ìŒ: ì™„ì „í•œ íƒ€ì… êµ¬ì¡°
{
  profile: {
    initialValue: {
      id: '',
      name: '',
      email: '',
      avatar: null,
      status: 'offline',
      lastLogin: null
    }
  }
}

// âŒ í”¼í•˜ê¸°: null ë˜ëŠ” undefined
{
  profile: {
    initialValue: null // íƒ€ì… ì•ˆì „ì„± ë¬¸ì œ
  }
}
```

### 2. ì¼ê´€ëœ ì—…ë°ì´íŠ¸ íŒ¨í„´

```typescript
// âœ… ì¢‹ìŒ: ë¶ˆë³€ì„± ìœ ì§€
const updateProfile = (updates: Partial<UserProfile>) => {
  profileStore.setValue(current => ({
    ...current,
    ...updates,
    lastModified: Date.now()
  }));
};

// âŒ í”¼í•˜ê¸°: ì§ì ‘ ë³€ê²½
const badUpdate = (updates: Partial<UserProfile>) => {
  const current = profileStore.getValue();
  Object.assign(current, updates); // ì§ì ‘ ë³€ê²½ì€ ë°˜ì‘ì„± ë¬¸ì œ
  profileStore.setValue(current);
};
```

### 3. ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬

```typescript
// âœ… ì¢‹ìŒ: ê´€ë ¨ ë°ì´í„° ê·¸ë£¹í™”
interface UserData {
  // ì‚¬ìš©ì ì‹ ì› ì •ë³´
  identity: {
    id: string;
    name: string;
    email: string;
  };
  
  // ì‚¬ìš©ì ì„¤ì •
  preferences: {
    theme: string;
    language: string;
  };
  
  // ì„¸ì…˜ ì •ë³´
  session: {
    isLoggedIn: boolean;
    token: string | null;
  };
}

// âŒ í”¼í•˜ê¸°: í‰ë©´ì  êµ¬ì¡°
interface UserDataFlat {
  id: string;
  name: string;
  email: string;
  theme: string;
  language: string;
  isLoggedIn: boolean;
  token: string | null;
  // ëª¨ë“  ê²ƒì´ í•œ ë ˆë²¨ì— ìˆì–´ ê´€ë¦¬ ì–´ë ¤ì›€
}
```

---

## ìš”ì•½

Context-Actionì˜ ìŠ¤í† ì–´ ê´€ë¦¬ëŠ” ë‹¤ìŒ í•µì‹¬ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

- **ë°˜ì‘í˜• ìƒíƒœ ê´€ë¦¬** - ë³€ê²½ì‚¬í•­ì— ìë™ ë°˜ì‘
- **í”„ë¡œë°”ì´ë” ë²”ìœ„ ì‹±ê¸€í†¤** - ì»¨í…ìŠ¤íŠ¸ ê²½ê³„ ë‚´ ì¼ê´€ì„±
- **íƒ€ì… ì•ˆì „ì„±** - ì™„ì „í•œ TypeScript ì§€ì›
- **ì„±ëŠ¥ ìµœì í™”** - ì„ íƒì  êµ¬ë…ê³¼ ë°°ì¹˜ ì—…ë°ì´íŠ¸
- **ë©”ëª¨ë¦¬ ì•ˆì „ì„±** - ìë™ ì •ë¦¬ì™€ êµ¬ë… ê´€ë¦¬

ì´ëŸ¬í•œ íŒ¨í„´ì„ ë”°ë¥´ë©´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

::: tip ë‹¤ìŒ ë‹¨ê³„
- [ì•¡ì…˜ í•¸ë“¤ëŸ¬](./action-handlers) - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„
- [React í†µí•©](./react-integration) - Reactì™€ì˜ íš¨ê³¼ì ì¸ í†µí•©
- [ì„±ëŠ¥ ìµœì í™”](./performance) - ê³ ê¸‰ ì„±ëŠ¥ ìµœì í™” ê¸°ë²•
:::

---


# Index

**Source**: `index.md`  
**Priority**: 50 (reference)  

<style>
.VPFeature .icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.VPFeatures .VPFeature {
  transition: transform 0.2s, box-shadow 0.2s;
}

.VPFeatures .VPFeature:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
}
</style>

---



---

## Document Collection Summary

This collection includes all original documentation content from the Context-Action framework, preserving the complete information while removing YAML metadata for clean presentation.

**Generation Date**: 2025-08-14
**Content Type**: Original Documentation  
**Processing**: YAML frontmatter removed, content preserved

*Generated automatically from source documentation files*