#!/bin/sh

# Get list of modified markdown files in docs directory
MODIFIED_DOCS=$(git diff --cached --name-only --diff-filter=ACM | grep -E '^docs/(en|ko)/.*\.md$' | grep -v llms/ || true)

if [ -n "$MODIFIED_DOCS" ]; then
  echo "📝 Detected modified documentation files. Updating LLM work status..."
  
  # Run the llms-generator sync-docs command
  node packages/llms-generator/dist/cli/index.js sync-docs --changed-files="$MODIFIED_DOCS" --quiet
  
  # Add any updated files to the commit
  git add packages/llms-generator/data/ 2>/dev/null || true
  git add docs/*/llms/ 2>/dev/null || true
  
  echo "✅ LLM work status updated"
fi
