#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Priority JSON κ²€μ¦ (config κΈ°λ°)
echo "π” Priority JSON νμΌλ“¤μ„ κ²€μ¦ν•©λ‹λ‹¤..."

# Pre-commit hook μ‹¤ν–‰ - λ¨λ“  μ„¤μ •μ€ llms-generator.config.jsonμ—μ„ λ΅λ“
npx @context-action/llms-generator pre-commit-check --quiet

# κ²€μ¦ κ²°κ³Όμ— λ”°λΌ μ»¤λ°‹ ν—μ©/μ°¨λ‹¨
if [ $? -eq 0 ]; then
  echo "β… Priority JSON κ²€μ¦ ν†µκ³Ό - μ»¤λ°‹μ„ μ§„ν–‰ν•©λ‹λ‹¤."
  exit 0
else
  echo "β Priority JSON κ²€μ¦ μ‹¤ν¨ - μ»¤λ°‹μ΄ μ°¨λ‹¨λμ—μµλ‹λ‹¤."
  echo "μƒμ„Έ λ‚΄μ©μ€ .husky/pre-commit-report.jsonμ„ ν™•μΈν•μ„Έμ”."
  exit 1
fi